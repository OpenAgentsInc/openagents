#!/bin/sh

# Git pre-push hook to run quality checks
# Ensures code quality before pushing to remote

echo "Running pre-push checks..."

# Run lint check
echo "ğŸ” Running ESLint..."
if ! pnpm lint; then
    echo "âŒ ESLint failed. Fix linting errors before pushing."
    exit 1
fi

# Run type check
echo "ğŸ” Running TypeScript check..."
if ! pnpm check; then
    echo "âŒ TypeScript check failed. Fix type errors before pushing."
    exit 1
fi

# Run build check
echo "ğŸ” Running build..."
if ! pnpm build; then
    echo "âŒ Build failed. Fix build errors before pushing."
    exit 1
fi

# Run tests
echo "ğŸ” Running tests..."
if ! pnpm vitest run; then
    echo "âŒ Tests failed. Fix failing tests before pushing."
    exit 1
fi

echo "âœ… All pre-push checks passed!"
exit 0