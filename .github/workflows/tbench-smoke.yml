name: tbench-smoke

on:
  pull_request:
    paths:
      - 'src/cli/tbench.ts'
      - 'src/cli/tbench-local.ts'
      - 'src/bench/**'
      - 'tasks/**'
      - '.github/workflows/tbench-smoke.yml'
      - 'package.json'
      - 'bun.lockb'
      - 'tsconfig*.json'
      - 'src/tbench-hud/**'
      - 'docs/tbench/**'
      - 'docs/terminal-bench.md'
      - 'docs/hud/TERMINAL-BENCH.md'

permissions:
  contents: read

jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Bun
        uses: oven-sh/setup-bun@v1
        with:
          bun-version: 1.3.0
      - name: Install dependencies
        run: bun install --frozen-lockfile
      - name: Run Terminal-Bench smoke test
        run: bun test src/cli/tbench.harbor.test.ts
