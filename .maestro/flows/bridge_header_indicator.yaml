appId: com.openagents.app
name: Bridge â†’ Header Connection Indicator
---
- launchApp
- openLink: "${EXP_URL}"
# First, try to observe the connection indicator directly (auto-connect path)
- runFlow:
    when:
      visible:
        id: header-connection-indicator
    commands:
      - extendedWaitUntil:
          visible:
            id: header-connection-indicator
          timeout: 60000
# If not yet connected, navigate to Settings and tap Dev Quick Connect
- runFlow:
    when:
      notVisible:
        id: header-connection-indicator
    commands:
      - runFlow:
          when:
            visible:
              id: header-menu-button
          commands:
            - tapOn:
                id: header-menu-button
            - extendedWaitUntil:
                visible:
                  id: drawer-settings
                timeout: 30000
            - tapOn:
                id: drawer-settings
      - runFlow:
          when:
            visible:
              id: settings-dev-quick
          commands:
            - tapOn:
                id: settings-dev-quick
      - extendedWaitUntil:
          visible:
            id: header-connection-indicator
          timeout: 120000
