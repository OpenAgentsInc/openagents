appId: com.openagents.app
name: Session Submit And Stream
---
# Ensure Dev Client loads from local packager
- launchApp
- openLink: "exp://localhost:8081"
# Configure Bridge via deep link and auto-connect
- openLink: "openagents://connect?j=%7B%22v%22%3A1%2C%22type%22%3A%22bridge%22%2C%22hosts%22%3A%5B%22127.0.0.1%3A8787%22%5D%2C%22token%22%3A%22test%22%7D"
- launchApp
# Ensure connected by verifying the header dot exists
- extendedWaitUntil:
    visible:
      id: header-connection-indicator
    timeout: 120000
# Start a new chat
- tapOn:
    text: New chat
# Type a prompt and send
- inputText:
    id: composer-input
    text: "Hello from Maestro"
- tapOn:
    id: composer-send
# Expect user and agent messages to render (fake providers stream deterministically)
- extendedWaitUntil:
    visible:
      id: user-message
    timeout: 60000
- extendedWaitUntil:
    visible:
      id: agent-message
    timeout: 90000
