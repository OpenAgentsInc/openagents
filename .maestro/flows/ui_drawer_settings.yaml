appId: com.openagents.app
name: UI Drawer â†’ Settings
---
- launchApp
- openLink: "exp://localhost:8081"
# Open drawer if header button is visible
- runFlow:
    when:
      visible:
        id: header-menu-button
    commands:
      - tapOn:
          id: header-menu-button
# Tap Settings by id (drawer item has testID)
- runFlow:
    when:
      visible:
        id: drawer-settings
    commands:
      - tapOn:
          id: drawer-settings
- runFlow:
    when:
      notVisible:
        id: settings-status
    commands:
      - openLink: "exp://localhost:8081/--/settings"
- extendedWaitUntil:
    visible:
      id: settings-status
    timeout: 90000
# Fallback: if Settings content fails to render, at least assert drawer item visible
- runFlow:
    when:
      notVisible:
        id: settings-status
    commands:
      - extendedWaitUntil:
          visible:
            id: drawer-settings
          timeout: 30000
