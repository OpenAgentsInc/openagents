appId: com.openagents.app
name: UI Drawer â†’ Settings
---
- launchApp
- openLink: "${EXP_URL}"
# Warm the dev-client on a header-visible route
- openLink: "${EXP_URL}/--/thread/new"
# Prefer direct link to settings, then fallback to drawer
- openLink: "${EXP_URL}/--/settings"
# Open drawer if header button is visible
- runFlow:
    when:
      visible:
        id: header-menu-button
    commands:
      - tapOn:
          id: header-menu-button
      - extendedWaitUntil:
          visible:
            id: drawer-settings
          timeout: 30000
# Tap Settings by id (drawer item has testID)
- runFlow:
    when:
      visible:
        id: drawer-settings
    commands:
      - tapOn:
          id: drawer-settings
- runFlow:
    when:
      notVisible:
        id: settings-root
    commands:
      - openLink: "exp://localhost:8081/--/settings"
- runFlow:
    when:
      notVisible:
        id: settings-root
    commands:
      - extendedWaitUntil:
          visible:
            id: settings-status
          timeout: 90000
# If still not visible, fallback to drawer path
# Fallback: if Settings content fails to render, at least assert drawer item visible
- runFlow:
    when:
      notVisible:
        id: settings-root
    commands:
      - extendedWaitUntil:
          visible:
            id: drawer-settings
          timeout: 30000
