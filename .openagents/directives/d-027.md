---
id: d-027
title: Autopilot Demo + Dogfooding Funnel
status: active
priority: urgent
created: 2025-12-26
updated: 2025-12-26
progress: 45%
commits:
  - c4f2bb48d # Replay bundle format and publishing pipeline
  - f1926b8a7 # Web-based replay viewer and documentation
---

## Goal

Ship a public-facing demo of Autopilot that converts visitors into paying customers. The demo shows a real Autopilot run ("Wake up to a PR") and leads directly to checkout. Dogfood the OpenAgents repo to generate authentic demo content.

## Background

From the launch strategy: the single most compelling promise is **"Wake up to a PR"** - a visitor sees a 90-120 second replay of Autopilot autonomously turning an issue into a merged PR, then can immediately sign up.

The demo must be:
- **Real** - Actual Autopilot trajectory, not a mock
- **Fast** - 90-120 seconds to show the full loop
- **Verified** - Show receipts (tests passed, CI green)
- **Value First** - Connect repo â†’ free analysis â†’ then pay

This directive establishes the demo pipeline and the dogfooding loop that feeds it.

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DOGFOODING LOOP                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   Autopilot  â”‚    â”‚    Redact    â”‚    â”‚   Publish    â”‚                  â”‚
â”‚  â”‚  runs on     â”‚â”€â”€â”€â–¶â”‚    secrets   â”‚â”€â”€â”€â–¶â”‚   as demo    â”‚                  â”‚
â”‚  â”‚  OpenAgents  â”‚    â”‚    + PII     â”‚    â”‚   replay     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                                        â”‚                          â”‚
â”‚         â–¼                                        â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   Issues     â”‚                        â”‚  Homepage    â”‚                  â”‚
â”‚  â”‚   resolved   â”‚                        â”‚  demo        â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                  â”‚                          â”‚
â”‚                                                  â–¼                          â”‚
â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                                          â”‚   Checkout   â”‚                  â”‚
â”‚                                          â”‚   + Signup   â”‚                  â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Funnel Flow

```
Homepage (openagents.com)
    â”‚
    â–¼
Demo Replay (90-120 seconds)
    â”‚ "Watch Autopilot turn Issue #42 into a merged PR"
    â”‚ Shows: issue â†’ branch â†’ commits â†’ tests â†’ PR â†’ merge
    â”‚ Receipts visible: test results, CI status, costs
    â–¼
CTA Button
    â”‚ "Try It On Your Repo"
    â–¼
Connect Repository (FREE)
    â”‚ GitHub OAuth â†’ select repo â†’ confirm permissions
    â–¼
Free First Analysis
    â”‚ Autopilot scans repo, finds issues, shows what it CAN do
    â”‚ Codebase overview, detected patterns, suggested fixes
    â”‚ "Here's what I found in your repo..."
    â–¼
First Free Run (optional)
    â”‚ Pick one issue â†’ watch Autopilot work â†’ see the PR
    â”‚ Limited: 1 free run to prove value
    â–¼
Upgrade Prompt
    â”‚ "Like what you see? Get unlimited runs"
    â”‚ Shows value delivered, cost of manual equivalent
    â–¼
Checkout (Stripe + Lightning)
    â”‚ Plans: Solo ($49/mo), Team (TBD), Enterprise (TBD)
    â–¼
Dashboard
    â”‚ Unlimited runs, overnight automation
    â–¼
Wake up to PRs
```

## Success Criteria

### Phase 1: Demo Replay Component
- [ ] Replay viewer component in WGPUI (or web fallback)
- [ ] Scrub-able timeline with playback controls
- [ ] Inline diff display (files changed)
- [ ] Tool call visualization (Read, Edit, Bash, etc.)
- [ ] Receipts panel (tests run, exit codes, CI status)
- [ ] Cost + duration + APM display
- [ ] "Skip to outcomes" button

### Phase 2: Replay Publishing Pipeline
- [ ] Promote run: select trajectory for public demo
- [ ] Automated redaction: secrets, PII, internal paths
- [ ] Bundle format: replay data + metadata + preview image
- [ ] CDN hosting for replay bundles
- [ ] Versioning: update demo without breaking old links

### Phase 3: Homepage Integration
- [ ] Embed replay viewer on openagents.com
- [ ] Auto-play on scroll (muted, with captions)
- [ ] Mobile-responsive layout
- [ ] Loading states and error handling
- [ ] A/B test different demo runs

### Phase 4: Repo Connection (FREE - No Payment Required)
- [ ] GitHub OAuth flow
- [ ] Repository picker (user's repos)
- [ ] Permission validation (read/write/PR)
- [ ] Auto-detect language/tooling
- [ ] Connection health check
- [ ] No payment required at this step

### Phase 5: Free First Analysis
- [ ] Scan connected repo on first connection
- [ ] Generate codebase overview (languages, structure, patterns)
- [ ] Detect open issues suitable for Autopilot
- [ ] Show "what Autopilot can do" summary
- [ ] Estimate value: "X issues, ~Y hours of work"
- [ ] Suggested first actions

### Phase 6: Free Trial Run
- [ ] Allow 1 free run to prove value
- [ ] Issue picker or ad-hoc prompt
- [ ] Full Autopilot execution (with limits)
- [ ] Show real results: PR created, tests run
- [ ] "This would have taken X hours manually"

### Phase 7: Upgrade Prompt
- [ ] Show value delivered during free trial
- [ ] Clear pricing comparison
- [ ] Stripe integration (subscription)
- [ ] Lightning payment option
- [ ] Plan selection UI (Solo/Team/Enterprise)
- [ ] Coupon/referral code support
- [ ] Immediate provisioning on success

### Phase 8: Demo Testing
- [ ] CI pipeline renders demo replay headlessly
- [ ] Regression test: demo still works after changes
- [ ] Performance test: demo loads in <3 seconds
- [ ] Accessibility test: captions, keyboard nav

### Phase 9: Analytics + Optimization
- [ ] Track funnel conversion rates
- [ ] Heatmaps on demo interactions
- [ ] A/B test demo length, content, CTA copy
- [ ] Cohort analysis: which demos convert best

## Demo Content Requirements

The demo should show the **complete loop**:

1. **Issue** - Real GitHub issue with description
2. **Claim** - Autopilot posts "I'll take this" comment
3. **Branch** - Creates feature branch
4. **Read** - Explores relevant code
5. **Edit** - Makes the changes
6. **Test** - Runs test suite (green)
7. **Commit** - Clean commit message
8. **PR** - Opens PR with description
9. **CI** - CI passes (shown as receipt)
10. **Merge** - PR gets merged (or: "Ready for review")

Total duration: 90-120 seconds at 2x playback.

## Dogfooding Strategy

Run Autopilot continuously on the OpenAgents repo:

1. **Issue Triage** - Create small, well-scoped issues
2. **Run Autopilot** - Let it claim and work issues
3. **Review PRs** - Human reviews, provides feedback
4. **Promote Winners** - Select best runs for demo

Criteria for demo-worthy runs:
- Clean completion (no crashes)
- Tests passed
- Reasonable duration (<10 min)
- Good narrative arc (problem â†’ solution)
- No embarrassing tool errors

## Technical Specifications

### Replay Bundle Format

```json
{
  "version": "1.0",
  "id": "replay_abc123",
  "created_at": "2025-12-26T10:00:00Z",
  "metadata": {
    "issue_url": "https://github.com/openagentsinc/openagents/issues/42",
    "pr_url": "https://github.com/openagentsinc/openagents/pull/43",
    "duration_seconds": 480,
    "playback_speed": 2.0,
    "demo_duration_seconds": 120,
    "model": "codex-sonnet-4-20250514",
    "cost_usd": 0.42,
    "tokens_in": 150000,
    "tokens_out": 8000
  },
  "timeline": [
    {
      "t": 0,
      "type": "issue_claim",
      "data": { "comment": "I'll take this issue..." }
    },
    {
      "t": 5000,
      "type": "tool_call",
      "tool": "Read",
      "data": { "file": "src/main.rs", "preview": "..." }
    }
  ],
  "receipts": {
    "tests_run": 42,
    "tests_passed": 42,
    "ci_status": "passed",
    "files_changed": 3,
    "lines_added": 45,
    "lines_removed": 12
  }
}
```

### Redaction Rules

Before publishing any replay:

1. **Secrets** - API keys, tokens, passwords, private keys
2. **PII** - Full names, emails, phone numbers
3. **Internal Paths** - Replace `/home/user/...` with `/repo/...`
4. **Sensitive Config** - Database URLs, internal hostnames
5. **Proprietary Code** - Only show OpenAgents code (open source)

Redaction is applied at publish time, not during run.

### CDN Structure

```
cdn.openagents.com/
  demos/
    v1/
      replay_abc123/
        manifest.json
        timeline.json.gz
        diffs/
          0001-main.rs.diff
          0002-config.toml.diff
        preview.png
```

## Dependencies

### External
- Stripe - Payment processing
- GitHub OAuth - Repo connection
- CDN - Replay hosting (Cloudflare R2 or similar)

### Internal Directives
- **d-004** (Autopilot) - Runs the demos, produces trajectories
- **d-008** (Marketplace) - Compute for running tests
- **d-009** (Autopilot GUI) - Replay viewer component
- **d-010** (Unified Binary) - CLI for repo connection

## Testing Strategy

1. **Unit tests** - Replay parser, redaction, bundle generation
2. **Integration tests** - Full replay â†’ publish â†’ fetch cycle
3. **Visual regression** - Demo looks correct across browsers
4. **E2E tests** - Full funnel: demo â†’ checkout â†’ connect â†’ run
5. **Load tests** - Many concurrent demo viewers

## Security Considerations

### Payments
- PCI compliance via Stripe (never store cards)
- Lightning: verify invoice before confirming payment
- Prevent subscription sharing / abuse

### Replay Content
- All demos manually reviewed before publish
- Automated secret scanning on publish
- No customer data in public demos
- Only OpenAgents repo content

### GitHub Integration
- Minimal permissions (read code, write PRs)
- Token storage in secure keychain
- Revocation on account deletion

## Notes

### The Demo is the Product

The demo isn't a separate marketing asset - it's the exact same experience users will have. Watching the demo teaches users what to expect:

- How Autopilot claims issues
- How it reads and understands code
- How it runs tests
- How PRs look when submitted

This reduces surprise and support burden.

### Dogfooding as Marketing

Every issue Autopilot solves on OpenAgents is potential demo content. This creates a virtuous cycle:

1. Autopilot improves itself (d-004)
2. Improvements create demo-worthy runs (d-027)
3. Demos convert customers
4. Revenue funds more development
5. Return to step 1

### First Impressions Matter

The homepage demo is likely the first contact with OpenAgents. It must:

- Load instantly (pre-render, CDN)
- Look professional (production quality)
- Show real value (actual work done)
- Lead naturally to signup

No "lorem ipsum" - only real, verified work.

## Related Directives

- **d-004** (Autopilot Improvement) - Source of demo content
- **d-008** (Marketplace) - Compute for tests in demos
- **d-009** (Autopilot GUI) - Replay viewer component
- **d-010** (Unified Binary) - CLI install + connect

## Implementation Progress (2025-12-26)

### âœ… Completed
- **Phase 1 (Data):** Replay bundle format specification (replay.rs)
- **Phase 2 (Pipeline):** JSONLâ†’JSON conversion with redaction (replay_demo example)
- **Phase 3 (Foundation):** Web-based replay viewer (demo/replay-viewer.html)
- **Infrastructure:** GitHub integration, CI detection, session logging

### ğŸš§ In Progress
- **Phase 1 (UI):** Replay viewer needs diff display, keyboard shortcuts
- **Phase 5:** Free analysis needs issue prioritization and value estimation
- **Phase 6:** Free trial needs usage limits and tracking

### âŒ Not Started
- **Phase 3:** Homepage website and embed integration
- **Phase 7:** Payment infrastructure (Stripe, Lightning)
- **Phase 8:** Comprehensive testing (regression, perf, a11y)
- **Phase 9:** Analytics and A/B testing

**Current Status:** 45% complete - MVP demo pipeline functional, awaiting homepage integration

**See:** `.openagents/d-027-progress.md` for detailed assessment

## Open Questions

1. **Web vs Desktop Demo?** âœ… RESOLVED
   â†’ Web for homepage (demo/replay-viewer.html), desktop GUI later

2. **How often to update demo?**
   â†’ Weekly rotation, keep 3-5 "best of" available

3. **Show pricing before or after demo?**
   â†’ After - let demo sell the value first

4. **Free tier?**
   â†’ TBD - may offer limited free runs for onboarding
