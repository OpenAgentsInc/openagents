{
  "taskId": "oa-574d83",
  "taskTitle": "Integrate HudClient into overnight.ts",
  "subtasks": [
    {
      "id": "oa-574d83-sub-001",
      "description": "Implement: Integrate HudClient into overnight.ts\n\nWire HudClient into the overnight agent to send events and streaming output to HUD.\n\n## File: src/agent/overnight.ts\n\n## Changes\n\n### 1. Import and instantiate HudClient\n```typescript\nimport { HudClient, mapOrchestratorEvent } from \"../hud/index.js\";\n\nconst hudClient = new HudClient();\nhudClient.connect();\n```\n\n### 2. Wrap existing emit() to also send to HUD\n```typescript\nconst emit = (event: OrchestratorEvent) => {\n  logOrchestratorEvent(event);  // Existing logging\n  hudClient.send(mapOrchestratorEvent(event));  // Send to HUD\n};\n```\n\n### 3. Wrap existing onOutput() to also send to HUD\n```typescript\nconst onOutput = (text: string) => {\n  process.stdout.write(text);  // Existing console output\n  hudClient.sendText(text);    // Send to HUD\n};\n```\n\n### 4. Send tool calls (modify claude-code-subagent callback)\nUpdate the tool call logging to also send to HUD:\n```typescript\n// In the tool call logging section\nhudClient.sendToolCall(call.name, call.input);\n```\n\n### 5. Clean up on exit\n```typescript\n// At end of run or in finally block\nhudClient.close();\n```\n\n## Notes\n- HudClient silently fails if HUD not running - overnight.ts continues normally\n- No changes to core orchestrator logic, just wrapping callbacks\n- Agent sends agent_connect on startup, agent_disconnect on shutdown\n\n## Reference\n- Current emit/onOutput wiring in overnight.ts\n- HudClient API from src/hud/client.ts",
      "status": "done",
      "startedAt": "2025-12-03T08:07:55.170Z",
      "claudeCode": {
        "sessionId": "3aadca92-4121-448c-a3fd-a1a012e9d0b2"
      },
      "completedAt": "2025-12-03T08:09:15.726Z"
    }
  ],
  "createdAt": "2025-12-03T08:07:55.170Z",
  "updatedAt": "2025-12-03T08:07:55.170Z"
}