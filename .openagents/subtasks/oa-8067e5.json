{
  "taskId": "oa-8067e5",
  "taskTitle": "Epic: WebSocket Streaming for MechaCoder HUD UI",
  "subtasks": [
    {
      "id": "oa-8067e5-sub-001",
      "description": "Implement: Epic: WebSocket Streaming for MechaCoder HUD UI\n\nConnect MechaCoder agent flow to the HUD UI via WebSocket for real-time updates.\n\n## Goal\nReplace 5-second polling in Electrobun HUD with WebSocket push for:\n- OrchestratorEvents (task_selected, subtask_start, verification_complete, etc.)\n- Claude Code text output (streaming)\n- Tool call JSON\n\n## Architecture\n```\n+------------------------------------------------------------------+\n|                     ELECTROBUN DESKTOP APP                        |\n|  +------------------------------------------------------------+  |\n|  |                   mainview (UI Process)                     |  |\n|  |                                                             |  |\n|  |  +-----------------------+   +-------------------------+    |  |\n|  |  |   Bun.serve()         |   |    SVG Flow HUD         |    |  |\n|  |  |   WebSocket SERVER    |-->|    Real-time updates    |    |  |\n|  |  |   ws://localhost:4242 |   +-------------------------+    |  |\n|  |  +-----------------------+                                  |  |\n|  +------------------------------------------------------------+  |\n+------------------------------------------------------------------+\n               ^ WebSocket Connection(s)\n               |\n+--------------|----------------------------------------------------+\n|   AGENT PROCESS (overnight.ts / do-one-task.ts)                   |\n|              |                                                    |\n|  +---------------------------+                                    |\n|  |  HudClient (WebSocket)    |                                    |\n|  |  - Auto-reconnect         |                                    |\n|  |  - Queue when disconnected|                                    |\n|  +------------|--------------+                                    |\n|               ^                                                   |\n|               |                                                   |\n|  +------------+---------------+    +---------------------------+  |\n|  |   Orchestrator             |--->|   Claude Code Subagent    |  |\n|  |   emit(event) --> HudClient|    |   onOutput --> HudClient  |  |\n|  +----------------------------+    +---------------------------+  |\n+-------------------------------------------------------------------+\n```\n\n## Design Decisions\n- Native WebSocket (not Effect PubSub) - agent has single subscriber\n- Bun.serve() for server - native to Electrobun\n- Silent fail if HUD not running - agent continues working\n- Message queue during reconnect - don't lose events\n- Port 4242 - arbitrary but memorable",
      "status": "done",
      "startedAt": "2025-12-03T08:06:29.198Z",
      "claudeCode": {
        "sessionId": "99a0ec15-33c7-42c2-b47e-5f11a6cecb0c"
      },
      "completedAt": "2025-12-03T08:07:35.737Z"
    }
  ],
  "createdAt": "2025-12-03T07:55:39.151Z",
  "updatedAt": "2025-12-03T07:55:39.151Z"
}