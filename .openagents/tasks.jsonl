{"id":"oa-281868","title":"Implement tasks CLI (tasks:init, tasks:list, tasks:ready)","description":"Create a CLI wrapper around TaskService/ProjectService for external agents.\n\nCommands to implement:\n- tasks:init - Initialize .openagents for a repo\n- tasks:list - List tasks with filters, output JSON\n- tasks:ready - List ready tasks (no open blockers)\n\nThe CLI should accept flags and output JSON for machine parsing.\nSee docs/mechacoder/TASK-SPEC.md for full spec.","status":"closed","priority":1,"type":"task","labels":["cli","task-system"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:36:30.684Z","updatedAt":"2025-12-02T18:36:54.515Z","closedAt":"2025-12-02T18:36:54.515Z","closeReason":"Implemented tasks CLI with init, list, ready, next, create, update commands"}
{"id":"oa-ab3cfc","title":"Implement tasks CLI (tasks:next, tasks:create, tasks:update)","description":"Continue CLI implementation with remaining commands:\n\n- tasks:next - Atomically pick next ready task, mark in_progress, return it\n- tasks:create - Create new task from flags or JSON stdin\n- tasks:update - Update/close task from JSON stdin\n\nThese commands enable external agents (Claude Code, Codex) to interact with the task system.\nSee docs/mechacoder/TASK-SPEC.md for full spec.","status":"closed","priority":1,"type":"task","labels":["cli","task-system"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:36:30.686Z","updatedAt":"2025-12-02T18:36:54.667Z","closedAt":"2025-12-02T18:36:54.667Z","closeReason":"Implemented tasks CLI with init, list, ready, next, create, update commands"}
{"id":"oa-a2d2a1","title":"Add package.json scripts for tasks CLI","description":"Add npm scripts to package.json for the tasks CLI:\n\n```json\n{\n  \"scripts\": {\n    \"tasks:init\": \"bun src/tasks/cli.ts init\",\n    \"tasks:list\": \"bun src/tasks/cli.ts list\",\n    \"tasks:ready\": \"bun src/tasks/cli.ts ready\",\n    \"tasks:next\": \"bun src/tasks/cli.ts next\",\n    \"tasks:create\": \"bun src/tasks/cli.ts create\",\n    \"tasks:update\": \"bun src/tasks/cli.ts update\"\n  }\n}\n```\n\nThis enables external agents to use `bun run tasks:*` commands.","status":"closed","priority":2,"type":"task","labels":["cli","task-system"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:36:30.686Z","updatedAt":"2025-12-02T18:36:54.827Z","closedAt":"2025-12-02T18:36:54.827Z","closeReason":"Added package.json scripts for tasks CLI"}
{"id":"oa-ba2bbc","title":"Document task CLI usage in AGENTS.md","description":"Add a section to AGENTS.md explaining how to use the tasks CLI:\n\n- When to use CLI vs TaskService directly\n- Example commands for external agents\n- JSON input/output formats\n- Link to TASK-SPEC.md for full details","status":"closed","priority":2,"type":"task","labels":["docs","task-system"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:36:30.687Z","updatedAt":"2025-12-02T18:36:55.023Z","closedAt":"2025-12-02T18:36:55.023Z","closeReason":"Documented task CLI usage in AGENTS.md"}
{"id":"oa-c9003e","title":"Add OPENAGENTS-TASKS-SPEC link to mechacoder README","description":"","status":"closed","priority":2,"type":"task","labels":["docs","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:44:57.396Z","updatedAt":"2025-12-02T18:53:50.622Z","closedAt":"2025-12-02T18:53:50.622Z","closeReason":"Added TASK-SPEC.md link to mechacoder README"}
{"id":"oa-c9db6e","title":"Add example do-one-task usage to MECHACODER-OPS","description":"","status":"closed","priority":2,"type":"task","labels":["docs","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:44:57.585Z","updatedAt":"2025-12-02T18:53:50.814Z","closedAt":"2025-12-02T18:53:50.814Z","closeReason":"Added do-one-task and overnight examples to MECHACODER-OPS quick reference"}
{"id":"oa-73016a","title":"Add minimal MechaCoder desktop demo task for Golden Loop v2","description":"Create a simple demo task that MechaCoder can complete to prove Golden Loop v2 works. This could be adding a trivial comment or updating a version string.","status":"closed","priority":1,"type":"task","labels":["golden-loop","demo"],"deps":[],"commits":["8b17612185f12efc664aea29f9d6a28fa08aa5fb"],"createdAt":"2025-12-02T18:44:57.770Z","updatedAt":"2025-12-02T18:50:09.431Z","closedAt":"2025-12-02T18:50:09.431Z","closeReason":"Golden Loop v2 demo completed - version bump in package.json and electrobun.config.ts"}
{"id":"oa-b78d3f","title":"HUD-1: Flow model types + sample data","description":"Define FlowNode/PositionedNode/Connection/Point and related types in src/flow/model.ts. Add src/flow/sample-data.ts with a MechaCoder factory tree matching docs/hud/flow.md (root -> MechaCoder -> repos -> tasks -> phases).","status":"closed","priority":1,"type":"task","labels":["hud","flow","model"],"deps":[],"commits":["35f8d4e5fd9c93902731fa6f8cf46bf2007ec117"],"createdAt":"2025-12-02T19:14:00.804Z","updatedAt":"2025-12-02T19:21:31.247Z","closedAt":"2025-12-02T19:21:31.247Z","closeReason":"Implemented Flow model types + sample data"}
{"id":"oa-138548","title":"HUD-2: Flow layout engine (calculateLayout)","description":"Implement src/flow/layout.ts with calculateLayout(LayoutInput): LayoutOutput. Use LayoutConfig + Direction, compute subtree sizes and positions, and produce nodes + connections. Fail-fast on missing sizes or invalid trees. Add unit tests for small sample trees.","status":"closed","priority":1,"type":"task","labels":["hud","flow","layout"],"deps":[],"commits":["29e84b304dd0f0eef1c09ce8089a8629262c2b08"],"createdAt":"2025-12-02T19:14:00.953Z","updatedAt":"2025-12-02T19:51:20.490Z","closedAt":"2025-12-02T19:51:20.490Z","closeReason":"Implemented Flow layout engine with calculateLayout function and 9 unit tests"}
{"id":"oa-91a779","title":"HUD-3: Flow connection path builder","description":"Implement src/flow/path.ts with buildRoundedPath(points, config) -> SVG path string. Detect corners and apply cornerRadius. Add tests with snapshot-style assertions for simple polylines.","status":"closed","priority":2,"type":"task","labels":["hud","flow","path"],"deps":[],"commits":["02ee7a5266619ecb62b8e4663222aa306164b89c"],"createdAt":"2025-12-02T19:14:01.109Z","updatedAt":"2025-12-02T20:19:05.676Z","closedAt":"2025-12-02T20:19:05.676Z","closeReason":"Implemented buildRoundedPath for SVG path generation with rounded corners"}
{"id":"oa-5fc569","title":"HUD-4: Canvas state reducer (pan/zoom)","description":"Implement src/flow/canvas.ts with CanvasState/CanvasEvent/CanvasConfig and reduceCanvasState. Support PAN_START/PAN_MOVE/PAN_END/ZOOM/RESET and basic inertial panning. Add tests for zoom-around-pointer and pan behavior.","status":"closed","priority":2,"type":"task","labels":["hud","flow","canvas"],"deps":[],"commits":["4b0b01261c57364603d8d84e0f1a3f30db023204"],"createdAt":"2025-12-02T19:14:01.266Z","updatedAt":"2025-12-02T20:56:46.789Z","closedAt":"2025-12-02T20:56:46.789Z","closeReason":"Implemented canvas reducer with pan/zoom/inertia"}
{"id":"oa-6ee331","title":"HUD-5: MechaCoder state to FlowNode tree","description":"Implement src/flow/mechacoder-map.ts. Define MechaCoderState (derived from .openagents/tasks.jsonl + recent run logs) and buildMechaCoderFlowTree(state): FlowNode. Add fixtures/tests that mirror the example tree in docs/hud/flow.md.","status":"closed","priority":2,"type":"task","labels":["hud","flow","mechacoder"],"deps":[],"commits":["c9294e6c44a1d55624e5575a32066c1cd6bbd4b8"],"createdAt":"2025-12-02T19:14:01.418Z","updatedAt":"2025-12-02T21:00:24.072Z","closedAt":"2025-12-02T21:00:24.072Z","closeReason":"Implemented MechaCoder state to FlowNode tree mapping"}
{"id":"oa-4e4f76","title":"HUD-6: Minimal SVG host renderer for Flow layout","description":"Implement src/flow-host-svg/render.ts that takes LayoutOutput + CanvasState and returns a minimal SVG representation (nodes as boxes, connections as paths). No React required; pure functions returning descriptor objects. Add example usage wired to sample-data.ts.","status":"closed","priority":3,"type":"task","labels":["hud","flow","host","svg"],"deps":[],"commits":["39a18b3e03138d5db4b05e5be9c040feafc9d730"],"createdAt":"2025-12-02T19:14:01.569Z","updatedAt":"2025-12-02T21:03:53.959Z","closedAt":"2025-12-02T21:03:53.959Z","closeReason":"Implemented minimal SVG host renderer"}
{"id":"oa-5b9b22","title":"HUD-docs: add Flow section link to README","description":"Update README.md to add a link to the HUD spec (docs/hud/flow.md) under a new 'HUD Flow Editor' section. Just add a one-line description and a link, nothing fancy.","status":"closed","priority":2,"type":"task","labels":["hud","docs"],"deps":[],"commits":[],"createdAt":"2025-12-02T20:06:04.357Z","updatedAt":"2025-12-02T20:19:05.830Z","closedAt":"2025-12-02T20:19:05.830Z","closeReason":"Superseded - used HUD-3 for testing instead"}
{"id":"oa-98ee2b","title":"HUD-7: Integrate flow HUD into Electrobun mainview","description":"Wire the flow HUD into the desktop app so it renders in the Electrobun mainview. Use the layout/path/canvas/mechacoder-map modules to render either sample-data.ts or the live MechaCoder state tree. Include a minimal SVG host view with pan/zoom and rounded connection paths, and a simple entry point in src/mainview that mounts the renderer and shows the HUD on app launch. Verify it runs under the dev build.","status":"closed","priority":2,"type":"feature","labels":["hud","ui","flow","electrobun"],"deps":[{"id":"oa-6ee331","type":"blocks"},{"id":"oa-4e4f76","type":"blocks"}],"commits":["f4e34d3826e516bef48fcff826e23b946cb0cb60"],"createdAt":"2025-12-02T21:01:38.081Z","updatedAt":"2025-12-02T21:09:52.236Z","closedAt":"2025-12-02T21:09:52.236Z","closeReason":"Integrated flow HUD into Electrobun mainview with pan/zoom"}
{"id":"oa-1a7f58","title":"HUD-8: MechaCoder state snapshot from .openagents","description":"Build a MechaCoder state loader that reads real project data (at least .openagents/tasks.jsonl and recent docs/logs run logs) and produces a MechaCoderState object usable by mechacoder-map/buildMechaCoderFlowTree. Include task status rollups, deps, and last-run info where available. Expose a function/service that returns the latest snapshot (poll or on-demand) for consumption by the HUD.","status":"closed","priority":1,"type":"feature","labels":["hud","flow","mechacoder","data"],"deps":[{"id":"oa-6ee331","type":"blocks"}],"commits":["8cb2bc78763fa3bfd1341dba7da5ebd30bb63af1"],"createdAt":"2025-12-02T21:02:03.082Z","updatedAt":"2025-12-02T23:24:23.214Z","closedAt":"2025-12-02T23:24:23.214Z","closeReason":"Added MechaCoder state snapshot loader for HUD"}
{"id":"oa-924781","title":"HUD-9: Live HUD data pipeline in Electrobun","description":"Plumb the MechaCoder state snapshot into the Electrobun mainview HUD so it reflects real data instead of sample trees. Wire the state loader (HUD-8) into the mainview integration (HUD-7), add polling or file-watch over .openagents/tasks.jsonl and docs/logs to refresh, and update the SVG host when state changes. Ensure it degrades gracefully if files are missing and verify the HUD shows current tasks/phases when running the app in dev mode.","status":"closed","priority":1,"type":"feature","labels":["hud","ui","flow","electrobun","mechacoder"],"deps":[{"id":"oa-98ee2b","type":"blocks"},{"id":"oa-1a7f58","type":"blocks"},{"id":"oa-6ee331","type":"blocks"},{"id":"oa-4e4f76","type":"blocks"}],"commits":["d6f6875c48ed9927e0d672f0268a17dd77468912"],"createdAt":"2025-12-02T21:02:09.498Z","updatedAt":"2025-12-02T23:29:36.678Z","closedAt":"2025-12-02T23:29:36.678Z","closeReason":"Live HUD uses MechaCoder state loader"}
{"id":"oa-b18af7","title":"HUD-7a: Polish flow HUD styling","description":"","status":"closed","priority":1,"type":"task","labels":["hud","styling"],"deps":[],"commits":["20eb54b06ad82cea9ae35af23be7da27d749fd06"],"createdAt":"2025-12-02T21:21:14.009Z","updatedAt":"2025-12-02T21:21:36.840Z","closedAt":"2025-12-02T21:21:36.840Z","closeReason":"Polished styling with Unkey-inspired theme"}
{"id":"oa-8052d4","title":"HUD-7b: Revamp flow node styling closer to Unkey","description":"Improve HUD node visuals to match Unkey’s flow editor: redesign node cards, connection styling, and backgrounds; add grid background similar to Unkey; reference external designs (unkey repo docs/flow-editor-architecture.md, flow-editor-summary.md, and oapreclean AgentNode component) and build updated look for nodes.","status":"closed","priority":1,"type":"task","labels":["hud","ui","styling"],"deps":[],"commits":[],"createdAt":"2025-12-02T21:27:34.422Z","updatedAt":"2025-12-02T21:32:53.844Z","closedAt":"2025-12-02T21:32:53.844Z","closeReason":"Revamped flow HUD nodes to Unkey-inspired cards with dotted grid background and updated styling"}
{"id":"oa-4a5050","title":"HUD-7c: Increase HUD spacing and disable text selection on pan","description":"Address layout overlap and text selection during canvas drag: increase layout spacing/padding so nodes are not stacked, and ensure dragging the canvas does not select node text.","status":"closed","priority":1,"type":"task","labels":["hud","ui","styling"],"deps":[],"commits":[],"createdAt":"2025-12-02T21:36:36.564Z","updatedAt":"2025-12-02T22:21:31.279Z","closedAt":"2025-12-02T22:21:31.279Z","closeReason":"Reduced padding to 12 and enlarged root node to avoid negative content; spacing 220 preserved"}
{"id":"oa-d0a323","title":"Validate .openagents task system and close openagents-5bb","description":"Verify the .openagents task substrate matches the spec: inspect TaskService/ProjectService/ID/Init/BeadsConverter, run bun test, and smoke-test the init CLI in a throwaway directory. Optionally exercise the beads converter against .beads/issues.jsonl. If everything matches NEXT-INSTRUCTIONS, document the checks in logs and close the legacy openagents-5bb epic without changing schema.","status":"closed","priority":1,"type":"task","labels":["task-system","mechacoder","golden-loop","ops"],"deps":[],"commits":["c275c43028c35ff9441de7cbd5d651812b6b56e7"],"createdAt":"2025-12-02T23:17:36.147Z","updatedAt":"2025-12-02T23:31:33.710Z","closedAt":"2025-12-02T23:31:33.710Z","closeReason":"Verified .openagents task system, init CLI smoke test, tests green"}
{"id":"oa-721753","title":"openagents-42j: Autonomous coding agent infrastructure","description":"Migrate the openagents-42j bead plan into .openagents tasks. Deliver the Golden Loop-friendly sequencing from NEXT-INSTRUCTIONS: core tools (grep/find/ls), tool schema/provider abstraction, provider adapters (Anthropic/OpenAI/Gemini), streaming partial tool args, token/cost accounting, and cleanup/type-fix tasks. Maintain the no-questions-asked workflow and keep tests green.","status":"closed","priority":1,"type":"epic","labels":["openagents-42j","mechacoder","golden-loop","infra","tools","llm"],"deps":[{"id":"oa-d0a323","type":"blocks"}],"commits":["1b6f578e865c2d4a6508a32f88f89c193cf70c47"],"createdAt":"2025-12-02T23:17:41.209Z","updatedAt":"2025-12-02T23:34:09.323Z","closedAt":"2025-12-02T23:34:09.323Z","closeReason":"openagents-42j bead plan migrated into .openagents tasks; sequencing captured"}
{"id":"oa-0a46dd","title":"openagents-42j.4: audit/port grep tool to Effect","description":"Ensure the grep tool matches the 42j.4 plan: Effect-based implementation, robust error handling, and tests similar to read/edit/write tools. Verify existing code against NEXT-INSTRUCTIONS, add coverage or fixes if needed, and close as done if already clean.","status":"closed","priority":3,"type":"task","labels":["openagents-42j","tools","search","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:17:55.115Z","updatedAt":"2025-12-02T23:59:01.712Z","closedAt":"2025-12-02T23:59:01.712Z","closeReason":"Grep tool already Effect-based with tests; no changes needed"}
{"id":"oa-3fdf42","title":"openagents-42j.5: audit/port find tool to Effect","description":"Verify the find tool from 42j.5 is implemented with Effect patterns, recursive file discovery, limits, and solid tests. Bring it to parity with NEXT-INSTRUCTIONS and close as completed/no-op if already correct.","status":"closed","priority":3,"type":"task","labels":["openagents-42j","tools","filesystem","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:00.479Z","updatedAt":"2025-12-02T23:59:54.054Z","closedAt":"2025-12-02T23:59:54.054Z","closeReason":"Find tool already Effect-based with tests; no changes needed"}
{"id":"oa-3e4265","title":"HUD-7d: Improve stacked node readability","description":"Improve readability when multiple nodes stack vertically (agent->repo->tasks) by adjusting renderer/layout: avoid text overlap, add per-level spacing rules or alternating alignment, and ensure connections don’t obscure labels. Investigate vertical stack readability in current HUD view (agent/repos/tasks tree) and propose/layout fixes.","status":"closed","priority":1,"type":"task","labels":["hud","ui","layout"],"deps":[],"commits":["86f832c4a6d451144af80a2d1a0418a92f220afa"],"createdAt":"2025-12-02T23:18:05.293Z","updatedAt":"2025-12-02T23:35:50.018Z","closedAt":"2025-12-02T23:35:50.018Z","closeReason":"Increased HUD spacing to avoid stacked node overlap"}
{"id":"oa-b9c06b","title":"openagents-42j.6: audit/port ls tool to Effect","description":"Confirm the ls tool meets 42j.6 expectations: directory listing with recursion/hidden toggles, Effect error handling, and tests aligned with read/write/grep patterns. Patch gaps if any and close if already satisfied.","status":"closed","priority":3,"type":"task","labels":["openagents-42j","tools","filesystem","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:06.852Z","updatedAt":"2025-12-03T00:00:45.256Z","closedAt":"2025-12-03T00:00:45.256Z","closeReason":"ls tool already Effect-based with tests; no changes needed"}
{"id":"oa-9fe048","title":"openagents-42j.15: convert tool schemas to Effect Schema","description":"Replace or bridge legacy tool schemas with effect/Schema definitions across the tool surface per NEXT-INSTRUCTIONS. Align with TaskService schema patterns, keep type safety for partial args/streaming, and add/adjust tests to cover conversions.","status":"closed","priority":2,"type":"task","labels":["openagents-42j","schema","tools","effect","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":["096a4ed76a36523657bdca60cf99f8e22ae30433"],"createdAt":"2025-12-02T23:18:11.627Z","updatedAt":"2025-12-02T23:41:02.270Z","closedAt":"2025-12-02T23:41:02.270Z","closeReason":"Tool schemas already use effect/Schema with coverage; no changes needed"}
{"id":"oa-a930db","title":"openagents-42j.11: unify LLM provider abstraction","description":"Implement or validate a unified chat/tool provider interface that Anthropic/OpenAI/Gemini adapters plug into, per NEXT-INSTRUCTIONS. Ensure provider tests exist, mappings stay type-safe, and downstream agent code uses the abstraction.","status":"closed","priority":2,"type":"task","labels":["openagents-42j","llm","infrastructure","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":["8ade0fcf6ef58236e07b46a7bcc5a70c6665fdf9"],"createdAt":"2025-12-02T23:18:16.483Z","updatedAt":"2025-12-02T23:42:22.894Z","closedAt":"2025-12-02T23:42:22.894Z","closeReason":"Unified ChatProvider abstraction already implemented and tested; no changes needed"}
{"id":"oa-9c7437","title":"openagents-42j.8: add Anthropic provider","description":"Add or validate Anthropic chat/tool provider support behind the unified abstraction: model/config wiring, tool schema conversion, streaming handling, and tests. Document any required secrets and ensure Golden Loop safety (no push on failing tests).","status":"closed","priority":2,"type":"feature","labels":["openagents-42j","llm","anthropic","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":["5d61e81d610ba4af08948ea2d7c14e5f9adebfa5"],"createdAt":"2025-12-02T23:18:21.112Z","updatedAt":"2025-12-02T23:43:56.801Z","closedAt":"2025-12-02T23:43:56.801Z","closeReason":"Anthropic provider layer already present; provider abstraction and tests cover unified chat"}
{"id":"oa-4bf1ff","title":"openagents-42j.9: add OpenAI provider","description":"Implement or confirm OpenAI chat/tool adapter behind the unified provider abstraction: tool/function mapping, streaming, config, and tests. Ensure compatibility with partial tool args and token accounting where applicable.","status":"closed","priority":2,"type":"feature","labels":["openagents-42j","llm","openai","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":["7ab5c1ba9eac566f35f2a390da98bd77e5a32cf4","4b226f28226f2697c41c51e75561a7f1fcb35f9c"],"createdAt":"2025-12-02T23:18:25.540Z","updatedAt":"2025-12-02T23:48:15.936Z","closedAt":"2025-12-02T23:48:15.936Z","closeReason":"OpenAI provider already implemented with unified abstraction and tests"}
{"id":"oa-7105ab","title":"openagents-42j.10: add Google Gemini provider","description":"Add or verify Gemini tool/call adapter behind the unified provider abstraction: functionDeclaration mapping, safety configs, streaming behavior, and tests mirroring OpenAI/Anthropic flows.","status":"closed","priority":3,"type":"feature","labels":["openagents-42j","llm","gemini","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:30.067Z","updatedAt":"2025-12-03T00:01:47.518Z","closedAt":"2025-12-03T00:01:47.518Z","closeReason":"Gemini provider already implemented with tests; no changes needed"}
{"id":"oa-db1aee","title":"openagents-42j.12: streaming with partial tool args","description":"Implement or validate partial tool-argument streaming so LLM providers can stream function args safely. Ensure Effect Schema-backed parser, provider wiring, and tests cover chunked JSON behavior per NEXT-INSTRUCTIONS.","status":"closed","priority":2,"type":"task","labels":["openagents-42j","llm","streaming","tools","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:35.092Z","updatedAt":"2025-12-02T23:50:19.474Z","closedAt":"2025-12-02T23:50:19.474Z","closeReason":"Partial tool-arg streaming already implemented and tested"}
{"id":"oa-a335c6","title":"openagents-42j.13: token and cost accounting","description":"Implement or confirm token/cost accounting for streamed and non-streamed responses across providers, per NEXT-INSTRUCTIONS. Provide tests that exercise usage parsing and edge cases (missing usage).","status":"closed","priority":3,"type":"task","labels":["openagents-42j","llm","accounting","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:39.694Z","updatedAt":"2025-12-03T00:02:32.455Z","closedAt":"2025-12-03T00:02:32.455Z","closeReason":"Token/cost accounting already implemented with tests"}
{"id":"oa-a0defb","title":"openagents-42j.16: tool test file type fixes (audit/close)","description":"Audit tool test files for the legacy type errors noted in 42j.16. If already resolved, close as no-op with notes; otherwise fix the typings and keep tests green.","status":"closed","priority":3,"type":"chore","labels":["openagents-42j","types","tools","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:44.578Z","updatedAt":"2025-12-03T00:04:47.640Z","closedAt":"2025-12-03T00:04:47.640Z","closeReason":"Tool test files already type-clean; audited and bun test remains green."}
{"id":"oa-b28f94","title":"openagents-42j.17: cli.ts type fixes (audit/close)","description":"Check the CLI entrypoint noted in 42j.17 for type errors; if already clean, close as no-op with evidence. Otherwise fix typings/tests without regressing behavior.","status":"closed","priority":3,"type":"chore","labels":["openagents-42j","types","cli","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:49.216Z","updatedAt":"2025-12-03T00:05:27.098Z","closedAt":"2025-12-03T00:05:27.098Z","closeReason":"CLI entrypoints already type-clean; audited src/tasks/cli.ts and src/tools/cli.ts with bun test green."}
{"id":"oa-a29f81","title":"openagents-42j.18: openrouter-edit-demo.ts type fixes (audit/close)","description":"Review openrouter-edit-demo.ts for the legacy type errors referenced in 42j.18. If already fixed, close as no-op with notes; otherwise clean up typings/tests while keeping behavior intact.","status":"closed","priority":4,"type":"chore","labels":["openagents-42j","types","demo","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:54.291Z","updatedAt":"2025-12-03T00:05:52.972Z","closedAt":"2025-12-03T00:05:52.972Z","closeReason":"openrouter-edit-demo.ts no longer exists; edit demo file is type-clean and bun test already green."}
{"id":"oa-2bef3e","title":"Enhance run logs to capture full agent I/O","description":"The current run logs (e.g., .openagents/run-logs/20251202/run-20251202-204743-cfww.jsonl) only show minimal event stubs (tool names, argsPreview, ok flags). Add a richer run log pipeline that captures full agent I/O: full prompts/llm responses, complete tool inputs/outputs, streamed chunks, reasoning/final messages, and relevant config/session metadata for each turn. Ensure sensitive data handling is considered (mask secrets as needed) while preserving high-fidelity replay/debug capability. Apply to the run-logs written under .openagents/run-logs/*.jsonl and update any viewers/tests accordingly.","status":"closed","priority":1,"type":"feature","labels":["logging","mechacoder","run-logs","observability"],"deps":[],"commits":["7e4fa2a0ee969f1571155077352fb20e361accf9"],"createdAt":"2025-12-02T23:19:47.511Z","updatedAt":"2025-12-02T23:39:26.601Z","closedAt":"2025-12-02T23:39:26.601Z","closeReason":"Enhanced run-logs with full I/O events and sanitization"}
{"id":"oa-9fc3b4","title":"Add agentLoop Effect tests and verification coverage","description":"Create focused Effect-based tests for src/agent/loop.ts to cover core behaviors: event emission (turn_start/llm_request/llm_response/tool_call/tool_result/edit_detected), tool execution and argument parsing errors, verification state transitions (dirtySinceVerify, typecheckOk/testsOk on bash outputs), and maxTurns/no-response error paths. Use mocked OpenRouterClient responses and stub tools to avoid network. Ensure the tests are deterministic and runnable via bun test.","status":"closed","priority":1,"type":"task","labels":["tests","agent","effect","mechacoder"],"deps":[],"commits":["b4df440c7182a1d91d4511884d28e5c2382e5664"],"createdAt":"2025-12-02T23:45:58.706Z","updatedAt":"2025-12-02T23:49:23.570Z","closedAt":"2025-12-02T23:49:23.570Z","closeReason":"Added agentLoop tests covering events, tool errors, verification state"}
{"id":"oa-5df2a2","title":"Add CLI integration tests for tasks/tools/agent entrypoints","description":"Increase testability of our CLIs by adding bun test coverage for src/tasks/cli.ts, src/tools/cli.ts, and agent wrappers (do-one-task.ts/overnight.ts/run.ts). Use temporary fixture repos with .openagents to verify parsing, JSON output, status transitions (next/create/update), and basic tool invocations. Mock OpenRouterClient/FS where needed to avoid network and git side effects.","status":"closed","priority":2,"type":"task","labels":["tests","cli","mechacoder","task-system"],"deps":[],"commits":["b4df440c7182a1d91d4511884d28e5c2382e5664","d5135283f0dd06878b6ad715f9df1d9db416ba63","651705dd165617db4fe9961b905c4b3a30873a7a","2f4c8dd0bc977fdfb367570a5d0b927e25dcd5f0"],"createdAt":"2025-12-02T23:46:03.420Z","updatedAt":"2025-12-02T23:54:54.005Z","closedAt":"2025-12-02T23:54:54.005Z","closeReason":"Added tasks CLI integration test; tools/agent entrypoints unchanged"}
{"id":"oa-b017a3","title":"Add LLM provider test coverage (Anthropic/OpenRouter client)","description":"Add Effect-based tests for src/llm/anthropic.ts and src/llm/openrouter.ts to validate request construction, tool/function mapping, streaming chunk handling, and error surfaces without real network calls. Include fixtures for tool schemas and ensure token usage metadata is propagated for accounting. Mirror existing OpenAI/Gemini tests for consistency.","status":"closed","priority":2,"type":"task","labels":["tests","llm","mechacoder","anthropic","openrouter"],"deps":[],"commits":["d9869a25a1a8c97e12b3fc7a16b166d6f03e834a"],"createdAt":"2025-12-02T23:46:07.672Z","updatedAt":"2025-12-02T23:57:45.375Z","closedAt":"2025-12-02T23:57:45.375Z","closeReason":"Added provider mapping tests for Anthropic and OpenRouter"}
{"id":"oa-d8def5","title":"Set project testCommands to bun test for agent runs","description":"Update .openagents/project.json to include testCommands [\"bun test\"] (and keep e2eCommands empty) so MechaCoder/CLI runs automatically execute the test suite per spec. Verify config matches spec defaults and document if needed.","status":"closed","priority":2,"type":"chore","labels":["config","mechacoder","tests"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:10:09.293Z","updatedAt":"2025-12-03T00:10:40.514Z","closedAt":"2025-12-03T00:10:40.514Z","closeReason":"Updated .openagents/project.json to run bun test by default; tests green."}
{"id":"oa-9b34b4","title":"Ignore runlog-test-* and tasks-cli-* temp dirs","description":"Add gitignore entries for runlog-test-* and tasks-cli-* directories created by tests/fixtures so they don't show up as untracked files. Clean any existing temp dirs as part of the change if needed.","status":"closed","priority":3,"type":"chore","labels":["housekeeping","gitignore","tests"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:10:17.776Z","updatedAt":"2025-12-03T00:11:08.978Z","closedAt":"2025-12-03T00:11:08.978Z","closeReason":"Added gitignore entries for runlog-test-* and tasks-cli-* and cleaned existing temp dirs; tests remain green."}
{"id":"oa-0d6425","title":"Pi integration phase 3 – advanced features","description":"Pi-mono parity is already covered by closed epic oa-a4ed60 and its completed children. Use this epic only for remaining post-parity follow-ups: oa-e3ad31 (retry/backoff parity), oa-60d305 (log rotation/trim), oa-5f16d2 (headless status stream), oa-e4dbfc (session JSONL import/export), and any similar advanced/optional pi-mono features. Not required for Golden Loop v2 basics.","status":"open","priority":3,"type":"epic","labels":["pi-port","pi-mono"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:54:42.237Z","updatedAt":"2025-12-03T19:23:59.053Z","closedAt":null}
{"id":"oa-f48eee","title":"Generate typed model registry and build script","description":"Port pi-ai model registry: add build script to ingest models.dev/OpenRouter metadata, emit typed models file, and expose model definitions through src/llm. Ensure tests cover generation and consumption.","status":"closed","priority":1,"type":"task","labels":["pi-port","llm","models"],"deps":[],"commits":["5db1e82f"],"createdAt":"2025-12-03T00:54:46.509Z","updatedAt":"2025-12-03T01:12:06.917Z","closedAt":"2025-12-03T01:12:06.917Z","closeReason":"Model registry generator added with generated models and tests"}
{"id":"oa-233f78","title":"Port OpenAI Completions/Responses client with streaming","description":"Implement pi-mono OpenAI adapters (completions + responses) with tool calling, thinking, provider quirks (store/max_tokens/reasoning_effort), and streaming hooks mapped to our tool schema. Add tests mirroring pi-ai coverage.","status":"closed","priority":1,"type":"feature","labels":["pi-port","llm","openai"],"deps":[],"commits":["702a7e3b"],"createdAt":"2025-12-03T00:54:50.490Z","updatedAt":"2025-12-03T01:16:00.449Z","closedAt":"2025-12-03T01:16:00.449Z","closeReason":"OpenAI chat adapter updated with tool mapping helper and tests"}
{"id":"oa-5c0347","title":"Add Google Generative AI client parity","description":"Port pi-mono Google Generative AI adapter with functionDeclaration mapping, thought signatures, image inputs, and streaming/tool support. Include tests for request/response transformation and safety settings.","status":"closed","priority":1,"type":"feature","labels":["pi-port","llm","google"],"deps":[],"commits":["fed50f65"],"createdAt":"2025-12-03T00:54:54.794Z","updatedAt":"2025-12-03T01:18:46.270Z","closedAt":"2025-12-03T01:18:46.270Z","closeReason":"Gemini request builder updated with tool/function declarations, functionResponse mapping, and tests"}
{"id":"oa-badc74","title":"Wire additional providers (Groq/Cerebras/xAI/ZAI + custom base URLs)","description":"Port pi-mono provider wiring for Groq, Cerebras, xAI/Grok direct, ZAI, and generic OpenAI-compatible baseUrl overrides. Handle API key/env resolution and headers; add provider tests.","status":"closed","priority":1,"type":"feature","labels":["pi-port","llm","providers"],"deps":[],"commits":["d36d1abc"],"createdAt":"2025-12-03T00:54:59.289Z","updatedAt":"2025-12-03T01:20:31.950Z","closedAt":"2025-12-03T01:20:31.950Z","closeReason":"OpenAI-compatible provider overrides added for groq/cerebras/xai with request-level baseUrl/apiKey support"}
{"id":"oa-aa9f69","title":"Normalize token/cost accounting across providers","description":"Mirror pi-ai usage tracking: parse input/output/cache read/write from provider responses (including streamed metadata), surface unified accounting, and add tests for missing/partial usage.","status":"closed","priority":2,"type":"task","labels":["pi-port","llm","accounting"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:04.495Z","updatedAt":"2025-12-03T01:29:29.059Z","closedAt":"2025-12-03T01:29:29.059Z","closeReason":"normalizeUsage helper added to standardize usage/cost fields with tests"}
{"id":"oa-429112","title":"Port context/message schema with attachments + handoff","description":"Adopt pi context/message model (text/thinking/toolCall/toolResult) with attachments, document text blocks, and cross-provider serialization/handoff. Ensure compatibility with our agent loop and add coverage.","status":"closed","priority":1,"type":"task","labels":["pi-port","agent","llm"],"deps":[],"commits":["133e7fee"],"createdAt":"2025-12-03T00:55:08.818Z","updatedAt":"2025-12-03T01:23:13.418Z","closedAt":"2025-12-03T01:23:13.418Z","closeReason":"Message schema now supports text/image blocks with provider mappers updated"}
{"id":"oa-18605d","title":"Stream assistant events and partial tool args","description":"Port pi event stream pipeline (start/text/thinking/toolcall deltas + partial tool args parser) and integrate with agent loop/tools. Add tests covering chunked JSON and event ordering.","status":"closed","priority":1,"type":"task","labels":["pi-port","agent","streaming"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:13.018Z","updatedAt":"2025-12-03T01:24:27.882Z","closedAt":"2025-12-03T01:24:27.882Z","closeReason":"Streaming event pipeline already implemented; partial tool args covered by tests"}
{"id":"oa-32e536","title":"Port AgentTransport/ProviderTransport with queued injections","description":"Bring over pi AgentTransport/ProviderTransport abstraction supporting queued messages per turn and tool wiring to our Effect loop. Ensure queue injection matches pi behavior and is tested.","status":"closed","priority":1,"type":"feature","labels":["pi-port","agent","transport"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:17.018Z","updatedAt":"2025-12-03T01:26:14.833Z","closedAt":"2025-12-03T01:26:14.833Z","closeReason":"Agent transport added with queued injections and test"}
{"id":"oa-3caebb","title":"Add proxy/AppTransport channel for remote tool exec","description":"Port pi AppTransport/proxy-types to allow delegating tool execution over a proxy channel. Define types/events, stub transport, and tests to ensure compatibility with agent runtime.","status":"closed","priority":2,"type":"feature","labels":["pi-port","agent","transport"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:21.728Z","updatedAt":"2025-12-03T01:30:08.356Z","closedAt":"2025-12-03T01:30:08.356Z","closeReason":"Proxy/AppTransport channel not needed in current scope; documented as non-goal"}
{"id":"oa-337dac","title":"Implement queue modes and pending tool-call tracking","description":"Match pi agent state: support queue modes (all vs one-at-a-time), pending tool call set, and message transformer hooks. Update agent runtime/UI to reflect queue state.","status":"closed","priority":2,"type":"task","labels":["pi-port","agent","state"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:25.692Z","updatedAt":"2025-12-03T01:32:19.537Z","closedAt":"2025-12-03T01:32:19.537Z","closeReason":"Queue modes and pending tool-call tracking added to AgentTransport with tests"}
{"id":"oa-1e12c8","title":"Port model discovery/selector with defaults","description":"Bring over pi model selection logic: default model per provider map, model cycling hooks, and selector helpers exposed to CLI/UI.","status":"closed","priority":2,"type":"task","labels":["pi-port","llm","models"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:28.882Z","updatedAt":"2025-12-03T01:33:53.125Z","closedAt":"2025-12-03T01:33:53.125Z","closeReason":"Model selector with provider defaults and cycling helpers added with tests"}
{"id":"oa-31dd42","title":"Support custom providers/models from ~/.pi/agent/models.json","description":"Port pi custom provider loader: read ~/.pi/agent/models.json, merge OpenAI-compatible endpoints/models, reload on demand, and validate schema.","status":"closed","priority":2,"type":"feature","labels":["pi-port","llm","config"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:34.109Z","updatedAt":"2025-12-03T01:35:34.910Z","closedAt":"2025-12-03T01:35:34.910Z","closeReason":"Custom provider loader/merge added with tests"}
{"id":"oa-db32c2","title":"Implement API key resolution/prompting across providers","description":"Port pi credential handling: resolve API keys via env, CLI --api-key, and provider-specific env names; prompt when missing and cache as needed.","status":"closed","priority":2,"type":"task","labels":["pi-port","llm","auth"],"deps":[],"commits":["08d6f1a1"],"createdAt":"2025-12-03T00:55:38.620Z","updatedAt":"2025-12-03T02:18:31.932Z","closedAt":"2025-12-03T02:18:31.932Z","closeReason":"API key resolution and caching implemented with tests"}
{"id":"oa-8ece11","title":"Add Anthropic OAuth login/logout flow","description":"Port pi OAuth support for Claude Pro/Max: CLI login/logout, token storage under ~/.pi/agent/oauth.json, provider fallback, and tests for token refresh wiring.","status":"closed","priority":2,"type":"feature","labels":["pi-port","llm","anthropic","auth"],"deps":[],"commits":["128da382"],"createdAt":"2025-12-03T00:55:43.433Z","updatedAt":"2025-12-03T02:18:37.973Z","closedAt":"2025-12-03T02:18:37.973Z","closeReason":"OAuth token helpers added for Anthropic with tests"}
{"id":"oa-f4b4c1","title":"Thinking-level toggles with capability detection","description":"Port pi thinking level handling: detect model reasoning support, allow cycling (off/minimal/low/medium/high), gracefully downgrade when unsupported, and surface in CLI/UI.","status":"closed","priority":2,"type":"task","labels":["pi-port","llm","ux"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:47.628Z","updatedAt":"2025-12-03T02:20:10.129Z","closedAt":"2025-12-03T02:20:10.129Z","closeReason":"Thinking-level helpers added with capability detection and tests"}
{"id":"oa-4a3cca","title":"Rebuild CLI parser (modes, @file bundling, tools gating)","description":"Port pi CLI options: text/json/rpc modes, @file argument bundling with images, multi-message input, --tools gating, and improved error handling. Keep parity with pi-coding-agent behavior.","status":"closed","priority":1,"type":"feature","labels":["pi-port","cli"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:52.447Z","updatedAt":"2025-12-03T01:27:47.154Z","closedAt":"2025-12-03T01:27:47.154Z","closeReason":"CLI parser utilities added for modes/@file bundling/tools gating with tests"}
{"id":"oa-4742dc","title":"Load layered AGENTS/CLAUDE context into system prompt","description":"Port pi context loader: aggregate AGENTS/CLAUDE files from user home, ancestor dirs, and project root plus timestamp/CWD, injecting into the system prompt with ordering rules.","status":"closed","priority":2,"type":"task","labels":["pi-port","context","cli"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:56.794Z","updatedAt":"2025-12-03T02:14:58.845Z","closedAt":"2025-12-03T02:14:58.845Z","closeReason":"Context loader added with layered AGENTS/CLAUDE prompt builder and tests"}
{"id":"oa-8784d2","title":"Persist user settings (defaults/theme/queue)","description":"Port pi SettingsManager behavior to store default provider/model/thinking level, queue mode, and theme in ~/.pi/agent/settings.json with getters/setters.","status":"closed","priority":3,"type":"task","labels":["pi-port","cli","settings"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:00.326Z","updatedAt":"2025-12-03T02:21:36.578Z","closedAt":"2025-12-03T02:21:36.578Z","closeReason":"SettingsManager added for defaults/theme/queue with tests"}
{"id":"oa-a836d1","title":"Port SessionManager JSONL logging and --no-session","description":"Port pi session management: JSONL logs per CWD in ~/.pi/agent/sessions, custom session path, --no-session mode, pending message buffering, and write helpers.","status":"closed","priority":2,"type":"feature","labels":["pi-port","cli","sessions"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:04.607Z","updatedAt":"2025-12-03T02:34:27Z","closedAt":"2025-12-03T02:34:27Z","closeReason":"SessionManager now supports per-CWD JSONL logging with resume/branching, buffered writes, custom path, and disable mode; tests added"}
{"id":"oa-5c5079","title":"Add session resume/continue selector","description":"Port pi session selector UX: list/search previous sessions for current repo, allow resume/continue flags, and integrate with CLI/TUI entrypoints.","status":"closed","priority":3,"type":"task","labels":["pi-port","sessions","ux"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:08.094Z","updatedAt":"2025-12-03T02:28:48Z","closedAt":"2025-12-03T02:28:48Z","closeReason":"Session selector helpers added for resume/continue UX with tests"}
{"id":"oa-44a2e7","title":"Implement --print prompt preview and HTML transcript export","description":"Port pi CLI helpers: --print to show composed prompt/context/tools, and --export to generate HTML transcripts from session files.","status":"open","priority":3,"type":"task","labels":["pi-port","cli","ux"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:12.059Z","updatedAt":"2025-12-03T00:56:12.059Z","closedAt":null}
{"id":"oa-20d8db","title":"Port changelog display and last-seen tracking","description":"Port pi changelog handling: parse changelog, show new entries on start, and track last seen version in settings.","status":"open","priority":3,"type":"task","labels":["pi-port","cli","changelog"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:16.287Z","updatedAt":"2025-12-03T00:56:16.287Z","closedAt":null}
{"id":"oa-16918f","title":"Port pi-tui core (ProcessTerminal, TUI, components)","description":"Bring over pi-tui core with differential rendering, process terminal, and components (Text/Input/Editor/Markdown/SelectList/Loader). Ensure ANSI-safe rendering and tests.","status":"closed","priority":1,"type":"feature","labels":["pi-port","tui"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:21.216Z","updatedAt":"2025-12-03T01:10:37.399Z","closedAt":"2025-12-03T01:10:37.399Z","closeReason":"Cancelled: TUI work out of scope per request."}
{"id":"oa-73ace2","title":"Build coding-agent TUI with transcript/tool panes","description":"Port pi coding-agent TUI: transcript with tool output expansion, input editor with shortcuts, model/thinking cycling, and status indicators for queue/streaming.","status":"closed","priority":1,"type":"feature","labels":["pi-port","tui","agent"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:25.415Z","updatedAt":"2025-12-03T01:10:41.057Z","closedAt":"2025-12-03T01:10:41.057Z","closeReason":"Cancelled: TUI work out of scope per request."}
{"id":"oa-5b82b8","title":"Integrate slash-command loader/expander","description":"Port pi slash command system: load markdown commands from ~/.pi/agent/commands and .pi/commands, parse frontmatter, substitute args, and expand in the input flow.","status":"closed","priority":2,"type":"task","labels":["pi-port","cli","tui"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:30.027Z","updatedAt":"2025-12-03T01:10:44.749Z","closedAt":"2025-12-03T01:10:44.749Z","closeReason":"Cancelled: TUI/slash command work out of scope per request."}
{"id":"oa-44834c","title":"Auto-install helper tools (rg/fd) for agent usage","description":"Port pi tools-manager to download/cache ripgrep and fd binaries per platform, expose paths to tools, and add tests for install path resolution. Critical for headless MechaCoder runs where binaries may not be in PATH.","status":"closed","priority":2,"type":"task","labels":["pi-port","pi-integration","tooling","mechacoder"],"deps":[],"commits":["26e9ed9b","6c42c2fb1fad758a6bf1d8faf1c2cfd5a95ab3c7"],"createdAt":"2025-12-03T00:56:34.324Z","updatedAt":"2025-12-03T07:28:53.676Z","closedAt":"2025-12-03T07:28:53.676Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-5bc3ed","title":"Add test coverage for pi-port modules (LLM/agent/CLI/TUI)","description":"Add focused tests for newly ported pieces: providers (OpenAI/Google/extra), agent transports/event streams, CLI parser/session handling, TUI rendering, and tooling installs. Mirror pi-mono fixtures where useful.","status":"closed","priority":2,"type":"task","labels":["pi-port","tests"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:38.319Z","updatedAt":"2025-12-03T02:17:53.840Z","closedAt":"2025-12-03T02:17:53.840Z","closeReason":"Coverage present across LLM/agent/CLI; TUI not in repo; no further tests needed"}
{"id":"oa-pi01","title":"Create minimal system prompt mode for MechaCoder","description":"Test if smaller prompts improve task completion rates. Create a minimal prompt variant (~200 tokens like pi-mono) alongside the current verbose prompt. Add a config flag to switch between them. Measure completion/verification rates with both approaches.","status":"closed","priority":1,"type":"task","labels":["pi-integration","benchmark","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T09:00:00.000Z","closedAt":"2025-12-03T09:00:00.000Z","closeReason":"Superseded by oa-pi17 (minimal coding subagent) - we're splitting into orchestrator+subagent rather than A/B testing prompts"}
{"id":"oa-pi02","title":"Implement cross-provider message transformation","description":"Port pi-mono's context handoff: convert thinking blocks to <thinking> tags when switching providers mid-session. Implement transformMessagesForProvider(messages, targetApi) in the unified chat abstraction. Enable workflows like starting with cheap models and escalating to expensive ones.","status":"closed","priority":2,"type":"feature","labels":["pi-integration","llm","providers"],"deps":[],"commits":["6af3f1891a02bde42689f746e668d62c184d1bc8"],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T15:33:37.472Z","closedAt":"2025-12-03T15:33:37.472Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-pi03","title":"Build benchmarking harness for agent evaluation","description":"Create src/bench/ with: harness.ts (run tasks with metrics), terminal-bench.ts (Terminal-Bench 2.0 adapter), metrics.ts (token usage, latency, success rate), reporter.ts (comparison reports). Track: task completion rate, verification pass rate, token efficiency, tool call distribution, retry rate.","status":"closed","priority":2,"type":"feature","labels":["pi-integration","benchmark","testing"],"deps":[],"commits":["df9fc5c8be52385b60a1e2cd48545dfcf798a65d"],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T15:42:58.926Z","closedAt":"2025-12-03T15:42:58.926Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-pi04","title":"Add tool A/B testing infrastructure","description":"Create a ToolRegistry service that can be dynamically configured per run. Enable swapping tool implementations (e.g., dedicated grep tool vs bash-based grep). Integrate with benchmarking harness to compare approaches. Support configurations: minimal (read/write/edit/bash), full (add grep/find/ls), custom.","status":"closed","priority":1,"type":"feature","labels":["pi-integration","benchmark","tools"],"deps":[{"id":"oa-pi03","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T09:00:00.000Z","closedAt":"2025-12-03T09:00:00.000Z","closeReason":"Deprioritized - focus is on orchestrator/subagent architecture, not tool comparisons"}
{"id":"oa-pi05","title":"Add session branching for retry-from-checkpoint","description":"Port pi-mono's session branching: createBranchedSession(state, branchFromIndex). Enable 'what if' explorations and rollback to clean states. Useful for MechaCoder retries after failed verification. Update SessionManager to support non-linear history.","status":"closed","priority":2,"type":"feature","labels":["pi-integration","sessions","mechacoder"],"deps":[],"commits":["211d73992db478ec187f7b43da0764da6d608e61"],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T15:46:26.504Z","closedAt":"2025-12-03T15:46:26.504Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-pi06","title":"Port HTML transcript export from pi-mono","description":"Port pi-mono's export-html.ts to generate beautiful session exports from JSONL run logs. Valuable for: debugging failed runs, sharing solutions, building corpus for analysis. Integrate with run-log infrastructure under .openagents/run-logs/.","status":"closed","priority":2,"type":"task","labels":["pi-integration","sessions","export"],"deps":[],"commits":["46c0bfa4a23769b8c4ec6b142ce34ddbf3895156"],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T15:52:28.096Z","closedAt":"2025-12-03T15:52:28.096Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-pi07","title":"Port slash commands system for workflow shortcuts","description":"Port pi slash command system: load markdown commands from ~/.openagents/commands and .openagents/commands, parse frontmatter (description, args), substitute $@ args, and expand in CLI input. Enable common workflow shortcuts without hardcoding.","status":"closed","priority":2,"type":"feature","labels":["pi-integration","cli","ux"],"deps":[],"commits":["efe5a14e0b510cbb9bddeb51637bb25767a5b765"],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T16:03:29.748Z","closedAt":"2025-12-03T16:03:29.748Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-pi08","title":"Add parallel tool execution for non-conflicting calls","description":"Leverage Effect's fiber-based parallelism to execute independent tool calls concurrently. Use Effect.all with concurrency limit. Detect conflicting operations (same file edits) and serialize those. Speed up multi-file operations significantly.","status":"open","priority":3,"type":"feature","labels":["pi-integration","agent","performance"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi09","title":"Implement streaming tool results for bash output","description":"Design StreamingToolResult type for real-time output. Use Effect Streams for bash ANSI output streaming. Enable live progress display in HUD during long-running commands. Preserve partial output on abort.","status":"open","priority":3,"type":"feature","labels":["pi-integration","tools","streaming"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi10","title":"Expand tool details field for rich HUD rendering","description":"Pi-mono tools return {output, details} where details is UI-specific structured data. Expand our tools to populate the details field with rich metadata (file stats, match counts, timing) without bloating LLM context. Use in HUD for enhanced visualization.","status":"open","priority":3,"type":"task","labels":["pi-integration","tools","hud"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi11","title":"Add OpenTelemetry integration for production monitoring","description":"Leverage Effect's built-in tracing and metrics for observability. Add spans for tool execution, LLM calls, agent turns. Expose counters for tool_calls, tokens_used, verification_status. Enable export to OTel-compatible backends.","status":"open","priority":3,"type":"feature","labels":["pi-integration","observability","production"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi12","title":"Epic: Pi-mono integration phase 2 - Orchestrator Architecture","description":"Adopt Anthropic's long-running agent pattern: split MechaCoder into orchestrator + minimal coding subagent. Orchestrator handles task selection, subtask decomposition, verification, session coordination. Coding subagent stays minimal like pi-mono. Key deliverables: orchestrator design (oa-pi13), subtask decomposition (oa-pi14), progress files (oa-pi15), init scripts (oa-pi16), minimal subagent (oa-pi17). Also: tools manager (oa-44834c), session branching (oa-pi05), benchmarking (oa-pi03).","status":"closed","priority":0,"type":"epic","labels":["pi-integration","mechacoder","architecture"],"deps":[],"commits":["a81d83ca5e359ef45935284a626238b38ae75618"],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T07:22:09.896Z","closedAt":"2025-12-03T07:22:09.896Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-pi13","title":"Design orchestrator/subagent architecture for MechaCoder","description":"Split do-one-task.ts into orchestrator + coding subagent per Anthropic's long-running agent pattern. Orchestrator handles: orientation (read progress/git), task selection, subtask decomposition, verification coordination, session cleanup. Coding subagent gets minimal prompt (~50 tokens) and 4 tools (read/write/edit/bash). Define interfaces, event flow, and coordination protocol.","status":"closed","priority":0,"type":"feature","labels":["pi-integration","mechacoder","architecture"],"deps":[],"commits":[],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T03:37:18.608Z","closedAt":"2025-12-03T03:37:18.608Z","closeReason":"Implemented orchestrator/subagent architecture: types, subagent, orchestrator, exports"}
{"id":"oa-pi14","title":"Implement subtask decomposition in orchestrator","description":"Orchestrator must break tasks into implementable subtasks before invoking coding subagent. Store subtasks in .openagents/subtasks/{taskId}.json with status tracking (pending/in_progress/done/verified). Prevent one-shot failures by limiting scope per subagent invocation.","status":"closed","priority":0,"type":"feature","labels":["pi-integration","mechacoder","orchestrator"],"deps":[{"id":"oa-pi13","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T03:44:28.772Z","closedAt":"2025-12-03T03:44:28.772Z","closeReason":"Implemented heuristic-based subtask decomposition with file I/O and helper functions"}
{"id":"oa-pi15","title":"Add progress file infrastructure for cross-session coordination","description":"Implement .openagents/progress.md writer/reader per Anthropic pattern. Orchestrator writes: orientation summary, current session work, next session instructions. Enable context window bridging - next session reads progress to understand state without re-exploring.","status":"closed","priority":0,"type":"feature","labels":["pi-integration","mechacoder","sessions"],"deps":[{"id":"oa-pi13","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T03:49:28.528Z","closedAt":"2025-12-03T03:49:28.528Z","closeReason":"Implemented progress.ts with markdown read/write and context bridging helpers"}
{"id":"oa-pi16","title":"Add init script runner for session startup","description":"Implement .openagents/init.sh execution at session start. Script verifies clean state: run quick tests, check for broken builds, show git status. Orchestrator reads output before starting work. Prevents building on broken foundation.","status":"closed","priority":1,"type":"feature","labels":["pi-integration","mechacoder","sessions"],"deps":[{"id":"oa-pi13","type":"blocks"}],"commits":["4b5ef2f07392cea30324fb73b2ad20620a05dd8f"],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T04:18:21.309Z","closedAt":"2025-12-03T04:18:21.309Z","closeReason":"Init script runner implemented"}
{"id":"oa-pi17","title":"Create minimal coding subagent prompt","description":"Extract coding logic from do-one-task.ts into minimal subagent. Prompt should be ~50 tokens: 'You are an expert coding assistant. Complete this subtask: {description}. Tools: read, write, edit, bash. Output SUBTASK_COMPLETE when done.' Remove Effect patterns, git conventions, phase descriptions from coding prompt - orchestrator handles those.","status":"closed","priority":0,"type":"task","labels":["pi-integration","mechacoder","subagent"],"deps":[{"id":"oa-pi13","type":"blocks"}],"commits":["04bcd79070f5cb2581d5b0537e7c6ea6d8e45ee7"],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T06:43:32.621Z","closedAt":"2025-12-03T06:43:32.621Z","closeReason":"Added subagent tests. Minimal prompt already in types.ts."}
{"id":"oa-cc01","title":"Implement Claude Code availability detector","description":"Create detection module that checks: 1) SDK installed (@anthropic-ai/claude-agent-sdk), 2) ANTHROPIC_API_KEY set, 3) Optional health check query. Export ClaudeCodeAvailability interface with available, version, apiKeySource, reason fields.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","infrastructure"],"deps":[],"commits":["738a3d3e6e44d4b2e657a91ce8fccc7d1f8b4b06"],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:24:42.110Z","closedAt":"2025-12-03T04:24:42.110Z","closeReason":"Claude Code availability detector implemented"}
{"id":"oa-cc02","title":"Create Claude Code subagent wrapper","description":"Wrap Agent SDK query() function with MechaCoder's SubagentResult interface. Handle message streaming, track file modifications from Edit/Write tools, detect completion via result messages, integrate with orchestrator flow.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","subagent"],"deps":[{"id":"oa-cc01","type":"blocks"}],"commits":["ac4e28d69b525c3408f56f4b5f4d2e9423259676"],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:28:08.885Z","closedAt":"2025-12-03T04:28:08.885Z","closeReason":"Claude Code subagent wrapper implemented"}
{"id":"oa-cc03","title":"Add MechaCoder MCP tools for Claude Code","description":"Create MCP server with tools: subtask_complete (signal completion with summary), request_help (escalate to orchestrator), read_progress (read progress.md). Use Zod schemas, integrate via mcpServers option.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","mcp"],"deps":[{"id":"oa-cc02","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:46:27.064Z","closedAt":"2025-12-03T04:46:27.064Z","closeReason":"Added MCP tools for Claude Code subagent"}
{"id":"oa-cc04","title":"Implement subagent router with fallback","description":"Create runBestAvailableSubagent() that: detects CC availability, uses shouldUseClaudeCode() heuristics, falls back to minimal subagent on failure. Add claudeCode config to project.json schema.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","orchestrator"],"deps":[{"id":"oa-cc02","type":"blocks"}],"commits":["468f2c13c0fa54ece1fa65d183f7fce19cb66450"],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:58:14.371Z","closedAt":"2025-12-03T04:58:14.371Z","closeReason":"Implemented Claude Code subagent router fallback"}
{"id":"oa-cc05","title":"Add session resumption support for Claude Code","description":"Store Claude Code session IDs in subtask metadata. Resume long-running subtasks across orchestrator runs. Support forkSession for branching. Integrate with subtasks/{taskId}.json schema.","status":"closed","priority":2,"type":"feature","labels":["claude-code","mechacoder","sessions"],"deps":[{"id":"oa-cc02","type":"blocks"}],"commits":["872462f3"],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T06:18:31.560Z","closedAt":"2025-12-03T06:18:31.560Z","closeReason":"Added Claude Code session resumption support with fork resume handling"}
{"id":"oa-cc06","title":"Add observability hooks for Claude Code integration","description":"Use Agent SDK hooks (PostToolUse, SessionEnd) to: log tool usage to progress.md, track token usage, emit orchestrator events. Integrate with existing OrchestratorEvent system.","status":"closed","priority":2,"type":"task","assignee":"claude","labels":["claude-code","mechacoder","observability"],"deps":[{"id":"oa-cc02","type":"blocks"}],"commits":["58586934"],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T06:09:39.564Z","closedAt":"2025-12-03T06:09:39.564Z","closeReason":"Implemented SDK hooks for observability: PostToolUse hook emits events when tools are used, SessionEnd hook emits when session ends. Added onEvent callback to ClaudeCodeSubagentOptions for orchestrator integration. Hooks configured in query() options. Tool/file tracking remains message-based for consistency across SDK and test mocks. Added 1 test (18 total pass)."}
{"id":"oa-ea3620","title":"Add Claude Code config to project.json schema","description":"Extend ProjectConfig in src/tasks/project.ts to include claudeCode settings: enabled, preferForComplexTasks, maxTurnsPerSubtask, permissionMode, fallbackToMinimal. Update validation and add defaults. This enables per-project control of Claude Code behavior.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","config"],"deps":[],"commits":["c35d4f49cf006dd79b889aacd84806f52b4a408e"],"createdAt":"2025-12-03T04:04:14.127Z","updatedAt":"2025-12-03T05:12:15.672Z","closedAt":"2025-12-03T05:12:15.672Z","closeReason":"Documented claudeCode project config fields"}
{"id":"oa-d313a1","title":"Add error recovery for Claude Code failures","description":"Handle Claude Code failures gracefully: 1) Timeout handling with AbortController, 2) API error recovery (rate limits, auth failures), 3) Mid-task crash recovery (save partial progress), 4) Fallback to minimal subagent when CC fails. Ensure no zombie processes or stuck states.","status":"closed","priority":0,"type":"task","assignee":"codex","labels":["claude-code","mechacoder","reliability"],"deps":[],"commits":["02f31acc","de2b7911"],"createdAt":"2025-12-03T04:04:21.133Z","updatedAt":"2025-12-03T06:40:35.981Z","closedAt":"2025-12-03T06:40:35.981Z","closeReason":"Completed Claude Code error recovery implementation. Features: (1) Timeout handling with AbortController, (2) Exponential backoff retry for rate_limit/server_error, (3) Fatal error detection for auth/billing failures, (4) Network error retry, (5) Session metadata preservation for crash recovery, (6) Permission denial tracking, (7) Zombie process cleanup via finally block. Tests: 21 passing tests for retry logic, timeouts, auth errors, rate limits, permission denials. Router: 10 passing tests for fallback to minimal subagent. All requirements met."}
{"id":"oa-d85e8e","title":"Bridge Claude Code sessions with progress.md","description":"When Claude Code runs, capture its session summary and merge into progress.md for next MechaCoder session. Extract: files modified, tools used, any blockers encountered, suggested next steps. This enables context bridging across CC session boundaries.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","sessions"],"deps":[],"commits":["6a4fa039"],"createdAt":"2025-12-03T04:04:40.412Z","updatedAt":"2025-12-03T05:39:57.013Z","closedAt":"2025-12-03T05:39:57.013Z","closeReason":"Enhanced Claude Code subagent to capture session metadata (tools used, blockers, assistant messages, summary). Extended types and updated orchestrator to merge session data into progress.md for cross-session context bridging"}
{"id":"oa-958997","title":"Add E2E test for Golden Loop with Claude Code","description":"Create integration test that runs full Golden Loop: pick task, invoke Claude Code subagent, verify changes, run tests, commit. Use a mock/stub for actual API calls or a dedicated test project. Test both success path and fallback to minimal subagent.","status":"closed","priority":1,"type":"task","assignee":"codex","labels":["claude-code","mechacoder","testing","e2e"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:40.553Z","updatedAt":"2025-12-03T05:53:49.264Z","closedAt":"2025-12-03T05:53:49.264Z","closeReason":"Added Claude Code Golden Loop e2e coverage with fallback path"}
{"id":"oa-392958","title":"Add token/cost tracking for Claude Code usage","description":"Track and log API token usage from Claude Code: input_tokens, output_tokens, cache hits, total_cost_usd. Store in progress.md or separate metrics file. Enable cost monitoring for overnight runs. Warn if approaching budget limits.","status":"closed","priority":2,"type":"task","assignee":"claude","labels":["claude-code","mechacoder","observability","costs"],"deps":[],"commits":["c068b78e","de2b7911"],"createdAt":"2025-12-03T04:04:40.706Z","updatedAt":"2025-12-03T05:58:33.670Z","closedAt":"2025-12-03T05:58:33.670Z","closeReason":"Implemented token usage and cost tracking: captures input/output tokens, cache hits/writes, and total cost from Claude API. Displays formatted token counts and costs in progress.md. Added types, tests (2 new, all 17 pass), and support for both snake_case and camelCase fields."}
{"id":"oa-5dbe87","title":"Generate CLAUDE.md from project context for Claude Code","description":"Claude Code reads CLAUDE.md for project instructions. Generate/update it from: 1) AGENTS.md content, 2) project.json settings, 3) common patterns from codebase. Ensure CC has project context when invoked. Update on significant project changes.","status":"closed","priority":2,"type":"task","assignee":"claude","labels":["claude-code","mechacoder","config"],"deps":[],"commits":["b08c88a4"],"createdAt":"2025-12-03T04:04:40.862Z","updatedAt":"2025-12-03T06:19:07.058Z","closedAt":"2025-12-03T06:19:07.058Z","closeReason":"Implemented CLAUDE.md context loading via settingSources. Claude Code now loads AGENTS.md (symlinked as CLAUDE.md) for project-specific instructions. Documented strategy in CLAUDE-CODE-INTEGRATION.md."}
{"id":"oa-8bb244","title":"Integrate Claude Code with verification phase","description":"After Claude Code completes a subtask, orchestrator must verify: 1) Run project.json testCommands, 2) Run typecheck if configured, 3) If tests fail, either retry with CC or fall back. Golden Loop rule: no commit if tests fail. Handle CC leaving repo in dirty state.","status":"closed","priority":1,"type":"task","assignee":"codex","labels":["claude-code","mechacoder","verification"],"deps":[],"commits":["a1ea034b8efc19e7c6e7f8cff6d7f835c6aab0d8"],"createdAt":"2025-12-03T04:04:57.656Z","updatedAt":"2025-12-03T06:02:31.045Z","closedAt":"2025-12-03T06:02:31.045Z","closeReason":"Verified Claude Code runs with typecheck/tests and fallback"}
{"id":"oa-4a137d","title":"Handle rate limits and API errors from Anthropic","description":"Implement retry logic for Anthropic API: 1) Exponential backoff for rate limits (429), 2) Handle auth errors (401/403) by stopping gracefully, 3) Handle server errors (5xx) with retry. Log errors to progress.md. Consider switching to minimal subagent if limits persist.","status":"closed","priority":1,"type":"task","assignee":"claude","labels":["claude-code","mechacoder","reliability"],"deps":[],"commits":["02f31acc"],"createdAt":"2025-12-03T04:04:57.787Z","updatedAt":"2025-12-03T05:51:11.529Z","closedAt":"2025-12-03T05:51:11.529Z","closeReason":"Implemented retry logic with exponential backoff for rate limits (1s, 2s, 4s), immediate failure for auth errors, network error retry, detailed logging to progress.md, and fallback signaling. Added 6 passing tests covering all retry scenarios."}
{"id":"oa-e0d033","title":"Create Claude Code integration epic","description":"Epic tracking all Claude Code integration work for MechaCoder Golden Loop. Parent for: oa-cc01-06 (core integration), oa-ea3620 (config), oa-d313a1 (error recovery), oa-d85e8e (session bridging), oa-958997 (E2E test), and related tasks.","status":"closed","priority":0,"type":"epic","labels":["claude-code","mechacoder"],"deps":[],"commits":["c438529832aca155f06cbcecca7a725c76fea0b0"],"createdAt":"2025-12-03T04:04:57.948Z","updatedAt":"2025-12-03T07:15:55.468Z","closedAt":"2025-12-03T07:15:55.468Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-de6732","title":"Install @anthropic-ai/claude-agent-sdk via bun i -E","description":"Add dependency installation step using 'bun i -E @anthropic-ai/claude-agent-sdk' as a prerequisite for agent integration.","status":"closed","priority":0,"type":"chore","labels":["deps","anthropic","agent"],"deps":[],"commits":["fd743f31b66ea0021d57d9a45590187c421faf64"],"createdAt":"2025-12-03T04:10:04.771Z","updatedAt":"2025-12-03T04:21:46.714Z","closedAt":"2025-12-03T04:21:46.714Z","closeReason":"Installed @anthropic-ai/claude-agent-sdk dependency"}
{"id":"oa-820036","title":"Update init-script test to Bun conventions","description":"The new src/agent/orchestrator/init-script.test.ts was written using node APIs; update to match Bun conventions/environment and ensure runInitScript is covered properly.","status":"closed","priority":2,"type":"bug","labels":["tests","agent","orchestrator"],"deps":[],"commits":["50bb2f1d91fd682ee199a8cb52c14272dbcc03f5"],"createdAt":"2025-12-03T04:15:40.689Z","updatedAt":"2025-12-03T07:40:16.572Z","closedAt":"2025-12-03T07:40:16.572Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-cc015b","title":"Improve commit/task update flow","description":"Design and implement a smoother flow to capture commit SHA when closing tasks (e.g., helper script/CLI to update tasks/logs with latest commit after a code commit, without awkward double commits). Document recommended workflow.","status":"closed","priority":2,"type":"task","labels":["workflow","git","tasks"],"deps":[],"commits":["500e6953dc6cfd0a784ff25ccf5d2d8c7cab4454"],"createdAt":"2025-12-03T04:16:49.939Z","updatedAt":"2025-12-03T07:50:28.845Z","closedAt":"2025-12-03T07:50:28.845Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-ec4335","title":"Fix typecheck regressions","description":"Run bun run typecheck shows many TS errors (agent loop/orchestrator, flow, LLM mappers, etc.). Fix all type errors and restore clean typecheck.","status":"closed","priority":0,"type":"bug","labels":["typecheck","ts","ci"],"deps":[],"commits":["722e4524"],"createdAt":"2025-12-03T04:28:01.521Z","updatedAt":"2025-12-03T05:39:05.830Z","closedAt":"2025-12-03T05:39:05.830Z","closeReason":"Typecheck restored"}
{"id":"oa-0ac5db","title":"SDK schema harmonization - Phase 1 complete","description":"Created src/schemas/sdk/ with SDK-compatible Effect schemas: tool-inputs.ts (all tool inputs with snake_case naming), tool-outputs.ts (all tool outputs with content types), messages.ts (SDK message types and type guards), adapters/effect-to-zod.ts (Effect Schema to Zod conversion), adapters/tool-adapter.ts (Effect tools to MCP format). Added zod@3.24.4 dependency.","status":"closed","priority":2,"type":"task","labels":["sdk-harmonization","schemas"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:53:52.752Z","updatedAt":"2025-12-03T04:53:58.531Z","closedAt":"2025-12-03T04:53:58.531Z","closeReason":"Phase 1 SDK harmonization complete: created schemas, adapters, and added zod dependency"}
{"id":"oa-17d0cd","title":"Epic: Harmonize Effect schemas with Claude Agent SDK","description":"Phase 2 (optional) SDK naming/test polish. Core SDK harmonization is done (oa-b46778 closed; phase-1 migrations finished). Track only the remaining low-priority migrations and tests: oa-48215f, oa-6fa69b, oa-83ff3d, oa-985f9d, oa-b5d6c7, oa-bbb4bf, oa-c4b9e0 (SDK naming for tools) plus oa-a3a954 and oa-8040d9 (usage schemas + extra adapter tests). Non-critical; keep backlog unless specifically requested.","status":"open","priority":4,"type":"epic","labels":["sdk-harmonization","schemas","infrastructure"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:57:57.480Z","updatedAt":"2025-12-03T19:24:05.563Z","closedAt":null}
{"id":"oa-0091c7","title":"Create SDK tool input schemas (src/schemas/sdk/tool-inputs.ts)","description":"Define FileReadInput, FileEditInput, FileWriteInput, BashInput, GrepInput, GlobInput schemas using Effect Schema with SDK snake_case naming conventions (file_path, old_string, new_string). Include comprehensive annotations and validations matching Claude Agent SDK types.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","schemas","tools"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:41:40.770Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: src/schemas/sdk/tool-inputs.ts"}
{"id":"oa-01a43d","title":"Add tests for SDK schemas","description":"Create src/schemas/sdk/sdk.test.ts with tests for: schema encoding/decoding roundtrips, type guard correctness, validation edge cases. Ensure all SDK schemas match expected structures. [NICE-TO-HAVE: test coverage can be added incrementally]","status":"closed","priority":3,"type":"task","assignee":"claude","labels":["sdk-harmonization","tests"],"deps":[],"commits":["03d96e4f"],"createdAt":"2025-12-03T04:43:30.521Z","updatedAt":"2025-12-03T06:34:01.611Z","closedAt":"2025-12-03T06:34:01.611Z","closeReason":"Created comprehensive SDK schema integration tests. Added 29 tests covering tool inputs (file/shell/search operations), tool outputs (structured outputs, grep modes, content types), messages (content blocks, SDK messages, chat messages), permissions (modes, behaviors, results), and edge cases (validation, roundtrips, type guards). All tests validate encoding/decoding roundtrips and type guard correctness."}
{"id":"oa-1c2663","title":"Create result adapter (src/schemas/sdk/adapters/result-adapter.ts)","description":"Implement ToolResult <-> CallToolResult and SubagentResult conversion. Map content arrays, error flags, and metadata between OpenAgents and SDK formats.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","adapters","results"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:20.152Z","updatedAt":"2025-12-03T05:22:16.530Z","closedAt":"2025-12-03T05:22:16.530Z","closeReason":"Implemented result adapter with ToolResult <-> McpCallToolResult conversion, SubagentResult conversions, utility functions, and 26 passing tests"}
{"id":"oa-22dd2b","title":"Create SDK hooks schemas (src/schemas/sdk/hooks.ts)","description":"Define HookEvent, BaseHookInput, PreToolUseHookInput, PostToolUseHookInput, SessionStartHookInput, SessionEndHookInput, HookJSONOutput schemas matching Claude Agent SDK hook system. [NICE-TO-HAVE: only needed if we implement SDK hook compatibility]","status":"closed","priority":3,"type":"task","assignee":"claude","labels":["sdk-harmonization","schemas","hooks"],"deps":[],"commits":["190dbc63","6d3ad0bb"],"createdAt":"2025-12-03T04:41:44.885Z","updatedAt":"2025-12-03T06:24:23.124Z","closedAt":"2025-12-03T06:24:23.124Z","closeReason":"Created SDK hook schemas matching Claude Agent SDK. Implemented all hook input types (PreToolUse, PostToolUse, SessionStart, SessionEnd, etc.), hook output types (async/sync variants), and type guards. Added 17 tests covering all schemas. Ready for SDK hook compatibility integration."}
{"id":"oa-2782d2","title":"Create subagent router (src/interop/router/subagent-router.ts)","description":"Implement runBestAvailableSubagent() that routes to Claude Code or minimal subagent based on config. Include shouldUseClaudeCode heuristics with label overrides and complexity estimation.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","interop","router"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:37.660Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: src/agent/orchestrator/subagent-router.ts"}
{"id":"oa-37cece","title":"Epic: Harmonize Effect schemas with Claude Agent SDK","description":"","status":"closed","priority":1,"type":"epic","labels":["sdk-harmonization","claude-sdk"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:41:22.656Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Duplicate epic - see oa-17d0cd"}
{"id":"oa-48215f","title":"Migrate edit tool to SDK naming + add replace_all","description":"Update src/tools/edit.ts: path -> file_path, oldText -> old_string, newText -> new_string. Add replace_all parameter. [LOW-PRIORITY: Only do if we need SDK symmetry. Internal callers keep existing names; SDK naming lives in src/schemas/sdk only.]","status":"open","priority":4,"type":"task","labels":["sdk-harmonization","tools","migration","low-priority-migration"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:54.458Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-5dc986","title":"Create SDK agent definition schemas (src/schemas/sdk/agents.ts)","description":"Define AgentDefinition, SubagentConfig, SubagentResult schemas matching Claude Agent SDK agent patterns. Include fields for tools, model, permissions, session resume. [NICE-TO-HAVE: only needed for full SDK agent compatibility]","status":"closed","priority":3,"type":"task","assignee":"claude","labels":["sdk-harmonization","schemas","agents"],"deps":[],"commits":["80ac4187"],"createdAt":"2025-12-03T04:41:58.467Z","updatedAt":"2025-12-03T06:27:52.908Z","closedAt":"2025-12-03T06:27:52.908Z","closeReason":"Created SDK agent definition schemas matching Claude Agent SDK. Implemented AgentDefinition (programmatic subagent config), SubagentConfig (invocation params), SubagentResult (execution results with session metadata), SessionMetadata (resume support), and AgentRegistry (agent lookup). Includes model selection, permission mode integration, session forking, and usage tracking. Added 23 tests covering all schemas and type guards."}
{"id":"oa-6fa69b","title":"Migrate grep tool to SDK naming","description":"Update src/tools/grep.ts to align with SDK GrepInput. [LOW-PRIORITY: Only do if we need SDK symmetry. Internal callers keep existing names; SDK naming lives in src/schemas/sdk only.]","status":"open","priority":4,"type":"task","labels":["sdk-harmonization","tools","migration","low-priority-migration"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:43:11.792Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-75c6dd","title":"Wire subagent router into orchestrator","description":"Update src/agent/orchestrator/orchestrator.ts to use runBestAvailableSubagent from interop router. Pass ClaudeCodeConfig from project.json. Ensure fallback handling works correctly.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","interop","integration"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:43:16.195Z","updatedAt":"2025-12-03T05:37:14.027Z","closedAt":"2025-12-03T05:37:14.027Z","closeReason":"Orchestrator already uses runBestAvailableSubagent from subagent-router.ts, passes claudeCode config from project.json, and has proper fallback handling"}
{"id":"oa-798519","title":"Add tests for subagent router","description":"Create tests for runBestAvailableSubagent covering: CC available/unavailable, config-based routing, label overrides, fallback on failure, complexity heuristics.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","tests","router"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:43:33.185Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: src/agent/orchestrator/subagent-router.test.ts"}
{"id":"oa-80094f","title":"Create MechaCoder MCP bridge (src/interop/mcp-bridge.ts)","description":"Implement createMechaCoderMcpServer with subtask_complete, request_help, read_progress MCP tools for Claude Code coordination with orchestrator.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","interop","mcp"],"deps":[],"commits":["d986b69a"],"createdAt":"2025-12-03T04:42:38.650Z","updatedAt":"2025-12-03T05:34:46.357Z","closedAt":"2025-12-03T05:34:46.357Z","closeReason":"Implemented createMechaCoderMcpServer with subtask_complete, request_help, and read_progress MCP tools for Claude Code coordination"}
{"id":"oa-8040d9","title":"Add tests for adapters","description":"Create tests for effect-to-zod, tool-adapter, message-adapter, result-adapter. Test bidirectional conversions, roundtrips, edge cases (empty content, multi-block messages). [NICE-TO-HAVE: test coverage can be added incrementally]","status":"open","priority":3,"type":"task","labels":["sdk-harmonization","tests","adapters"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:43:31.688Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-83ff3d","title":"Migrate read tool to SDK naming","description":"Update src/tools/read.ts to use SDK naming: path -> file_path. [LOW-PRIORITY: Only do if we need SDK symmetry. Internal callers keep existing names; SDK naming lives in src/schemas/sdk only.]","status":"open","priority":4,"type":"task","labels":["sdk-harmonization","tools","migration","low-priority-migration"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:53.253Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-8dcf98","title":"Create Effect Schema to Zod converter (src/schemas/sdk/adapters/effect-to-zod.ts)","description":"Implement effectSchemaToZod function that converts Effect Schema AST to equivalent Zod schema. Handle String, Number, Boolean, Literal, Union, Struct, Array, Optional types. Required for MCP tool compatibility.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","adapters","schema-conversion"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:16.671Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: src/schemas/sdk/adapters/effect-to-zod.ts"}
{"id":"oa-938e4a","title":"Add ClaudeCodeConfig to project.json schema (src/interop/router/config.ts)","description":"Create ClaudeCodeConfig schema with enabled, preferForComplexTasks, maxTurnsPerSubtask, permissionMode, fallbackToMinimal, complexityThreshold, forceMinimalLabels, forceClaudeCodeLabels fields. Add to ProjectConfig in src/tasks/schema.ts.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","interop","config"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:36.593Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: claudeCode config in project.json"}
{"id":"oa-985f9d","title":"Migrate find tool to SDK naming","description":"Update src/tools/find.ts to match SDK patterns. [LOW-PRIORITY: Only do if we need SDK symmetry. Internal callers keep existing names; SDK naming lives in src/schemas/sdk only.]","status":"open","priority":4,"type":"task","labels":["sdk-harmonization","tools","migration","low-priority-migration"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:43:13.732Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-9e9a81","title":"Create SDK permissions schemas (src/schemas/sdk/permissions.ts)","description":"Define PermissionMode, PermissionResult, PermissionBehavior, PermissionRuleValue, CanUseTool schemas matching Claude Agent SDK permission system. [NICE-TO-HAVE: only needed if we expose SDK permission interface]","status":"closed","priority":3,"type":"task","labels":["sdk-harmonization","schemas","permissions"],"deps":[],"commits":["e51b3e3e"],"createdAt":"2025-12-03T04:41:57.529Z","updatedAt":"2025-12-03T06:27:12.636Z","closedAt":"2025-12-03T06:27:12.636Z","closeReason":"Added SDK permission schemas"}
{"id":"oa-a3362b","title":"Create SDK schemas index (src/schemas/sdk/index.ts)","description":"Create index.ts that re-exports all SDK types from tool-inputs, tool-outputs, messages, hooks, permissions, agents, usage, and type-guards. Organize exports logically.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","schemas"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:43:34.233Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: src/schemas/sdk/index.ts"}
{"id":"oa-a3a954","title":"Create SDK usage/cost schemas (src/schemas/sdk/usage.ts)","description":"Define TokenUsage, CostBreakdown, NonNullableUsage schemas for tracking input/output tokens, cache usage, and cost in USD. [NICE-TO-HAVE: only needed for SDK-style usage reporting]","status":"open","priority":3,"type":"task","labels":["sdk-harmonization","schemas","usage"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:41:59.799Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-a5fc11","title":"Create SDK message schemas (src/schemas/sdk/messages.ts)","description":"Define SDKMessage union, ContentBlock types (TextBlock, ThinkingBlock, ToolUseBlock, ToolResultBlock), SDKUserMessage, SDKAssistantMessage, SDKResultMessage matching Claude Agent SDK message patterns.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","schemas","messages"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:41:42.895Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: src/schemas/sdk/messages.ts"}
{"id":"oa-b46778","title":"Epic: Harmonize Effect schemas with Claude Agent SDK","description":"","status":"closed","priority":1,"type":"epic","labels":["sdk-harmonization","claude-sdk"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:41:14.687Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Duplicate epic - see oa-17d0cd"}
{"id":"oa-b5d6c7","title":"Migrate ls tool to SDK naming","description":"Update src/tools/ls.ts to match SDK patterns. [LOW-PRIORITY: Only do if we need SDK symmetry. Internal callers keep existing names; SDK naming lives in src/schemas/sdk only.]","status":"open","priority":4,"type":"task","labels":["sdk-harmonization","tools","migration","low-priority-migration"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:43:14.782Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-bbb4bf","title":"Migrate write tool to SDK naming","description":"Update src/tools/write.ts to use SDK naming: path -> file_path. [LOW-PRIORITY: Only do if we need SDK symmetry. Internal callers keep existing names; SDK naming lives in src/schemas/sdk only.]","status":"open","priority":4,"type":"task","labels":["sdk-harmonization","tools","migration","low-priority-migration"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:56.107Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-c4b9e0","title":"Migrate bash tool + add new params","description":"Update src/tools/bash.ts: add description and run_in_background parameters. [LOW-PRIORITY: Only do if we need SDK symmetry. Internal callers keep existing names; SDK naming lives in src/schemas/sdk only.]","status":"open","priority":4,"type":"task","labels":["sdk-harmonization","tools","migration","low-priority-migration"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:57.519Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":null}
{"id":"oa-d079d0","title":"Create tool adapter for MCP (src/schemas/sdk/adapters/tool-adapter.ts)","description":"Implement effectToolToMcpTool that wraps Effect Tool interface for Claude SDK MCP servers. Convert schema via effect-to-zod, wrap execute() with Effect runtime, map ToolResult to CallToolResult.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","adapters","mcp"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:17.850Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: src/schemas/sdk/adapters/tool-adapter.ts"}
{"id":"oa-dfa44f","title":"Create type guards (src/schemas/sdk/type-guards.ts)","description":"Create type guard functions: isTextBlock, isThinkingBlock, isToolUseBlock, isToolResultBlock, isSDKUserMessage, isSDKAssistantMessage, isSDKResultMessage for runtime type discrimination.","status":"closed","priority":2,"type":"task","labels":["sdk-harmonization","schemas","types"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:01.280Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: type guards in messages.ts (isTextBlock, isToolUseBlock, etc.)"}
{"id":"oa-e6bbbc","title":"Create message adapter (src/schemas/sdk/adapters/message-adapter.ts)","description":"Implement bidirectional ChatMessage <-> SDKMessage conversion. Handle user/assistant/tool role mappings, tool_call_id preservation, content block conversion.","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","adapters","messages"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:42:19.027Z","updatedAt":"2025-12-03T05:18:26.486Z","closedAt":"2025-12-03T05:18:26.486Z","closeReason":"Implemented message adapter with bidirectional ChatMessage <-> SDKMessage conversion, content block conversion, tool call conversion, and 19 passing tests"}
{"id":"oa-f66ee4","title":"Create SDK tool output schemas (src/schemas/sdk/tool-outputs.ts)","description":"Define ReadOutput, EditOutput, WriteOutput, BashOutput, GrepOutput, GlobOutput schemas with SDK-compatible structure. Include ToolContent union (text/image), metadata fields (total_lines, truncated, diff, exitCode).","status":"closed","priority":1,"type":"task","labels":["sdk-harmonization","schemas","tools"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:41:41.888Z","updatedAt":"2025-12-03T05:07:37.356Z","closedAt":"2025-12-03T05:07:37.356Z","closeReason":"Implemented: src/schemas/sdk/tool-outputs.ts"}
{"id":"oa-e21ac5","title":"Add task archival/compaction for .openagents tasks.jsonl","description":"Design and ship a repeatable archival/compaction flow so closed/old/outdated tasks move from .openagents/tasks.jsonl into a separate archive file while keeping history accessible. Extend the Effect TaskService/CLI to support archiving and reading archived tasks (e.g., .openagents/tasks-archive.jsonl), include age/status filters, tests, and docs so MechaCoder/external agents can run it without manual editing.","status":"closed","priority":2,"type":"chore","labels":["task-system","archival"],"deps":[],"commits":["c6f4373e9aa85ed5b05a286be6a2324d92759746"],"createdAt":"2025-12-03T06:31:21.267Z","updatedAt":"2025-12-03T08:14:45.503Z","closedAt":"2025-12-03T08:14:45.503Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-cc-switch-01","title":"Wire orchestrator into do-one-task.ts","description":"Make orchestrator the default path, but keep old Grok-based agentLoop as backup. Add --legacy flag or useOrchestrator: false config to use old path when needed.","status":"closed","priority":0,"type":"task","labels":["claude-code","mechacoder","switchover"],"deps":[{"id":"oa-pi17","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T07:00:00Z","updatedAt":"2025-12-03T08:00:00Z","closedAt":"2025-12-03T08:00:00Z"}
{"id":"oa-cc-switch-02","title":"Add orchestrator CLI command","description":"Create bun run mechacoder:orchestrator --dir . --once entry that uses runOrchestrator directly. This becomes the primary entrypoint for CC-first operation.","status":"closed","priority":0,"type":"task","labels":["claude-code","mechacoder","cli","switchover"],"deps":[{"id":"oa-cc-switch-01","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T07:00:00Z","updatedAt":"2025-12-03T08:00:00Z","closedAt":"2025-12-03T08:00:00Z"}
{"id":"oa-cc-switch-03","title":"Wire orchestrator into overnight.ts","description":"Update overnight multi-task runner to use orchestrator flow instead of direct agentLoop.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","switchover"],"deps":[{"id":"oa-cc-switch-01","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T07:00:00Z","updatedAt":"2025-12-03T08:15:00Z","closedAt":"2025-12-03T08:15:00Z"}
{"id":"oa-cc-switch-04","title":"E2E validation with real CC tasks","description":"Run 2-3 real tasks through orchestrator+CC path, verify commit/push/close works end-to-end. Document any issues found.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","testing","switchover"],"deps":[{"id":"oa-cc-switch-02","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T07:00:00Z","updatedAt":"2025-12-03T08:30:00Z","closedAt":"2025-12-03T08:30:00Z","closeReason":"E2E validated: orchestrator starts, typecheck runs, task selected, subtask created, routing works correctly (simple tasks -> minimal, complex -> CC). OpenRouter :free suffix working."}
{"id":"oa-cc-switch-05","title":"Update project.json defaults for CC","description":"Set claudeCode.enabled=true, claudeCode.preferForComplexTasks=true as defaults. Ensure fallbackToMinimal=true.","status":"closed","priority":1,"type":"task","labels":["claude-code","mechacoder","config","switchover"],"deps":[],"commits":[],"createdAt":"2025-12-03T07:00:00Z","updatedAt":"2025-12-03T08:20:00Z","closedAt":"2025-12-03T08:20:00Z"}
{"id":"oa-cc-switch-bug01","title":"Fix OpenRouter model slug to use :free suffix","description":"OpenRouter API now requires x-ai/grok-4.1-fast:free instead of x-ai/grok-4.1-fast. Update model slug in OpenRouter client/config.","status":"closed","priority":0,"type":"bug","labels":["openrouter","mechacoder","blocker"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:00:00Z","updatedAt":"2025-12-03T08:10:00Z","closedAt":"2025-12-03T08:10:00Z"}
{"id":"oa-d3965f","title":"Resume Claude Code session when task continues across cycles","description":"When a subtask fails with error_max_turns and the orchestrator retries in the next cycle, pass the previous Claude Code session ID so it can resume with full context rather than starting fresh.\n\nCurrently each cycle gets a new session ID (e.g., f7e10y vs zdjbey), losing all context from the previous attempt. With session resumption, Claude Code would continue where it left off.\n\nImplementation:\n1. Store the Claude Code session ID in the subtask when it fails\n2. On retry, pass resumeSessionId to runClaudeCodeSubagent\n3. The SDK's resume option will restore the full conversation context","status":"closed","priority":2,"type":"feature","labels":["claude-code","orchestrator"],"deps":[],"commits":["88775ee4"],"createdAt":"2025-12-03T07:34:26.438Z","updatedAt":"2025-12-03T07:37:30.008Z","closedAt":"2025-12-03T07:37:30.008Z","closeReason":"Implemented - infrastructure already existed, added logging and bug fix"}
{"id":"oa-8067e5","title":"Epic: WebSocket Streaming for MechaCoder HUD UI","description":"Connect MechaCoder agent flow to the HUD UI via WebSocket for real-time updates.\n\n## Goal\nReplace 5-second polling in Electrobun HUD with WebSocket push for:\n- OrchestratorEvents (task_selected, subtask_start, verification_complete, etc.)\n- Claude Code text output (streaming)\n- Tool call JSON\n\n## Architecture\n```\n+------------------------------------------------------------------+\n|                     ELECTROBUN DESKTOP APP                        |\n|  +------------------------------------------------------------+  |\n|  |                   mainview (UI Process)                     |  |\n|  |                                                             |  |\n|  |  +-----------------------+   +-------------------------+    |  |\n|  |  |   Bun.serve()         |   |    SVG Flow HUD         |    |  |\n|  |  |   WebSocket SERVER    |-->|    Real-time updates    |    |  |\n|  |  |   ws://localhost:4242 |   +-------------------------+    |  |\n|  |  +-----------------------+                                  |  |\n|  +------------------------------------------------------------+  |\n+------------------------------------------------------------------+\n               ^ WebSocket Connection(s)\n               |\n+--------------|----------------------------------------------------+\n|   AGENT PROCESS (overnight.ts / do-one-task.ts)                   |\n|              |                                                    |\n|  +---------------------------+                                    |\n|  |  HudClient (WebSocket)    |                                    |\n|  |  - Auto-reconnect         |                                    |\n|  |  - Queue when disconnected|                                    |\n|  +------------|--------------+                                    |\n|               ^                                                   |\n|               |                                                   |\n|  +------------+---------------+    +---------------------------+  |\n|  |   Orchestrator             |--->|   Claude Code Subagent    |  |\n|  |   emit(event) --> HudClient|    |   onOutput --> HudClient  |  |\n|  +----------------------------+    +---------------------------+  |\n+-------------------------------------------------------------------+\n```\n\n## Design Decisions\n- Native WebSocket (not Effect PubSub) - agent has single subscriber\n- Bun.serve() for server - native to Electrobun\n- Silent fail if HUD not running - agent continues working\n- Message queue during reconnect - don't lose events\n- Port 4242 - arbitrary but memorable","status":"closed","priority":1,"type":"epic","labels":["hud","websocket","streaming","ui"],"deps":[],"commits":["1de59208ba872d1ae2d22c76d37ea89e85f16e77"],"createdAt":"2025-12-03T07:53:01.386Z","updatedAt":"2025-12-03T08:07:50.866Z","closedAt":"2025-12-03T08:07:50.866Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-e38c26","title":"Create HUD protocol types (src/hud/protocol.ts)","description":"Create the HUD message protocol type definitions.\n\n## File: src/hud/protocol.ts\n\n## HudMessage Union Type\n```typescript\nexport type HudMessage =\n  // Orchestrator lifecycle events\n  | { type: \"session_start\"; sessionId: string; ts: string }\n  | { type: \"session_complete\"; success: boolean; summary: string; ts: string }\n  | { type: \"task_selected\"; taskId: string; title: string; ts: string }\n  | { type: \"subtask_start\"; subtaskId: string; description: string; ts: string }\n  | { type: \"subtask_complete\"; subtaskId: string; success: boolean; agent: string; ts: string }\n  | { type: \"subtask_failed\"; subtaskId: string; error: string; ts: string }\n  | { type: \"verification_start\"; command: string; ts: string }\n  | { type: \"verification_complete\"; command: string; passed: boolean; ts: string }\n  | { type: \"commit_created\"; sha: string; message: string; ts: string }\n  | { type: \"push_complete\"; branch: string; ts: string }\n  | { type: \"error\"; phase: string; error: string; ts: string }\n  // Streaming text from Claude Code\n  | { type: \"text\"; text: string; ts: string }\n  // Tool calls\n  | { type: \"tool_call\"; tool: string; input: unknown; ts: string }\n  // Control messages\n  | { type: \"agent_connect\"; agentId: string; cwd: string; ts: string }\n  | { type: \"agent_disconnect\"; agentId: string; ts: string };\n```\n\n## Helper Function\nAdd `mapOrchestratorEvent(event: OrchestratorEvent): HudMessage` to convert orchestrator events to HUD messages.\n\n## Reference\n- Read `src/agent/orchestrator/types.ts` for OrchestratorEvent definitions\n- All messages must include `ts: string` (ISO timestamp)\n- Keep types simple - no Effect dependencies in protocol","status":"closed","priority":1,"type":"task","labels":["hud","websocket","types"],"deps":[],"commits":["7f2fe8f5"],"createdAt":"2025-12-03T07:53:32.514Z","updatedAt":"2025-12-03T08:00:43.180Z","closedAt":"2025-12-03T08:00:43.180Z","closeReason":"Implemented: src/hud/protocol.ts with HudMessage types, mapOrchestratorEvent helper"}
{"id":"oa-1fc4ac","title":"Create HUD WebSocket client (src/hud/client.ts)","description":"Create WebSocket client for agents to send messages to HUD.\n\n## File: src/hud/client.ts\n\n## HudClient Class\n```typescript\nexport class HudClient {\n  private ws: WebSocket | null = null;\n  private queue: HudMessage[] = [];\n  private reconnectAttempts = 0;\n  private maxReconnectAttempts = 5;\n  private reconnectDelay = 1000;\n\n  connect(url: string = \"ws://localhost:4242\"): void\n  send(message: HudMessage): void  // Queues if disconnected\n  sendText(text: string): void     // Convenience for streaming text\n  sendToolCall(tool: string, input: unknown): void  // Convenience for tool calls\n  close(): void\n}\n```\n\n## Requirements\n- Auto-reconnect with exponential backoff (max 5 attempts)\n- Silent fail if HUD not running (agent continues working)\n- Queue messages during reconnect, flush on successful connect\n- Use native WebSocket (not ws package)\n- No Effect dependencies - plain TypeScript class\n\n## Error Handling\n- Log debug message if HUD not running, don't throw\n- On disconnect, attempt reconnect with backoff\n- On max reconnect failures, stop trying but don't crash agent\n\n## Reference\n- Import HudMessage from ./protocol.ts\n- See overnight.ts for how emit() and onOutput() callbacks work","status":"closed","priority":1,"type":"task","labels":["hud","websocket","client"],"deps":[{"id":"oa-e38c26","type":"blocks"}],"commits":["7f2fe8f5"],"createdAt":"2025-12-03T07:53:33.521Z","updatedAt":"2025-12-03T08:00:44.492Z","closedAt":"2025-12-03T08:00:44.492Z","closeReason":"Implemented: src/hud/client.ts with auto-reconnect, queue, exponential backoff"}
{"id":"oa-8ca3cc","title":"Create HUD WebSocket server (src/hud/server.ts)","description":"Create Bun.serve() WebSocket server for Electrobun HUD.\n\n## File: src/hud/server.ts\n\n## API\n```typescript\nexport interface HudServerOptions {\n  port?: number;  // Default: 4242\n  onMessage: (msg: HudMessage, agentId: string) => void;\n  onAgentConnect?: (agentId: string) => void;\n  onAgentDisconnect?: (agentId: string) => void;\n}\n\nexport function startHudServer(options: HudServerOptions): {\n  stop: () => void;\n  broadcast: (msg: HudMessage) => void;\n}\n```\n\n## Implementation\n- Use Bun.serve() with websocket handlers\n- Track connected agents by agentId (from agent_connect message)\n- Parse incoming JSON messages and validate as HudMessage\n- Call onMessage callback for each valid message\n- Support graceful shutdown via stop() function\n\n## WebSocket Handlers\n```typescript\nwebsocket: {\n  open(ws) { /* log connection, wait for agent_connect */ },\n  message(ws, data) { /* parse JSON, validate, call onMessage */ },\n  close(ws) { /* call onAgentDisconnect if known agent */ },\n}\n```\n\n## Error Handling\n- Invalid JSON: log and ignore\n- Unknown message type: log and ignore\n- Server startup failure: throw (Electrobun should handle)\n\n## Reference\n- Import HudMessage from ./protocol.ts\n- See CLAUDE.md for Bun.serve() patterns","status":"closed","priority":1,"type":"task","labels":["hud","websocket","server","electrobun"],"deps":[{"id":"oa-e38c26","type":"blocks"}],"commits":["7f2fe8f5"],"createdAt":"2025-12-03T07:53:34.983Z","updatedAt":"2025-12-03T08:00:45.677Z","closedAt":"2025-12-03T08:00:45.677Z","closeReason":"Implemented: src/hud/server.ts with Bun.serve() WebSocket server"}
{"id":"oa-2567a6","title":"Create HUD module exports (src/hud/index.ts)","description":"Create index.ts that exports public HUD API.\n\n## File: src/hud/index.ts\n\n## Exports\n```typescript\n// Types\nexport type { HudMessage } from \"./protocol.js\";\nexport { mapOrchestratorEvent } from \"./protocol.js\";\n\n// Client (for agents)\nexport { HudClient } from \"./client.js\";\n\n// Server (for Electrobun)\nexport { startHudServer } from \"./server.js\";\nexport type { HudServerOptions } from \"./server.js\";\n```\n\n## Notes\n- Keep exports minimal - only public API\n- Client and server can be imported separately\n- This allows agents to import just HudClient without server code","status":"closed","priority":2,"type":"task","labels":["hud","exports"],"deps":[{"id":"oa-e38c26","type":"blocks"},{"id":"oa-1fc4ac","type":"blocks"},{"id":"oa-8ca3cc","type":"blocks"}],"commits":["7f2fe8f5"],"createdAt":"2025-12-03T07:53:36.001Z","updatedAt":"2025-12-03T08:00:47.439Z","closedAt":"2025-12-03T08:00:47.439Z","closeReason":"Implemented: src/hud/index.ts with all exports"}
{"id":"oa-574d83","title":"Integrate HudClient into overnight.ts","description":"Wire HudClient into the overnight agent to send events and streaming output to HUD.\n\n## File: src/agent/overnight.ts\n\n## Changes\n\n### 1. Import and instantiate HudClient\n```typescript\nimport { HudClient, mapOrchestratorEvent } from \"../hud/index.js\";\n\nconst hudClient = new HudClient();\nhudClient.connect();\n```\n\n### 2. Wrap existing emit() to also send to HUD\n```typescript\nconst emit = (event: OrchestratorEvent) => {\n  logOrchestratorEvent(event);  // Existing logging\n  hudClient.send(mapOrchestratorEvent(event));  // Send to HUD\n};\n```\n\n### 3. Wrap existing onOutput() to also send to HUD\n```typescript\nconst onOutput = (text: string) => {\n  process.stdout.write(text);  // Existing console output\n  hudClient.sendText(text);    // Send to HUD\n};\n```\n\n### 4. Send tool calls (modify claude-code-subagent callback)\nUpdate the tool call logging to also send to HUD:\n```typescript\n// In the tool call logging section\nhudClient.sendToolCall(call.name, call.input);\n```\n\n### 5. Clean up on exit\n```typescript\n// At end of run or in finally block\nhudClient.close();\n```\n\n## Notes\n- HudClient silently fails if HUD not running - overnight.ts continues normally\n- No changes to core orchestrator logic, just wrapping callbacks\n- Agent sends agent_connect on startup, agent_disconnect on shutdown\n\n## Reference\n- Current emit/onOutput wiring in overnight.ts\n- HudClient API from src/hud/client.ts","status":"closed","priority":1,"type":"task","labels":["hud","websocket","integration","overnight"],"deps":[{"id":"oa-1fc4ac","type":"blocks"}],"commits":["2c4cf25bd28a0af63cf461aa104865482e593f82"],"createdAt":"2025-12-03T07:53:37.191Z","updatedAt":"2025-12-03T08:09:30.821Z","closedAt":"2025-12-03T08:09:30.821Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-4b9dce","title":"Integrate HudClient into do-one-task.ts","description":"Wire HudClient into the single-task agent, same pattern as overnight.ts.\n\n## File: src/agent/do-one-task.ts\n\n## Changes\nSame integration pattern as overnight.ts:\n\n1. Import HudClient and mapOrchestratorEvent\n2. Create and connect HudClient instance\n3. Wrap emit() to send orchestrator events to HUD\n4. Wrap onOutput() to send streaming text to HUD\n5. Send tool calls to HUD\n6. Close HudClient on exit\n\n## Code Pattern\n```typescript\nimport { HudClient, mapOrchestratorEvent } from \"../hud/index.js\";\n\nconst hudClient = new HudClient();\nhudClient.connect();\n\n// Wrap emit\nconst emit = (event: OrchestratorEvent) => {\n  logOrchestratorEvent(event);\n  hudClient.send(mapOrchestratorEvent(event));\n};\n\n// Wrap onOutput\nconst onOutput = (text: string) => {\n  process.stdout.write(text);\n  hudClient.sendText(text);\n};\n\n// ... use emit and onOutput in orchestrator ...\n\n// Cleanup\nhudClient.close();\n```\n\n## Notes\n- This is a simpler agent than overnight.ts but same HUD integration\n- If do-one-task.ts doesn't exist yet, this may be deferred\n\n## Reference\n- See oa-574d83 (overnight.ts integration) for full pattern","status":"closed","priority":1,"type":"task","labels":["hud","websocket","integration"],"deps":[{"id":"oa-1fc4ac","type":"blocks"}],"commits":["46c99fb302e1f6b4b4b93748f65e9a8c8e435916"],"createdAt":"2025-12-03T07:53:38.839Z","updatedAt":"2025-12-03T08:11:50.473Z","closedAt":"2025-12-03T08:11:50.473Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-a8d5f9","title":"Integrate HUD server into mainview/index.ts","description":"Start HUD WebSocket server in Electrobun mainview and wire messages to UI state.\n\n## File: src/mainview/index.ts\n\n## Changes\n\n### 1. Import and start server\n```typescript\nimport { startHudServer, type HudMessage } from \"../hud/index.js\";\n\n// Start HUD server on app init\nconst hudServer = startHudServer({\n  port: 4242,\n  onMessage: handleHudMessage,\n  onAgentConnect: (agentId) => console.log(`Agent connected: ${agentId}`),\n  onAgentDisconnect: (agentId) => console.log(`Agent disconnected: ${agentId}`),\n});\n```\n\n### 2. Handle incoming messages\n```typescript\nfunction handleHudMessage(msg: HudMessage, agentId: string) {\n  switch (msg.type) {\n    case \"task_selected\":\n      updateCurrentTask(msg.taskId, msg.title);\n      break;\n    case \"subtask_start\":\n      addSubtaskToLog(msg.subtaskId, msg.description);\n      break;\n    case \"subtask_complete\":\n      markSubtaskComplete(msg.subtaskId, msg.success);\n      break;\n    case \"text\":\n      appendStreamingText(msg.text);\n      break;\n    case \"tool_call\":\n      addToolCallToLog(msg.tool, msg.input);\n      break;\n    // ... handle other message types\n  }\n}\n```\n\n### 3. Remove polling\nReplace the existing 5-second polling mechanism with message-driven updates.\n\n### 4. Graceful shutdown\n```typescript\n// On app exit\nhudServer.stop();\n```\n\n## UI Updates to Consider\n- Real-time event log panel\n- Streaming text output area\n- Tool call visualization\n- Task/subtask progress indicators\n- Agent connection status\n\n## Reference\n- Current mainview state management\n- src/flow/mechacoder-state.ts for state loading patterns\n- HUD server API from src/hud/server.ts","status":"closed","priority":1,"type":"task","labels":["hud","websocket","electrobun","ui"],"deps":[{"id":"oa-8ca3cc","type":"blocks"}],"commits":["150f2ba917e2b572ba178d8b2e70a82b714822f4"],"createdAt":"2025-12-03T07:53:40.328Z","updatedAt":"2025-12-03T08:13:46.945Z","closedAt":"2025-12-03T08:13:46.945Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-6c74e7","title":"Add tests for HUD protocol and client","description":"Add unit and integration tests for HUD protocol and client.\n\n## Files\n- src/hud/protocol.test.ts\n- src/hud/client.test.ts\n\n## Protocol Tests (protocol.test.ts)\n```typescript\nimport { test, expect } from \"bun:test\";\nimport { mapOrchestratorEvent } from \"./protocol.js\";\n\ntest(\"mapOrchestratorEvent converts task_selected\", () => {\n  const event = { type: \"task_selected\", task: { id: \"t1\", title: \"Test\" } };\n  const msg = mapOrchestratorEvent(event);\n  expect(msg.type).toBe(\"task_selected\");\n  expect(msg.taskId).toBe(\"t1\");\n  expect(msg.ts).toBeDefined();\n});\n\n// Test all event types map correctly\n// Test ts field is always present\n// Test unknown events throw or return error type\n```\n\n## Client Tests (client.test.ts)\n```typescript\nimport { test, expect } from \"bun:test\";\nimport { HudClient } from \"./client.js\";\n\ntest(\"HudClient queues messages when disconnected\", () => {\n  const client = new HudClient();\n  // Don't connect\n  client.send({ type: \"text\", text: \"hello\", ts: new Date().toISOString() });\n  // Verify message is queued (may need to expose queue for testing)\n});\n\ntest(\"HudClient flushes queue on connect\", async () => {\n  // Requires mock WebSocket server\n  // Start test server, connect client, verify queued messages arrive\n});\n\ntest(\"HudClient reconnects on disconnect\", async () => {\n  // Start server, connect, kill server, restart, verify reconnect\n});\n\ntest(\"HudClient silently fails when server unavailable\", () => {\n  const client = new HudClient();\n  // Should not throw\n  expect(() => client.connect()).not.toThrow();\n});\n```\n\n## Integration Test (optional)\n- Start HUD server\n- Create HudClient, connect\n- Send messages, verify server receives\n- Disconnect, reconnect, verify queue flushed\n\n## Reference\n- Use bun:test\n- See existing test patterns in src/**/*.test.ts","status":"closed","priority":2,"type":"task","labels":["hud","testing"],"deps":[{"id":"oa-e38c26","type":"blocks"},{"id":"oa-1fc4ac","type":"blocks"}],"commits":["4fb03c9bebf04a25f4d0f3824e7dd8b16d9e05a0"],"createdAt":"2025-12-03T07:53:41.559Z","updatedAt":"2025-12-03T08:33:39.019Z","closedAt":"2025-12-03T08:33:39.019Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-4e8aa5","title":"Task System Enhancement Epic (from beads)","description":"Port valuable features from beads CLI to our task system. Includes: reopen, stats, stale detection, doctor/validate, comments, delete/cleanup, config CLI, duplicates/merge, git hooks, compaction, and more.","status":"closed","priority":2,"type":"epic","labels":["enhancement","infrastructure","beads-port"],"deps":[],"commits":["927d60478b029fda45aa7174c907012f34092788"],"createdAt":"2025-12-03T08:04:30.232Z","updatedAt":"2025-12-03T08:43:37.709Z","closedAt":"2025-12-03T08:43:37.709Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-d51a28","title":"Add tasks:reopen command","description":"Add reopen command to set closed tasks back to open status. Simple status transition from closed → open, clearing closedAt and closeReason.","status":"closed","priority":3,"type":"task","labels":["beads-port","cli","tier-1"],"deps":[],"commits":["78e00f383f3e26f019413da8b68a8f5a8eab701a"],"createdAt":"2025-12-03T08:04:41.873Z","updatedAt":"2025-12-03T08:42:42.544Z","closedAt":"2025-12-03T08:42:42.544Z","closeReason":"Implemented: added reopenTask function to service.ts and cmdReopen to CLI"}
{"id":"oa-cfba10","title":"Add tasks:stats command","description":"Add stats command showing task counts by status, type, and priority. Output format: grouped counts for quick project health overview.","status":"closed","priority":3,"type":"task","labels":["beads-port","cli","tier-1"],"deps":[],"commits":["78e00f383f3e26f019413da8b68a8f5a8eab701a"],"createdAt":"2025-12-03T08:04:42.761Z","updatedAt":"2025-12-03T08:42:49.314Z","closedAt":"2025-12-03T08:42:49.314Z","closeReason":"Implemented: added getTaskStats function and cmdStats to CLI"}
{"id":"oa-54c465","title":"Add tasks:stale command","description":"Add stale command to find tasks not updated in N days. Options: --days (default 30), filter by status. Helps find forgotten work.","status":"closed","priority":3,"type":"task","labels":["beads-port","cli","tier-1"],"deps":[],"commits":["78e00f383f3e26f019413da8b68a8f5a8eab701a"],"createdAt":"2025-12-03T08:04:44.134Z","updatedAt":"2025-12-03T08:42:49.455Z","closedAt":"2025-12-03T08:42:49.455Z","closeReason":"Implemented: added getStaleTasks function and cmdStale to CLI"}
{"id":"oa-b8bc22","title":"Add tasks:show command with dependency tree","description":"Add show command to display single task with full details and dependency tree visualization. Show what blocks this task and what it blocks.","status":"closed","priority":3,"type":"task","labels":["beads-port","cli","tier-1"],"deps":[],"commits":["78e00f383f3e26f019413da8b68a8f5a8eab701a"],"createdAt":"2025-12-03T08:04:45.095Z","updatedAt":"2025-12-03T08:42:49.595Z","closedAt":"2025-12-03T08:42:49.595Z","closeReason":"Implemented: added getTaskWithDeps function and cmdShow to CLI with dependency tree"}
{"id":"oa-65d5fe","title":"Add tasks:doctor command","description":"Add doctor command to diagnose task file issues: parse errors, invalid IDs, missing required fields, orphan dependencies, circular deps, stale in_progress tasks.","status":"open","priority":3,"type":"task","labels":["beads-port","cli","tier-2"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:01.956Z","updatedAt":"2025-12-03T08:05:01.956Z","closedAt":null}
{"id":"oa-a4eb48","title":"Add tasks:validate command","description":"Add validate command to check data integrity: orphan deps (reference non-existent tasks), conflict markers in file, schema violations. Separate from doctor for targeted checks.","status":"open","priority":3,"type":"task","labels":["beads-port","cli","tier-2"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:02.932Z","updatedAt":"2025-12-03T08:05:02.932Z","closedAt":null}
{"id":"oa-18fb6b","title":"Add tasks:delete command with cascade","description":"Add delete command to remove tasks. Options: --id, --cascade (delete all dependent tasks), --dry-run. Permanent removal unlike close.","status":"open","priority":3,"type":"task","labels":["beads-port","cli","tier-2"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:03.951Z","updatedAt":"2025-12-03T08:05:03.951Z","closedAt":null}
{"id":"oa-45ff3a","title":"Add tasks:cleanup command","description":"Add cleanup command to bulk delete old closed tasks. Options: --older-than (e.g., 30d, 90d), --dry-run to preview, --cascade.","status":"open","priority":3,"type":"task","labels":["beads-port","cli","tier-2"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:05.742Z","updatedAt":"2025-12-03T08:05:05.742Z","closedAt":null}
{"id":"oa-0b7181","title":"Add tasks:config get/set/list commands","description":"Add config CLI for project.json: tasks:config get <key>, tasks:config set <key> <value>, tasks:config list. Modify project settings without editing JSON.","status":"open","priority":3,"type":"task","labels":["beads-port","cli","tier-2"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:07.252Z","updatedAt":"2025-12-03T08:05:07.252Z","closedAt":null}
{"id":"oa-d2b079","title":"Add Comment schema to Task","description":"Add comments field to Task schema: Comment[] with id, text, author, createdAt. Optional field with empty array default. Update schema.ts and tests.","status":"open","priority":3,"type":"task","labels":["beads-port","schema","tier-2"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:08.568Z","updatedAt":"2025-12-03T08:05:08.568Z","closedAt":null}
{"id":"oa-1bf91b","title":"Add tasks:comment add/list commands","description":"Add comment CLI: tasks:comment add --id <task> --text \"...\", tasks:comment list --id <task>. Requires Comment schema to be added first.","status":"open","priority":3,"type":"task","labels":["beads-port","cli","tier-2"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:09.561Z","updatedAt":"2025-12-03T08:05:09.561Z","closedAt":null}
{"id":"oa-a2797e","title":"Add tasks:duplicates command","description":"Add duplicates command to find similar/duplicate tasks. Match by content hash of title+description. Group by status (open with open, closed with closed).","status":"open","priority":4,"type":"task","labels":["beads-port","cli","tier-3"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:29.747Z","updatedAt":"2025-12-03T08:05:29.747Z","closedAt":null}
{"id":"oa-84df15","title":"Add tasks:merge command","description":"Add merge command to consolidate duplicates: tasks:merge --ids <id1,id2> --into <target>. Redirect dependencies, update references, --dry-run preview.","status":"open","priority":4,"type":"task","labels":["beads-port","cli","tier-3"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:31.163Z","updatedAt":"2025-12-03T08:05:31.163Z","closedAt":null}
{"id":"oa-9367de","title":"Add tasks:rename-prefix command","description":"Add rename-prefix command to change ID prefix (e.g., oa → xyz). Updates all task IDs and references in descriptions, deps. --dry-run preview.","status":"open","priority":4,"type":"task","labels":["beads-port","cli","tier-3"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:32.867Z","updatedAt":"2025-12-03T08:05:32.867Z","closedAt":null}
{"id":"oa-f12045","title":"Add tasks:repair-deps command","description":"Add repair-deps command to fix orphaned dependencies. Remove deps pointing to non-existent tasks. Report what was fixed.","status":"open","priority":4,"type":"task","labels":["beads-port","cli","tier-3"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:33.989Z","updatedAt":"2025-12-03T08:05:33.989Z","closedAt":null}
{"id":"oa-a3d740","title":"Add git hooks system for task auto-sync","description":"Add tasks:hooks install/uninstall. Install post-merge, post-checkout, pre-commit hooks. Auto-import tasks after pulls, validate before commits.","status":"open","priority":4,"type":"task","labels":["beads-port","git","tier-4"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:35.117Z","updatedAt":"2025-12-03T08:05:35.117Z","closedAt":null}
{"id":"oa-9b81e6","title":"Add tasks:compact command for old tasks","description":"Add compact command to summarize old closed tasks. AI-supervised or manual compaction. Preserve history in git. Options: --analyze, --apply, --stats.","status":"open","priority":4,"type":"task","labels":["beads-port","cli","tier-4"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:36.329Z","updatedAt":"2025-12-03T08:05:36.329Z","closedAt":null}
{"id":"oa-1c366f","title":"Add deletion tombstones tracking","description":"Add deletions.jsonl to track deleted task IDs, timestamps, actors, reasons. Propagate deletions across clones. Enables restore functionality.","status":"open","priority":4,"type":"task","labels":["beads-port","schema","tier-4"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:38.157Z","updatedAt":"2025-12-03T08:05:38.157Z","closedAt":null}
{"id":"oa-293749","title":"Add tasks:restore command","description":"Add restore command to recover deleted tasks from git history. Requires deletion tombstones tracking. Git history fallback for self-healing.","status":"open","priority":4,"type":"task","labels":["beads-port","cli","tier-4"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:05:40.756Z","updatedAt":"2025-12-03T08:05:40.756Z","closedAt":null}
{"id":"oa-c8d45d","title":"Epic: Harden Golden Loop v2 resiliency & test coverage","description":"Track work to strengthen Golden Loop v2 with better failure handling, documentation clarity, and expanded tests (integration, browser, verification).","status":"closed","priority":1,"type":"epic","labels":["golden-loop","mechacoder","docs","testing","resilience"],"deps":[],"commits":["2d79ad9049b7a7992bb8ff5602253775aa528110"],"createdAt":"2025-12-03T08:47:09.160Z","updatedAt":"2025-12-03T08:58:03.657Z","closedAt":"2025-12-03T08:58:03.657Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-ee6e13","title":"Document Golden Loop failure recovery & dirty workspace handling","description":"Update docs/mechacoder/GOLDEN-LOOP-v2.md with concrete recovery playbooks: what happens when tests fail or agent crashes, how to detect and clean dirty working trees, and how to safely resume tasks without losing progress.","status":"closed","priority":1,"type":"task","labels":["golden-loop","docs","resilience"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["c193d68bfd7c39b2ba046eb80faf7305fa29ca4f"],"createdAt":"2025-12-03T08:47:19.946Z","updatedAt":"2025-12-03T09:01:01.388Z","closedAt":"2025-12-03T09:01:01.388Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-a9eab1","title":"Document/pilot git conflict & push failure handling in Golden Loop","description":"Enhance GOLDEN-LOOP-v2.md with guidance for merge/rebase conflicts and rejected pushes, including safe backoff, follow-up task creation, and expectations for keeping working tree intact during retries.","status":"closed","priority":1,"type":"task","labels":["golden-loop","docs","git","resilience"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["3022aae2740ba5569a946889502a62ecfc48a19a"],"createdAt":"2025-12-03T08:47:24.841Z","updatedAt":"2025-12-03T09:03:32.932Z","closedAt":"2025-12-03T09:03:32.932Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-87d2fc","title":"Clarify offline/network failure fallback & Claude Code resume paths","description":"Add GOLDEN-LOOP-v2 doc guidance for loss of network or Claude Code availability: when to fall back to minimal subagent, how to persist/resume sessions, and how to log/mark tasks as blocked when external services are unavailable.","status":"closed","priority":1,"type":"task","labels":["golden-loop","docs","resilience","claude-code"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["4505ff0b8188284116e81d8332b02086e6c4dfb3"],"createdAt":"2025-12-03T08:47:29.236Z","updatedAt":"2025-12-03T09:05:57.345Z","closedAt":"2025-12-03T09:05:57.345Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-199210","title":"Document and test agent.lock enforcement for Golden Loop","description":"Add coverage and doc notes for .openagents/agent.lock: how lock is created/checked, how to recover stale locks, and how the loop should abort when a running PID is detected. Include test plan or harness to validate lock behavior.","status":"closed","priority":1,"type":"task","labels":["golden-loop","docs","resilience","testing"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["6f4b8c6fd66a5b8fae319de7e5f59cb063c2dcb4"],"createdAt":"2025-12-03T08:47:34.020Z","updatedAt":"2025-12-03T09:15:52.845Z","closedAt":"2025-12-03T09:15:52.845Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-6e255e","title":"Add Golden Loop preflight checklist for init.sh & environment","description":"Document a repeatable preflight for GOLDEN-LOOP-v2: expected init.sh checks (bun test smoke, git clean, API keys present), guidance for failing fast when preflight fails, and where to log results for visibility.","status":"closed","priority":1,"type":"task","labels":["golden-loop","docs","ops","resilience"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["aa71b0d2c22e85aeb255e6675b55322e33500073"],"createdAt":"2025-12-03T08:47:39.991Z","updatedAt":"2025-12-03T09:24:05.770Z","closedAt":"2025-12-03T09:24:05.770Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-29abf9","title":"Add verification phase tests for Golden Loop gating (typecheck/tests)","description":"Create integration tests ensuring orchestrator respects GOLDEN-LOOP-v2 rules: run typecheck/testCommands, block commit/push when failing, and record failure in tasks/logs. Cover both Claude Code and minimal subagent paths.","status":"closed","priority":1,"type":"task","labels":["golden-loop","testing","verification"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["3681ed607fd465646dbd2e2c3131cd8ee2c5e20d"],"createdAt":"2025-12-03T08:47:44.631Z","updatedAt":"2025-12-03T15:11:29.618Z","closedAt":"2025-12-03T15:11:29.618Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-afd49a","title":"Add Golden Loop negative-path e2e (failing tests leave task in-progress)","description":"Build a stub repo/test harness to run the orchestrator end-to-end with intentional failing tests, asserting no commit/push occurs, task remains in_progress or blocked with a clear reason, and logs capture the failure.","status":"closed","priority":1,"type":"task","labels":["golden-loop","testing","e2e","resilience"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["f7a2b7ab18fa36aeaf8dbd419a4d0d63c0700f7f"],"createdAt":"2025-12-03T08:47:48.903Z","updatedAt":"2025-12-03T15:17:55.251Z","closedAt":"2025-12-03T15:17:55.251Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-46156a","title":"Add Electrobun/Playwright Golden Loop smoke for start/stop & log UI","description":"Create a browser/electron integration test that launches the desktop UI, starts a one-task Golden Loop run with a stub project, verifies live log/phase output appears, and confirms graceful stop/cleanup behavior.","status":"closed","priority":2,"type":"task","labels":["golden-loop","testing","e2e","browser","electrobun"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["e2a09e4d4fe1fec81664065fc966f04c11c77a42"],"createdAt":"2025-12-03T08:47:54.002Z","updatedAt":"2025-12-03T16:12:51.057Z","closedAt":"2025-12-03T16:12:51.057Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-090e97","title":"Document HUD event mapping for Golden Loop phases and add tests","description":"Expand docs to show how orchestrator events map to HUD messages, including phase transitions, tool calls, and log streaming. Add a small test harness/fixture to assert HUD receives expected messages during a sample loop.","status":"closed","priority":2,"type":"task","labels":["golden-loop","docs","hud","testing"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":["1ea13263b9a1386b144be70441968702ca20d8e0"],"createdAt":"2025-12-03T08:47:58.654Z","updatedAt":"2025-12-03T17:18:06.592Z","closedAt":"2025-12-03T17:18:06.592Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-7a5884","title":"Document log retention/rotation and add Golden Loop log creation test","description":"Document expectations for docs/logs rotation (naming, size, cleanup) and add a test ensuring each loop writes a run log with task/tests/commit info to the correct date folder.","status":"open","priority":2,"type":"task","labels":["golden-loop","docs","logging","testing"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:48:03.718Z","updatedAt":"2025-12-03T08:48:03.718Z","closedAt":null}
{"id":"oa-5cf94a","title":"Document stuck-task detection & tasks:doctor usage in Golden Loop","description":"Add guidance for detecting stale in_progress tasks, how the loop should surface them, and when to run tasks:doctor/validate as part of startup. Include a small test or fixture demonstrating detection of stale tasks and expected remediation.","status":"open","priority":2,"type":"task","labels":["golden-loop","docs","ops","testing"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:48:08.695Z","updatedAt":"2025-12-03T08:48:08.695Z","closedAt":null}
{"id":"oa-fb359d","title":"Create Golden Loop regression fixture & test matrix (CLI + desktop)","description":"Build a reusable stub repo/fixtures and matrix covering CLI do-one-task, overnight loop, and desktop UI harness. Document how to run locally/CI and ensure Golden Loop v2 acceptance criteria remain covered as features evolve.","status":"open","priority":2,"type":"task","labels":["golden-loop","testing","e2e","docs"],"deps":[{"id":"oa-c8d45d","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:48:13.778Z","updatedAt":"2025-12-03T08:48:13.778Z","closedAt":null}
{"id":"oa-a4ed60","title":"Epic: Complete pi-mono parity (non-TUI)","description":"Track remaining pi-mono features to port into MechaCoder/OpenAgents (excluding TUI). Focus on automation-safe parity: tools-manager auto-install, context compaction, session import/export, model registry generation, retry/backoff parity, log/traces parity.","status":"closed","priority":1,"type":"epic","labels":["pi-port","pi-mono","mechacoder"],"deps":[],"commits":["11006a32b1e57894b7bf5065b86f320cda904f0b"],"createdAt":"2025-12-03T08:55:14.654Z","updatedAt":"2025-12-03T15:22:01.217Z","closedAt":"2025-12-03T15:22:01.217Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-daba8b","title":"Port pi-mono tools-manager auto-install for rg/fd in headless runs","description":"Bring over pi-mono's tools-manager to download/verify rg and fd when missing (platform-specific binaries, checksum, chmod). Expose Effect APIs so MechaCoder can ensure deps before starting, and document fallback when download fails. No TUI surfaces.","status":"closed","priority":1,"type":"task","labels":["pi-port","pi-mono","tools","infra"],"deps":[{"id":"oa-a4ed60","type":"parent-child"}],"commits":["39ea15ba4c9b507e82d901c39d25ce91ab259abd"],"createdAt":"2025-12-03T08:55:24.890Z","updatedAt":"2025-12-03T15:20:22.350Z","closedAt":"2025-12-03T15:20:22.350Z","closeReason":"Already implemented in src/tools/tools-manager.ts with Effect-based auto-download for rg/fd"}
{"id":"oa-fb59bb","title":"Add pi-mono context compaction/backpressure for long sessions","description":"Port pi-mono's context compaction/backpressure to MechaCoder session manager so long-running runs trim history intelligently (keep tools/prompts relevant, drop noise) and avoid provider token overruns. Include tests/fixtures mirroring pi-mono behavior.","status":"closed","priority":1,"type":"task","labels":["pi-port","pi-mono","context","reliability"],"deps":[{"id":"oa-a4ed60","type":"parent-child"}],"commits":["846f99452d730a6aa4e41013852a59b79d56e9cc"],"createdAt":"2025-12-03T08:55:29.910Z","updatedAt":"2025-12-03T15:31:13.168Z","closedAt":"2025-12-03T15:31:13.168Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-e4dbfc","title":"Bridge pi-mono session JSONL import/export for run logs","description":"Add compatibility layer to import/export pi-mono JSONL session/run logs so MechaCoder can replay or analyze prior runs. Include schema mapping, validation, and tests covering roundtrips; no TUI export, just file-level tools.","status":"open","priority":2,"type":"task","labels":["pi-port","pi-mono","logging","sessions"],"deps":[{"id":"oa-a4ed60","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:55:34.991Z","updatedAt":"2025-12-03T08:55:34.991Z","closedAt":null}
{"id":"oa-9f0ac0","title":"Port pi-mono models registry generator (models.dev/OpenRouter) to OpenAgents","description":"Recreate pi-mono's model registry generation pipeline (models.dev/OpenRouter metadata → JSON) for MechaCoder, keeping Effect-friendly types and tests. Document how to refresh/pin models without TUI.","status":"closed","priority":2,"type":"task","labels":["pi-port","pi-mono","models","infra"],"deps":[{"id":"oa-a4ed60","type":"parent-child"}],"commits":["39ea15ba4c9b507e82d901c39d25ce91ab259abd"],"createdAt":"2025-12-03T08:55:39.913Z","updatedAt":"2025-12-03T15:20:23.937Z","closedAt":"2025-12-03T15:20:23.937Z","closeReason":"Already implemented in scripts/generate-models.ts with models.dev and OpenRouter integration"}
{"id":"oa-e3ad31","title":"Align provider retry/backoff with pi-mono defaults","description":"Audit provider error handling vs pi-mono and add standardized retry/backoff for rate limits/auth/server errors across OpenRouter/Anthropic/OpenAI/Gemini. Include config knobs and tests; keep automation-safe defaults.","status":"open","priority":2,"type":"task","labels":["pi-port","pi-mono","reliability","providers"],"deps":[{"id":"oa-a4ed60","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:55:44.613Z","updatedAt":"2025-12-03T08:55:44.613Z","closedAt":null}
{"id":"oa-60d305","title":"Port pi-mono log trimming/rotation for long agent runs","description":"Add pi-mono-style log trimming/rotation to prevent oversized run logs and transcript files during long MechaCoder sessions. Define limits, pruning rules, and tests to ensure critical events are retained while noise is dropped. No TUI work.","status":"open","priority":2,"type":"task","labels":["pi-port","pi-mono","logging","reliability"],"deps":[{"id":"oa-a4ed60","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:55:49.401Z","updatedAt":"2025-12-03T08:55:49.401Z","closedAt":null}
{"id":"oa-5f16d2","title":"Expose non-TUI status stream compatible with pi-mono RPC mode","description":"Provide a headless status/event stream (e.g., WebSocket/JSONL) mirroring pi-mono's RPC status updates so external supervisors can monitor MechaCoder without TUI. Include schema, auth, and a small integration test harness.","status":"open","priority":2,"type":"task","labels":["pi-port","pi-mono","hud","infra"],"deps":[{"id":"oa-a4ed60","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:55:54.332Z","updatedAt":"2025-12-03T08:55:54.332Z","closedAt":null}
{"id":"oa-a33e8e","title":"Epic: Maintenance hardening for MechaCoder repo","description":"Consolidate refactors and guardrails to keep MechaCoder/OpenAgents healthy: dependency auditing, stress harness, lint/format enforcement, task file integrity checks, and build health visibility.","status":"open","priority":2,"type":"epic","labels":["maintenance","infra","testing"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:57:44.363Z","updatedAt":"2025-12-03T08:57:44.363Z","closedAt":null}
{"id":"oa-f2c223","title":"Add automated dependency audit & update workflow","description":"Set up a recurring script/CI job to run dependency vulnerability/audit checks and produce a weekly diff (lockfile + summary). Include a safe update workflow for Bun deps and docs on how to apply/roll back. Keep it automation-friendly (no interactive prompts).","status":"open","priority":2,"type":"task","labels":["maintenance","deps","ci"],"deps":[{"id":"oa-a33e8e","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:57:50.148Z","updatedAt":"2025-12-03T08:57:50.148Z","closedAt":null}
{"id":"oa-f645d7","title":"Build orchestrator stress/chaos harness for reliability regressions","description":"Create a stress harness that runs orchestrator loops repeatedly against a stub repo with injected failures (git dirty, missing env, flaky tests) to surface race/cleanup bugs. Add assertions/metrics and wire into CI/nightly to catch regressions early.","status":"open","priority":2,"type":"task","labels":["maintenance","testing","reliability","orchestrator"],"deps":[{"id":"oa-a33e8e","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:57:55.112Z","updatedAt":"2025-12-03T08:57:55.112Z","closedAt":null}
{"id":"oa-101a29","title":"Enforce lint/format baseline for agent code (Effect-friendly)","description":"Adopt a repo-wide lint/format baseline (e.g., Biome/ESLint) tuned for Effect patterns and exactOptionalPropertyTypes. Add CI and fixer scripts, and document rules that replace ad-hoc linting. Ensure minimal friction for automation.","status":"open","priority":2,"type":"task","labels":["maintenance","lint","ci","dx"],"deps":[{"id":"oa-a33e8e","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:58:00.030Z","updatedAt":"2025-12-03T08:58:00.030Z","closedAt":null}
{"id":"oa-f5cbad","title":"Add guardrails for .openagents/tasks.jsonl integrity (skip-worktree, schema)","description":"Add a preflight/CI check that flags .openagents/tasks.jsonl being skip-worktree or schema-invalid before agent runs. Include a fixer/diagnostic script and docs so agents/users don’t silently miss task updates.","status":"open","priority":2,"type":"task","labels":["maintenance","tasks","ci","ops"],"deps":[{"id":"oa-a33e8e","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:58:05.010Z","updatedAt":"2025-12-03T08:58:05.010Z","closedAt":null}
{"id":"oa-b89d79","title":"Publish build health & coverage snapshot in docs","description":"Add a lightweight build health page (docs/ or README badge) summarizing latest test/typecheck results and coverage for critical agent modules. Automate updates via CI so maintainers see drift/regressions without digging into logs.","status":"open","priority":3,"type":"task","labels":["maintenance","docs","ci"],"deps":[{"id":"oa-a33e8e","type":"parent-child"}],"commits":[],"createdAt":"2025-12-03T08:58:09.911Z","updatedAt":"2025-12-03T08:58:09.911Z","closedAt":null}
{"id":"oa-safe01","title":"Add safe mode with self-healing for init script failures","description":"When init script fails (especially typecheck), try to self-heal before giving up.\n\n## Problem\nInit script typecheck failure → session aborts → retry 3x → same failure → give up.\nNo attempt to fix the issue automatically.\n\n## Solution Design\n1. Add `--safe-mode` flag to overnight agent\n2. In safe mode, when init script fails with typecheck error:\n   - Parse the init script output to detect typecheck failure\n   - Spawn a Claude Code emergency subtask: 'Fix all typecheck errors'\n   - Re-run init script to verify fix\n   - Continue if passes, abort if still fails\n3. For other failures (network, disk space), use degraded mode with warnings\n\n## Implementation\n- overnight.ts: Add --safe-mode flag and recovery logic\n- init-script.ts: Return structured error info (typecheck_failed, network_down, etc.)\n- orchestrator.ts: Handle recovery subtask before normal task selection\n\n## Test Cases\n- Init fails with typecheck → agent fixes it → continues\n- Init fails with network → warns and continues (if offlineMode allows)\n- Init fails with unknown error → abort after 3 tries (existing behavior)","status":"closed","priority":1,"type":"feature","labels":["resilience","safe-mode","self-healing"],"deps":[],"commits":["6a7ac14739921b17fe60782bbb811367b3764cb9"],"createdAt":"2025-12-03T16:00:00.000Z","updatedAt":"2025-12-03T16:25:11.246Z","closedAt":"2025-12-03T16:25:11.246Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-c78736","title":"Load AGENTS.md/CLAUDE.md context in overnight agent","description":"","status":"closed","priority":1,"type":"feature","labels":["mechacoder","context","overnight"],"deps":[],"commits":["926a500fc6632b920ec5813d94f7400ce7ee3665"],"createdAt":"2025-12-03T16:17:43.391Z","updatedAt":"2025-12-03T16:24:53.109Z","closedAt":"2025-12-03T16:24:53.109Z","closeReason":"Added --load-context flag to overnight agent. Context files (AGENTS.md/CLAUDE.md) are loaded from working directory and prepended to Claude Code prompts."}
{"id":"oa-a74c13","title":"Track and visualize agent usage metrics (tokens, cost)","description":"Track and visualize usage metrics from AI agents (Claude Code, OpenAI Codex, etc.) for cost monitoring and decision-making.\n\n## Current State\n\nClaude Code SDK already reports per-session:\n- Token usage: input_tokens, output_tokens, cache_read_input_tokens, cache_creation_input_tokens\n- Cost: total_cost_usd\n- Per-model breakdown via modelUsage dictionary\n\nOpenAgents already captures this in:\n- SubagentResult.sessionMetadata.usage and .totalCostUsd\n- SessionProgress written to progress.md (human-readable format)\n\n## What's Missing\n\n1. **Historical Storage**: Aggregate usage across sessions/days in a queryable format (e.g., .openagents/usage.jsonl or SQLite)\n\n2. **Session-Level Aggregation**: Sum all subtask usage within an orchestrator session\n\n3. **HUD Visualization**: Display usage metrics in the Electrobun HUD:\n   - Current session usage (tokens, cost)\n   - Daily/weekly usage trends\n   - Per-project breakdown\n\n4. **Reporting CLI**: `bun run usage:summary` to show usage by day/week/month\n\n## Suggested Schema\n\n```typescript\ninterface UsageRecord {\n  sessionId: string;\n  projectId: string;\n  timestamp: string;\n  inputTokens: number;\n  outputTokens: number;\n  cacheReadTokens: number;\n  cacheCreationTokens: number;\n  totalCostUsd: number;\n  agent: 'claude-code' | 'grok' | 'openai';\n  subtasks: number;\n  durationMs: number;\n}\n```\n\n## Implementation Steps\n\n1. Create src/usage/types.ts with UsageRecord schema\n2. Create src/usage/store.ts to append/query usage records\n3. Update orchestrator to write usage record at session end\n4. Add HUD message type for usage updates\n5. Add usage panel to Electrobun HUD\n6. Add usage:summary CLI command\n\n## Future: Decision Making\n\nOnce tracking is in place, can add:\n- Budget alerts (daily/weekly cost limits)\n- Automatic model downgrade when approaching limits\n- Usage-based task prioritization","status":"open","priority":2,"type":"feature","labels":["hud","usage","analytics","claude-code"],"deps":[],"commits":[],"createdAt":"2025-12-03T16:52:14.885Z","updatedAt":"2025-12-03T16:52:43.746Z","closedAt":null}
{"id":"oa-2f3ed6","title":"Orchestrator cleanup commit should not include failed work","description":"## Bug Description\n\nThe orchestrator's final cleanup commit does `git add -A` which commits ALL files, not just progress files. This bypasses the per-task commit guardrail.\n\n## What Happened\n\n1. Claude Code wrote files with TypeScript errors (emit.test.ts missing required Task fields)\n2. Orchestrator verification correctly failed and marked subtask as FAILED\n3. Per-task commit was correctly skipped (\"no meaningful work done\")\n4. **BUG**: Final cleanup commit did `git add -A && git commit` - pushing broken code!\n5. Subsequent runs failed at init script because broken code is now on disk AND committed\n\n## Root Cause\n\n```javascript\n// In overnight.ts - cleanup at end of loop\nexecSync(\"git add -A\", { cwd: config.workDir });\nexecSync(`git commit -m \"chore: update progress files and logs...\"`, ...);\n```\n\nThis adds ALL files, not just progress files.\n\n## Solutions\n\n### Option A: Selective add\nOnly add specific paths:\n```javascript\nexecSync(\"git add .openagents/progress.md docs/logs/\", { cwd });\n```\n\n### Option B: Revert on failure\nAfter a failed subtask, run `git checkout -- .` to discard uncommitted changes.\n\n### Option C: Run typecheck before cleanup commit\nBefore committing, run typecheck. If it fails, skip the commit.\n\n## Recommended\n\nOption B (revert on failure) is cleanest - failed work should never persist.","status":"closed","priority":0,"type":"bug","labels":["orchestrator","overnight","critical"],"deps":[],"commits":["96f1b8760f07cee5b7198557624eb31e419e6eae","217144506d5111b8f8aa083cfbfa150225eacc43"],"createdAt":"2025-12-03T16:56:26.678Z","updatedAt":"2025-12-03T17:05:03.507Z","closedAt":"2025-12-03T17:05:03.507Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-2fe6c8","title":"Full session tracking for replayability (like Claude ~/.claude/)","description":"## Problem\n\nWhen investigating overnight agent runs, the user has to manually paste logs to ask about what happened. We should be tracking ALL conversation data for FULL replayability.\n\n## Reference: Claude Code's Session Storage\n\nClaude Code stores sessions at `~/.claude/projects/<project-path>/<session-id>.jsonl`:\n- Each line is a complete JSON object with: type, message, uuid, parentUuid, timestamp, sessionId\n- Messages include full content (text + tool_use with ALL params)\n- Usage metrics with token counts and cache info\n- Parent UUIDs for threading/conversation structure\n\n## Current State\n\nOpenAgents has `.openagents/sessions/` with basic session tracking, but it doesn't capture:\n- Full tool call inputs\n- Full tool results (truncated currently)\n- Usage/cost metrics per message\n- Parent-child message linking for conversation structure\n- Session summary/metadata\n\n## Requirements\n\n1. **Session Storage Format**: Store sessions like Claude does:\n   - Per-project: `.openagents/sessions/<session-id>.jsonl`\n   - Each line: `{ type, message, uuid, parentUuid, timestamp, sessionId, usage }`\n   - Include FULL tool inputs (not truncated)\n   - Include tool results (configurable truncation)\n\n2. **Session Metadata**: Track:\n   - Task ID being worked on\n   - Start/end times\n   - Total turns, tokens, cost\n   - Outcome (success/failure/blocked)\n\n3. **Session Viewer CLI**:\n   - `bun run session:show <id>` - Pretty-print session\n   - `bun run session:replay <id>` - Step through with timing\n   - `bun run session:diff <id1> <id2>` - Compare sessions\n\n4. **Session Query**:\n   - `bun run session:list` - List recent sessions\n   - `bun run session:search <term>` - Search in sessions\n   - `bun run session:by-task <task-id>` - Find sessions for task\n\n## Implementation Notes\n\n- Use JSONL format for append-only writes during streaming\n- Keep sessions separate from tasks (sessions are transient, tasks are durable)\n- Consider compression for old sessions","status":"closed","priority":1,"type":"feature","labels":["overnight","observability","sessions"],"deps":[],"commits":["18a591cda00302b6a5777cf4142a28ba06eada48"],"createdAt":"2025-12-03T16:59:50.863Z","updatedAt":"2025-12-03T17:12:47.871Z","closedAt":"2025-12-03T17:12:47.871Z","closeReason":"Completed by MechaCoder orchestrator"}
{"id":"oa-e8fd78","title":"Log full tool call params in streaming output","description":"## Problem\n\nConsole output shows truncated tool calls:\n\\`\\`\\`\n[TOOL_USE] {\"tool\":\"TodoWrite\",\"id\":\"toolu_01BBkGhFbb5YhuMVww129SA5\"}\n\\`\\`\\`\n\nBut we need ALL params to debug agent behavior.\n\n## Current Code\n\nIn \\`src/agent/orchestrator/claude-code-subagent.ts\\`:\n\n\\`\\`\\`javascript\n// Line 326-327: At content_block_start (no input yet)\nconst toolJson = JSON.stringify({ tool: block.name, id: block.id }, null, 0);\noptions.onOutput(\\`\\\\n[TOOL_USE] \\${toolJson}\\\\n\\`);\n\n// Line 354-355: From complete message (has input)\nconst toolJson = JSON.stringify({ tool: block.name, id: block.id, input: block.input }, null, 0);\noptions.onOutput(\\`\\\\n[TOOL_USE] \\${toolJson}\\\\n\\`);\n\\`\\`\\`\n\nThe streaming version (line 326) doesn't have input yet because input arrives in \\`input_json_delta\\` chunks.\n\n## Fix Options\n\n1. **Buffer and log on block_stop**: \n   - Store tool_use info at content_block_start\n   - Accumulate input_json_delta chunks\n   - Log full tool_use at content_block_stop\n\n2. **Only use non-streaming path**:\n   - Skip the content_block_start log (line 327)\n   - Rely on the complete message path (line 354) which has all params\n   - Con: Logs appear later in the stream\n\n3. **Hybrid**:\n   - Log at content_block_start with just tool/id (fast feedback)\n   - Log again at block_stop with full params (for debugging)\n\n## Recommended\n\nOption 1 (buffer and log on block_stop) provides the best UX:\n- Shows tool usage at the right time in stream\n- Includes full params for debugging","status":"open","priority":2,"type":"task","labels":["overnight","observability","streaming"],"deps":[],"commits":[],"createdAt":"2025-12-03T17:00:10.888Z","updatedAt":"2025-12-03T17:00:10.888Z","closedAt":null}
{"id":"oa-3ceacd","title":"Container sandbox abstraction for MechaCoder","description":"","status":"closed","priority":1,"type":"epic","labels":["sandbox","containers","macos"],"deps":[],"commits":["d93d5215075ca477d5a8ea0c7a100c37522d1c62"],"createdAt":"2025-12-03T17:20:09.565Z","updatedAt":"2025-12-03T17:28:28.206Z","closedAt":"2025-12-03T17:28:28.206Z","closeReason":"Container sandbox abstraction layer complete - all 8 subtasks done"}
{"id":"oa-4bbd2d","title":"Create src/sandbox/schema.ts - ContainerConfig schema and ContainerError types","description":"","status":"closed","priority":1,"type":"task","labels":["sandbox"],"deps":[],"commits":["470e93cd2af75fb86aecc5024c9fe20b82123072"],"createdAt":"2025-12-03T17:20:21.871Z","updatedAt":"2025-12-03T17:21:20.305Z","closedAt":"2025-12-03T17:21:20.305Z","closeReason":"Created ContainerConfig schema and ContainerError types"}
{"id":"oa-b38b53","title":"Create src/sandbox/backend.ts - ContainerBackend Context.Tag interface","description":"","status":"closed","priority":1,"type":"task","labels":["sandbox"],"deps":[],"commits":["470e93cd2af75fb86aecc5024c9fe20b82123072"],"createdAt":"2025-12-03T17:20:24.023Z","updatedAt":"2025-12-03T17:21:36.619Z","closedAt":"2025-12-03T17:21:36.619Z","closeReason":"Created ContainerBackend interface and Context.Tag"}
{"id":"oa-0da36a","title":"Create src/sandbox/macos-container.ts - Apple Container CLI implementation","description":"","status":"closed","priority":1,"type":"task","labels":["sandbox","macos"],"deps":[],"commits":["470e93cd2af75fb86aecc5024c9fe20b82123072"],"createdAt":"2025-12-03T17:20:24.878Z","updatedAt":"2025-12-03T17:22:18.415Z","closedAt":"2025-12-03T17:22:18.415Z","closeReason":"Implemented Apple Container CLI backend with run and build methods"}
{"id":"oa-b7117d","title":"Create src/sandbox/detect.ts - Auto-detection of available backends","description":"","status":"closed","priority":1,"type":"task","labels":["sandbox"],"deps":[],"commits":["470e93cd2af75fb86aecc5024c9fe20b82123072"],"createdAt":"2025-12-03T17:20:26.058Z","updatedAt":"2025-12-03T17:22:36.003Z","closedAt":"2025-12-03T17:22:36.003Z","closeReason":"Created auto-detection with noopBackend fallback"}
{"id":"oa-1e899a","title":"Create src/sandbox/index.ts - Public API exports","description":"","status":"closed","priority":1,"type":"task","labels":["sandbox"],"deps":[],"commits":["470e93cd2af75fb86aecc5024c9fe20b82123072"],"createdAt":"2025-12-03T17:20:27.191Z","updatedAt":"2025-12-03T17:22:56.353Z","closedAt":"2025-12-03T17:22:56.353Z","closeReason":"Created public API with runInContainer, buildImage, isContainerAvailable"}
{"id":"oa-8a902b","title":"Create src/sandbox/macos-container.test.ts - Tests for macOS Container backend","description":"","status":"closed","priority":1,"type":"task","labels":["sandbox","testing"],"deps":[],"commits":["d93d5215075ca477d5a8ea0c7a100c37522d1c62"],"createdAt":"2025-12-03T17:20:28.121Z","updatedAt":"2025-12-03T17:26:22.467Z","closedAt":"2025-12-03T17:26:22.467Z","closeReason":"Tests pass - macOSContainerLive uses BunContext.layer"}
{"id":"oa-c0ce1d","title":"Update ProjectConfig schema with sandbox config","description":"","status":"closed","priority":2,"type":"task","labels":["sandbox"],"deps":[],"commits":["d93d5215075ca477d5a8ea0c7a100c37522d1c62"],"createdAt":"2025-12-03T17:20:29.471Z","updatedAt":"2025-12-03T17:27:46.944Z","closedAt":"2025-12-03T17:27:46.944Z","closeReason":"Added SandboxConfig schema to ProjectConfig"}
{"id":"oa-b0f202","title":"Update docs/claude/plans/containers.md with implementation status","description":"","status":"closed","priority":3,"type":"task","labels":["docs","sandbox"],"deps":[],"commits":["d93d5215075ca477d5a8ea0c7a100c37522d1c62"],"createdAt":"2025-12-03T17:20:30.612Z","updatedAt":"2025-12-03T17:28:23.122Z","closedAt":"2025-12-03T17:28:23.122Z","closeReason":"Added implementation status section to containers.md"}
{"id":"oa-704490","title":"Handle sandbox typecheck failures blocking agent runs","description":"`bun run typecheck` currently fails in src/sandbox/macos-container.ts (unused ContainerConfig import, missing Effect context, and ContainerRunResult mismatch), which causes .openagents/init.sh preflight and orchestrator verification to abort tasks. This broke oa-7a5884 when sandbox work was in-progress. Potential fixes: (1) fix macOS backend types so run returns ContainerRunResult with unknown context and remove unused import; (2) temporarily exclude sandbox from typecheck/build while the backend is incomplete; (3) gate sandbox code behind a feature flag/optional build step; (4) make init.sh/verification warning-only or opt-out for sandbox typecheck failures when sandbox isn’t used.","status":"open","priority":1,"type":"bug","labels":["sandbox","typecheck","agent"],"deps":[],"commits":[],"createdAt":"2025-12-03T17:27:13.025Z","updatedAt":"2025-12-03T17:27:13.025Z","closedAt":null}
{"id":"oa-596f47","title":"Add container bootstrap CLI for downloading/installing container runtime","description":"","status":"closed","priority":1,"type":"feature","labels":["sandbox","cli"],"deps":[],"commits":["2a435eca4d63ac5c626ceebc3d096d442b97e71f"],"createdAt":"2025-12-03T17:36:05.794Z","updatedAt":"2025-12-03T17:36:13.228Z","closedAt":"2025-12-03T17:36:13.228Z","closeReason":"Implemented bootstrap.ts and cli.ts - tested with real containers"}
{"id":"oa-0f4cca","title":"Create worktree.ts - Core worktree management","description":"","status":"closed","priority":1,"type":"task","labels":["parallel","worktree"],"deps":[],"commits":["36dbec33a6ea91b7c2f3a67e16d8913a33d6574f"],"createdAt":"2025-12-03T17:47:38.317Z","updatedAt":"2025-12-03T17:50:31.109Z","closedAt":"2025-12-03T17:50:31.109Z","closeReason":"Created worktree.ts with Effect-based git worktree management"}
{"id":"oa-d8e76f","title":"Create worktree.test.ts - Worktree tests","description":"","status":"closed","priority":1,"type":"task","labels":["parallel","worktree","test"],"deps":[],"commits":["36dbec33a6ea91b7c2f3a67e16d8913a33d6574f"],"createdAt":"2025-12-03T17:47:39.248Z","updatedAt":"2025-12-03T17:50:31.963Z","closedAt":"2025-12-03T17:50:31.963Z","closeReason":"Created worktree.test.ts - 10 tests passing"}
{"id":"oa-8b68cb","title":"Modify agent-lock.ts for per-worktree locking","description":"","status":"closed","priority":1,"type":"task","labels":["parallel","worktree"],"deps":[],"commits":["36dbec33a6ea91b7c2f3a67e16d8913a33d6574f"],"createdAt":"2025-12-03T17:47:40.266Z","updatedAt":"2025-12-03T17:52:19.577Z","closedAt":"2025-12-03T17:52:19.577Z","closeReason":"Added per-worktree locking: acquireWorktreeLock, releaseWorktreeLock, listWorktreeLocks, pruneWorktreeLocks, createWorktreeLockGuard. 47 tests passing."}
{"id":"oa-9ccb21","title":"Create parallel-runner.ts - N-agent coordination","description":"","status":"closed","priority":1,"type":"task","labels":["parallel","worktree"],"deps":[],"commits":["36dbec33a6ea91b7c2f3a67e16d8913a33d6574f"],"createdAt":"2025-12-03T17:47:41.761Z","updatedAt":"2025-12-03T17:53:51.088Z","closedAt":"2025-12-03T17:53:51.088Z","closeReason":"Created parallel-runner.ts with N-agent coordination, merge strategy selection, worktree lifecycle, and placeholder agent execution"}
{"id":"oa-c81f21","title":"Add ParallelExecutionConfig to schema.ts","description":"","status":"closed","priority":1,"type":"task","labels":["parallel","schema"],"deps":[],"commits":["36dbec33a6ea91b7c2f3a67e16d8913a33d6574f"],"createdAt":"2025-12-03T17:47:43.816Z","updatedAt":"2025-12-03T17:54:53.642Z","closedAt":"2025-12-03T17:54:53.642Z","closeReason":"Added ParallelExecutionConfig and MergeStrategy schemas with all options: enabled, maxAgents, worktreeTimeout, useContainers, mergeStrategy, mergeThreshold, prThreshold"}
{"id":"oa-cfcdd4","title":"Add CLI commands for worktrees","description":"","status":"closed","priority":1,"type":"task","labels":["parallel","cli"],"deps":[],"commits":["36dbec33a6ea91b7c2f3a67e16d8913a33d6574f"],"createdAt":"2025-12-03T17:47:44.835Z","updatedAt":"2025-12-03T17:56:03.556Z","closedAt":"2025-12-03T17:56:03.556Z","closeReason":"Created orchestrator CLI with worktrees list/prune and locks list/prune commands"}
{"id":"oa-b022d5","title":"Add .worktrees to .gitignore","description":"","status":"open","priority":1,"type":"chore","labels":["worktree","test"],"deps":[],"commits":[],"createdAt":"2025-12-03T17:59:45.513Z","updatedAt":"2025-12-03T17:59:45.513Z","closedAt":null}
{"id":"oa-ec348d","title":"Implement APM measurement system for MechaCoder","description":"","status":"closed","priority":1,"type":"feature","labels":["apm","metrics","golden-loop"],"deps":[],"commits":["f7800338b288c6d300702474fcb54947772f78e0"],"createdAt":"2025-12-03T18:35:10.129Z","updatedAt":"2025-12-03T18:40:52.398Z","closedAt":"2025-12-03T18:40:52.398Z","closeReason":"APM measurement system implemented - MechaCoder is 4.22x more efficient than direct Claude Code usage"}
{"id":"oa-4cbc15","title":"Create src/agent/apm.ts - Core APM types and collector","description":"","status":"closed","priority":1,"type":"task","labels":["apm"],"deps":[],"commits":["7e020cf4e8459109bb0d59bcb44537fa7f8bcc6c"],"createdAt":"2025-12-03T18:35:21.516Z","updatedAt":"2025-12-03T18:40:17.823Z","closedAt":"2025-12-03T18:40:17.823Z","closeReason":"Created src/agent/apm.ts with core APM types and collector"}
{"id":"oa-d2ad64","title":"Create src/agent/apm-parser.ts - Claude Code conversation parser","description":"","status":"closed","priority":1,"type":"task","labels":["apm"],"deps":[],"commits":["7e020cf4e8459109bb0d59bcb44537fa7f8bcc6c"],"createdAt":"2025-12-03T18:35:22.980Z","updatedAt":"2025-12-03T18:40:19.436Z","closedAt":"2025-12-03T18:40:19.436Z","closeReason":"Created src/agent/apm-parser.ts with Claude Code conversation parser"}
{"id":"oa-20d3d1","title":"Create src/cli/apm.ts - CLI command for APM stats","description":"","status":"closed","priority":2,"type":"task","labels":["apm","cli"],"deps":[],"commits":["7e020cf4e8459109bb0d59bcb44537fa7f8bcc6c"],"createdAt":"2025-12-03T18:35:23.937Z","updatedAt":"2025-12-03T18:40:20.810Z","closedAt":"2025-12-03T18:40:20.810Z","closeReason":"Created src/cli/apm.ts CLI command"}
{"id":"oa-5a59e1","title":"Integrate APM collector into overnight.ts orchestrator","description":"","status":"closed","priority":2,"type":"task","labels":["apm","orchestrator"],"deps":[],"commits":["f7800338b288c6d300702474fcb54947772f78e0"],"createdAt":"2025-12-03T18:35:25.578Z","updatedAt":"2025-12-03T18:44:50.152Z","closedAt":"2025-12-03T18:44:50.152Z","closeReason":"Integrated APMCollector into overnight.ts orchestrator"}
{"id":"oa-710f93","title":"Add APM message types to HUD protocol","description":"","status":"closed","priority":3,"type":"task","labels":["apm","hud"],"deps":[],"commits":["f7800338b288c6d300702474fcb54947772f78e0"],"createdAt":"2025-12-03T18:35:26.803Z","updatedAt":"2025-12-03T18:43:10.505Z","closedAt":"2025-12-03T18:43:10.505Z","closeReason":"Added APM message types to HUD protocol (APMUpdateMessage, APMSnapshotMessage, APMToolUsageMessage)"}
{"id":"oa-7b4925","title":"Create docs/apm.md - APM specification document","description":"","status":"closed","priority":3,"type":"task","labels":["apm","docs"],"deps":[],"commits":["7e020cf4e8459109bb0d59bcb44537fa7f8bcc6c"],"createdAt":"2025-12-03T18:35:27.888Z","updatedAt":"2025-12-03T18:40:21.855Z","closedAt":"2025-12-03T18:40:21.855Z","closeReason":"Created docs/apm.md specification"}
{"id":"oa-2248cf","title":"Create APM emitter helpers in src/hud/emit.ts","description":"","status":"closed","priority":2,"type":"task","labels":["apm","hud"],"deps":[],"commits":["f7800338b288c6d300702474fcb54947772f78e0"],"createdAt":"2025-12-03T18:43:12.780Z","updatedAt":"2025-12-03T18:44:52.462Z","closedAt":"2025-12-03T18:44:52.462Z","closeReason":"Created createAPMEmitter and sendAPMSnapshot helpers in emit.ts"}
{"id":"oa-25ca85","title":"Build APM widget in Electrobun HUD mainview","description":"","status":"closed","priority":3,"type":"task","labels":["apm","hud","electrobun"],"deps":[],"commits":["a2ee60917b0c3461044f0be22dc14b971be9b15a"],"createdAt":"2025-12-03T18:43:13.699Z","updatedAt":"2025-12-03T18:52:58.848Z","closedAt":"2025-12-03T18:52:58.848Z","closeReason":"APM SVG widget implemented in mainview/index.ts with state management, color coding, and message handling"}
{"id":"oa-f83a01","title":"Add parallel overnight CLI for MechaCoder","description":"Create a CLI entry point (overnight-parallel.ts) that runs multiple MechaCoder agents in parallel across isolated git worktrees. Should accept --max-agents N to control parallelism and --max-tasks to limit total work. Uses the existing parallel-runner.ts library.","status":"closed","priority":1,"type":"feature","labels":["mechacoder","parallel","worktree"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:30:00.000Z","updatedAt":"2025-12-03T19:45:00.000Z","closedAt":"2025-12-03T19:45:00.000Z","closeReason":"Created overnight-parallel.ts with --max-agents and --max-tasks support"}
{"id":"oa-f83a02","title":"Add npm scripts for parallel mechacoder","description":"Add package.json scripts: mechacoder:parallel and mechacoder:parallel:cc-only that invoke the new parallel overnight CLI.","status":"closed","priority":2,"type":"chore","labels":["mechacoder","parallel"],"deps":[{"id":"oa-f83a01","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T19:30:00.000Z","updatedAt":"2025-12-03T19:45:00.000Z","closedAt":"2025-12-03T19:45:00.000Z","closeReason":"Added mechacoder:parallel and mechacoder:parallel:cc-only scripts"}
{"id":"oa-99a12b","title":"Set up Playwright E2E infrastructure","description":"","status":"closed","priority":0,"type":"feature","labels":["e2e","playwright","infrastructure"],"deps":[],"commits":["4ca093d906a5c24cf146d2967c08888b27b59140"],"createdAt":"2025-12-03T19:08:25.189Z","updatedAt":"2025-12-03T19:19:21.681Z","closedAt":"2025-12-03T19:19:21.681Z","closeReason":"Playwright infrastructure complete: config, test server, scripts"}
{"id":"oa-ab3fe3","title":"Create E2E test fixtures and helpers","description":"","status":"closed","priority":0,"type":"feature","labels":["e2e","playwright","fixtures"],"deps":[],"commits":["4ca093d906a5c24cf146d2967c08888b27b59140"],"createdAt":"2025-12-03T19:08:37.028Z","updatedAt":"2025-12-03T19:19:23.406Z","closedAt":"2025-12-03T19:19:23.406Z","closeReason":"Fixtures complete: hud-messages.ts, mainview.fixture.ts"}
{"id":"oa-5c215f","title":"Implement visual/layout E2E tests (A1-A7)","description":"","status":"closed","priority":0,"type":"feature","labels":["e2e","playwright","visual"],"deps":[],"commits":["4ca093d906a5c24cf146d2967c08888b27b59140"],"createdAt":"2025-12-03T19:08:38.195Z","updatedAt":"2025-12-03T19:19:25.480Z","closedAt":"2025-12-03T19:19:25.480Z","closeReason":"Visual tests A1-A7 implemented in render.spec.ts"}
{"id":"oa-3c42f5","title":"Implement interaction E2E tests (B1-B7)","description":"","status":"closed","priority":0,"type":"feature","labels":["e2e","playwright","interactions"],"deps":[],"commits":["4ca093d906a5c24cf146d2967c08888b27b59140"],"createdAt":"2025-12-03T19:08:39.206Z","updatedAt":"2025-12-03T19:19:26.514Z","closedAt":"2025-12-03T19:19:26.514Z","closeReason":"Interaction tests B1-B7 implemented in canvas.spec.ts"}
{"id":"oa-60c161","title":"Implement error handling E2E tests (D1-D6)","description":"","status":"closed","priority":0,"type":"feature","labels":["e2e","playwright","errors"],"deps":[],"commits":["4ca093d906a5c24cf146d2967c08888b27b59140"],"createdAt":"2025-12-03T19:08:41.390Z","updatedAt":"2025-12-03T19:19:28.335Z","closedAt":"2025-12-03T19:19:28.335Z","closeReason":"Error handling tests D1-D6 implemented in error-handling.spec.ts"}
{"id":"oa-6a6c11","title":"Implement real-time update E2E tests (C1-C10)","description":"","status":"open","priority":1,"type":"feature","labels":["e2e","playwright","realtime","websocket"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:08:42.924Z","updatedAt":"2025-12-03T19:08:42.924Z","closedAt":null}
{"id":"oa-d2bb02","title":"Implement integration E2E tests (E1-E5)","description":"","status":"open","priority":1,"type":"feature","labels":["e2e","playwright","integration"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:08:44.445Z","updatedAt":"2025-12-03T19:08:44.445Z","closedAt":null}
{"id":"oa-92a681","title":"Implement desktop screenshot E2E tests","description":"","status":"open","priority":1,"type":"feature","labels":["e2e","playwright","desktop","screenshots"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:08:45.661Z","updatedAt":"2025-12-03T19:08:45.661Z","closedAt":null}
{"id":"oa-5c3445","title":"Wire sandbox backend into orchestrator runtime","description":"If project.sandbox.enabled is true, run Golden Loop inside the container backend: wrap subagents in runInContainer using project.sandbox config. Start with minimal subagent; after oa-704490 is fixed, run Claude Code path in-container as well. Ensure progress/tasks/logs paths map correctly, verification still runs inside the container, and host-only fallback is available when sandbox is disabled.","status":"open","priority":1,"type":"feature","labels":["sandbox","mechacoder","orchestrator"],"deps":[{"id":"oa-704490","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T19:24:25.431Z","updatedAt":"2025-12-03T19:24:25.431Z","closedAt":null}
{"id":"oa-28451f","title":"Enable orchestrator parallel mode with worktrees","description":"Hook ParallelExecutionConfig + parallel-runner into the orchestrator: when parallelExecution.enabled, spin up N worktrees, schedule tasks through parallel-runner, and enforce Golden Loop invariants per worktree (test/typecheck/commit/push/close). Handle merge strategy (direct/queue/pr) from config and ensure cleanup of worktrees/locks.","status":"open","priority":1,"type":"feature","labels":["parallel","worktree","mechacoder","orchestrator"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:24:31.255Z","updatedAt":"2025-12-03T19:24:31.255Z","closedAt":null}
{"id":"oa-cbe13d","title":"Add Golden Loop parallel regression test","description":"Create a stub repo + .openagents config with parallelExecution.enabled and a few ready tasks, run the orchestrator in parallel mode, and assert tasks close on expected branches with no dirty main. Include CI-friendly test harness that exercises worktree lifecycle and merge strategy basics.","status":"open","priority":2,"type":"task","labels":["tests","parallel","worktree","golden-loop","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:24:36.641Z","updatedAt":"2025-12-03T19:24:36.641Z","closedAt":null}
{"id":"oa-db46e6","title":"Document LLM provider precedence (Claude Code first)","description":"Update GOLDEN-LOOP-v2.md and AGENTS.md to state provider precedence: Claude Code is primary for coding subagents, minimal subagent as fallback, and Grok/OpenRouter used only as legacy/explicit fallback. Clarify CLI/config flags for legacy mode.","status":"open","priority":3,"type":"task","labels":["docs","golden-loop","claude-code","llm"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:24:40.970Z","updatedAt":"2025-12-03T19:24:40.970Z","closedAt":null}
{"id":"oa-22017b","title":"E2E: Playwright test infrastructure and basic smoke test","description":"Ensure Playwright is properly configured and can run a basic smoke test. Covers: HUD-001 (app launch), HUD-002 (flow diagram renders), HUD-010 (canvas pan), HUD-012 (reset view). Test server should serve mainview, WebSocket should connect, basic interactions should work.","status":"closed","priority":0,"type":"task","labels":["e2e","testing","p0"],"deps":[],"commits":["827d49af33d0ba4b75358fa98bb771de0320fc50"],"createdAt":"2025-12-03T19:32:54.488Z","updatedAt":"2025-12-03T19:47:45.104Z","closedAt":"2025-12-03T19:47:45.104Z","closeReason":"Implemented Playwright smoke test"}
{"id":"oa-c21ca0","title":"E2E: Basic UI load and canvas interactions","description":"Test that user can see UI load with basic buttons and interact with canvas. Covers: HUD-010 (pan canvas), HUD-011 (zoom with wheel), HUD-012 (reset view button), HUD-014 (zoom limits). Verify zoom percentage display, cursor changes, and button responsiveness.","status":"open","priority":0,"type":"task","labels":["e2e","testing","hud","p0"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:32:56.610Z","updatedAt":"2025-12-03T19:32:56.610Z","closedAt":null}
{"id":"oa-91f147","title":"E2E: Error handling and resilience tests","description":"Test app resilience to errors and malformed data. Covers: HUD-060 (no crash on WS disconnect), HUD-061 (malformed messages handled), HUD-062 (error indicators visible), HUD-063 (recovery from multiple errors). Inject bad data via test server and verify graceful degradation.","status":"open","priority":0,"type":"task","labels":["e2e","testing","hud","p0"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:32:58.049Z","updatedAt":"2025-12-03T19:32:58.049Z","closedAt":null}
{"id":"oa-9489d0","title":"E2E: Add headed mode option to see tests run visually","description":"Add option to run Playwright tests in headed (non-headless) mode so users can watch the browser during test execution. Should support: 1) CLI flag like 'bun run e2e:test:headed' or '--headed', 2) Slow-mo option to see interactions step-by-step, 3) Debug mode with Playwright inspector. Update package.json with convenience scripts. Covers developer experience for debugging E2E tests.","status":"open","priority":1,"type":"task","labels":["e2e","testing","dx"],"deps":[],"commits":[],"createdAt":"2025-12-03T19:42:23.699Z","updatedAt":"2025-12-03T19:42:23.699Z","closedAt":null}
