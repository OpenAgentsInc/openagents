{"id":"oa-281868","title":"Implement tasks CLI (tasks:init, tasks:list, tasks:ready)","description":"Create a CLI wrapper around TaskService/ProjectService for external agents.\n\nCommands to implement:\n- tasks:init - Initialize .openagents for a repo\n- tasks:list - List tasks with filters, output JSON\n- tasks:ready - List ready tasks (no open blockers)\n\nThe CLI should accept flags and output JSON for machine parsing.\nSee docs/mechacoder/TASK-SPEC.md for full spec.","status":"closed","priority":1,"type":"task","labels":["cli","task-system"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:36:30.684Z","updatedAt":"2025-12-02T18:36:54.515Z","closedAt":"2025-12-02T18:36:54.515Z","closeReason":"Implemented tasks CLI with init, list, ready, next, create, update commands"}
{"id":"oa-ab3cfc","title":"Implement tasks CLI (tasks:next, tasks:create, tasks:update)","description":"Continue CLI implementation with remaining commands:\n\n- tasks:next - Atomically pick next ready task, mark in_progress, return it\n- tasks:create - Create new task from flags or JSON stdin\n- tasks:update - Update/close task from JSON stdin\n\nThese commands enable external agents (Claude Code, Codex) to interact with the task system.\nSee docs/mechacoder/TASK-SPEC.md for full spec.","status":"closed","priority":1,"type":"task","labels":["cli","task-system"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:36:30.686Z","updatedAt":"2025-12-02T18:36:54.667Z","closedAt":"2025-12-02T18:36:54.667Z","closeReason":"Implemented tasks CLI with init, list, ready, next, create, update commands"}
{"id":"oa-a2d2a1","title":"Add package.json scripts for tasks CLI","description":"Add npm scripts to package.json for the tasks CLI:\n\n```json\n{\n  \"scripts\": {\n    \"tasks:init\": \"bun src/tasks/cli.ts init\",\n    \"tasks:list\": \"bun src/tasks/cli.ts list\",\n    \"tasks:ready\": \"bun src/tasks/cli.ts ready\",\n    \"tasks:next\": \"bun src/tasks/cli.ts next\",\n    \"tasks:create\": \"bun src/tasks/cli.ts create\",\n    \"tasks:update\": \"bun src/tasks/cli.ts update\"\n  }\n}\n```\n\nThis enables external agents to use `bun run tasks:*` commands.","status":"closed","priority":2,"type":"task","labels":["cli","task-system"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:36:30.686Z","updatedAt":"2025-12-02T18:36:54.827Z","closedAt":"2025-12-02T18:36:54.827Z","closeReason":"Added package.json scripts for tasks CLI"}
{"id":"oa-ba2bbc","title":"Document task CLI usage in AGENTS.md","description":"Add a section to AGENTS.md explaining how to use the tasks CLI:\n\n- When to use CLI vs TaskService directly\n- Example commands for external agents\n- JSON input/output formats\n- Link to TASK-SPEC.md for full details","status":"closed","priority":2,"type":"task","labels":["docs","task-system"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:36:30.687Z","updatedAt":"2025-12-02T18:36:55.023Z","closedAt":"2025-12-02T18:36:55.023Z","closeReason":"Documented task CLI usage in AGENTS.md"}
{"id":"oa-c9003e","title":"Add OPENAGENTS-TASKS-SPEC link to mechacoder README","description":"","status":"closed","priority":2,"type":"task","labels":["docs","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:44:57.396Z","updatedAt":"2025-12-02T18:53:50.622Z","closedAt":"2025-12-02T18:53:50.622Z","closeReason":"Added TASK-SPEC.md link to mechacoder README"}
{"id":"oa-c9db6e","title":"Add example do-one-task usage to MECHACODER-OPS","description":"","status":"closed","priority":2,"type":"task","labels":["docs","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-02T18:44:57.585Z","updatedAt":"2025-12-02T18:53:50.814Z","closedAt":"2025-12-02T18:53:50.814Z","closeReason":"Added do-one-task and overnight examples to MECHACODER-OPS quick reference"}
{"id":"oa-73016a","title":"Add minimal MechaCoder desktop demo task for Golden Loop v2","description":"Create a simple demo task that MechaCoder can complete to prove Golden Loop v2 works. This could be adding a trivial comment or updating a version string.","status":"closed","priority":1,"type":"task","labels":["golden-loop","demo"],"deps":[],"commits":["8b17612185f12efc664aea29f9d6a28fa08aa5fb"],"createdAt":"2025-12-02T18:44:57.770Z","updatedAt":"2025-12-02T18:50:09.431Z","closedAt":"2025-12-02T18:50:09.431Z","closeReason":"Golden Loop v2 demo completed - version bump in package.json and electrobun.config.ts"}
{"id":"oa-b78d3f","title":"HUD-1: Flow model types + sample data","description":"Define FlowNode/PositionedNode/Connection/Point and related types in src/flow/model.ts. Add src/flow/sample-data.ts with a MechaCoder factory tree matching docs/hud/flow.md (root -> MechaCoder -> repos -> tasks -> phases).","status":"closed","priority":1,"type":"task","labels":["hud","flow","model"],"deps":[],"commits":["35f8d4e5fd9c93902731fa6f8cf46bf2007ec117"],"createdAt":"2025-12-02T19:14:00.804Z","updatedAt":"2025-12-02T19:21:31.247Z","closedAt":"2025-12-02T19:21:31.247Z","closeReason":"Implemented Flow model types + sample data"}
{"id":"oa-138548","title":"HUD-2: Flow layout engine (calculateLayout)","description":"Implement src/flow/layout.ts with calculateLayout(LayoutInput): LayoutOutput. Use LayoutConfig + Direction, compute subtree sizes and positions, and produce nodes + connections. Fail-fast on missing sizes or invalid trees. Add unit tests for small sample trees.","status":"closed","priority":1,"type":"task","labels":["hud","flow","layout"],"deps":[],"commits":["29e84b304dd0f0eef1c09ce8089a8629262c2b08"],"createdAt":"2025-12-02T19:14:00.953Z","updatedAt":"2025-12-02T19:51:20.490Z","closedAt":"2025-12-02T19:51:20.490Z","closeReason":"Implemented Flow layout engine with calculateLayout function and 9 unit tests"}
{"id":"oa-91a779","title":"HUD-3: Flow connection path builder","description":"Implement src/flow/path.ts with buildRoundedPath(points, config) -> SVG path string. Detect corners and apply cornerRadius. Add tests with snapshot-style assertions for simple polylines.","status":"closed","priority":2,"type":"task","labels":["hud","flow","path"],"deps":[],"commits":["02ee7a5266619ecb62b8e4663222aa306164b89c"],"createdAt":"2025-12-02T19:14:01.109Z","updatedAt":"2025-12-02T20:19:05.676Z","closedAt":"2025-12-02T20:19:05.676Z","closeReason":"Implemented buildRoundedPath for SVG path generation with rounded corners"}
{"id":"oa-5fc569","title":"HUD-4: Canvas state reducer (pan/zoom)","description":"Implement src/flow/canvas.ts with CanvasState/CanvasEvent/CanvasConfig and reduceCanvasState. Support PAN_START/PAN_MOVE/PAN_END/ZOOM/RESET and basic inertial panning. Add tests for zoom-around-pointer and pan behavior.","status":"closed","priority":2,"type":"task","labels":["hud","flow","canvas"],"deps":[],"commits":["4b0b01261c57364603d8d84e0f1a3f30db023204"],"createdAt":"2025-12-02T19:14:01.266Z","updatedAt":"2025-12-02T20:56:46.789Z","closedAt":"2025-12-02T20:56:46.789Z","closeReason":"Implemented canvas reducer with pan/zoom/inertia"}
{"id":"oa-6ee331","title":"HUD-5: MechaCoder state to FlowNode tree","description":"Implement src/flow/mechacoder-map.ts. Define MechaCoderState (derived from .openagents/tasks.jsonl + recent run logs) and buildMechaCoderFlowTree(state): FlowNode. Add fixtures/tests that mirror the example tree in docs/hud/flow.md.","status":"closed","priority":2,"type":"task","labels":["hud","flow","mechacoder"],"deps":[],"commits":["c9294e6c44a1d55624e5575a32066c1cd6bbd4b8"],"createdAt":"2025-12-02T19:14:01.418Z","updatedAt":"2025-12-02T21:00:24.072Z","closedAt":"2025-12-02T21:00:24.072Z","closeReason":"Implemented MechaCoder state to FlowNode tree mapping"}
{"id":"oa-4e4f76","title":"HUD-6: Minimal SVG host renderer for Flow layout","description":"Implement src/flow-host-svg/render.ts that takes LayoutOutput + CanvasState and returns a minimal SVG representation (nodes as boxes, connections as paths). No React required; pure functions returning descriptor objects. Add example usage wired to sample-data.ts.","status":"closed","priority":3,"type":"task","labels":["hud","flow","host","svg"],"deps":[],"commits":["39a18b3e03138d5db4b05e5be9c040feafc9d730"],"createdAt":"2025-12-02T19:14:01.569Z","updatedAt":"2025-12-02T21:03:53.959Z","closedAt":"2025-12-02T21:03:53.959Z","closeReason":"Implemented minimal SVG host renderer"}
{"id":"oa-5b9b22","title":"HUD-docs: add Flow section link to README","description":"Update README.md to add a link to the HUD spec (docs/hud/flow.md) under a new 'HUD Flow Editor' section. Just add a one-line description and a link, nothing fancy.","status":"closed","priority":2,"type":"task","labels":["hud","docs"],"deps":[],"commits":[],"createdAt":"2025-12-02T20:06:04.357Z","updatedAt":"2025-12-02T20:19:05.830Z","closedAt":"2025-12-02T20:19:05.830Z","closeReason":"Superseded - used HUD-3 for testing instead"}
{"id":"oa-98ee2b","title":"HUD-7: Integrate flow HUD into Electrobun mainview","description":"Wire the flow HUD into the desktop app so it renders in the Electrobun mainview. Use the layout/path/canvas/mechacoder-map modules to render either sample-data.ts or the live MechaCoder state tree. Include a minimal SVG host view with pan/zoom and rounded connection paths, and a simple entry point in src/mainview that mounts the renderer and shows the HUD on app launch. Verify it runs under the dev build.","status":"closed","priority":2,"type":"feature","labels":["hud","ui","flow","electrobun"],"deps":[{"id":"oa-6ee331","type":"blocks"},{"id":"oa-4e4f76","type":"blocks"}],"commits":["f4e34d3826e516bef48fcff826e23b946cb0cb60"],"createdAt":"2025-12-02T21:01:38.081Z","updatedAt":"2025-12-02T21:09:52.236Z","closedAt":"2025-12-02T21:09:52.236Z","closeReason":"Integrated flow HUD into Electrobun mainview with pan/zoom"}
{"id":"oa-1a7f58","title":"HUD-8: MechaCoder state snapshot from .openagents","description":"Build a MechaCoder state loader that reads real project data (at least .openagents/tasks.jsonl and recent docs/logs run logs) and produces a MechaCoderState object usable by mechacoder-map/buildMechaCoderFlowTree. Include task status rollups, deps, and last-run info where available. Expose a function/service that returns the latest snapshot (poll or on-demand) for consumption by the HUD.","status":"closed","priority":1,"type":"feature","labels":["hud","flow","mechacoder","data"],"deps":[{"id":"oa-6ee331","type":"blocks"}],"commits":["8cb2bc78763fa3bfd1341dba7da5ebd30bb63af1"],"createdAt":"2025-12-02T21:02:03.082Z","updatedAt":"2025-12-02T23:24:23.214Z","closedAt":"2025-12-02T23:24:23.214Z","closeReason":"Added MechaCoder state snapshot loader for HUD"}
{"id":"oa-924781","title":"HUD-9: Live HUD data pipeline in Electrobun","description":"Plumb the MechaCoder state snapshot into the Electrobun mainview HUD so it reflects real data instead of sample trees. Wire the state loader (HUD-8) into the mainview integration (HUD-7), add polling or file-watch over .openagents/tasks.jsonl and docs/logs to refresh, and update the SVG host when state changes. Ensure it degrades gracefully if files are missing and verify the HUD shows current tasks/phases when running the app in dev mode.","status":"closed","priority":1,"type":"feature","labels":["hud","ui","flow","electrobun","mechacoder"],"deps":[{"id":"oa-98ee2b","type":"blocks"},{"id":"oa-1a7f58","type":"blocks"},{"id":"oa-6ee331","type":"blocks"},{"id":"oa-4e4f76","type":"blocks"}],"commits":["d6f6875c48ed9927e0d672f0268a17dd77468912"],"createdAt":"2025-12-02T21:02:09.498Z","updatedAt":"2025-12-02T23:29:36.678Z","closedAt":"2025-12-02T23:29:36.678Z","closeReason":"Live HUD uses MechaCoder state loader"}
{"id":"oa-b18af7","title":"HUD-7a: Polish flow HUD styling","description":"","status":"closed","priority":1,"type":"task","labels":["hud","styling"],"deps":[],"commits":["20eb54b06ad82cea9ae35af23be7da27d749fd06"],"createdAt":"2025-12-02T21:21:14.009Z","updatedAt":"2025-12-02T21:21:36.840Z","closedAt":"2025-12-02T21:21:36.840Z","closeReason":"Polished styling with Unkey-inspired theme"}
{"id":"oa-8052d4","title":"HUD-7b: Revamp flow node styling closer to Unkey","description":"Improve HUD node visuals to match Unkey’s flow editor: redesign node cards, connection styling, and backgrounds; add grid background similar to Unkey; reference external designs (unkey repo docs/flow-editor-architecture.md, flow-editor-summary.md, and oapreclean AgentNode component) and build updated look for nodes.","status":"closed","priority":1,"type":"task","labels":["hud","ui","styling"],"deps":[],"commits":[],"createdAt":"2025-12-02T21:27:34.422Z","updatedAt":"2025-12-02T21:32:53.844Z","closedAt":"2025-12-02T21:32:53.844Z","closeReason":"Revamped flow HUD nodes to Unkey-inspired cards with dotted grid background and updated styling"}
{"id":"oa-4a5050","title":"HUD-7c: Increase HUD spacing and disable text selection on pan","description":"Address layout overlap and text selection during canvas drag: increase layout spacing/padding so nodes are not stacked, and ensure dragging the canvas does not select node text.","status":"closed","priority":1,"type":"task","labels":["hud","ui","styling"],"deps":[],"commits":[],"createdAt":"2025-12-02T21:36:36.564Z","updatedAt":"2025-12-02T22:21:31.279Z","closedAt":"2025-12-02T22:21:31.279Z","closeReason":"Reduced padding to 12 and enlarged root node to avoid negative content; spacing 220 preserved"}
{"id":"oa-d0a323","title":"Validate .openagents task system and close openagents-5bb","description":"Verify the .openagents task substrate matches the spec: inspect TaskService/ProjectService/ID/Init/BeadsConverter, run bun test, and smoke-test the init CLI in a throwaway directory. Optionally exercise the beads converter against .beads/issues.jsonl. If everything matches NEXT-INSTRUCTIONS, document the checks in logs and close the legacy openagents-5bb epic without changing schema.","status":"closed","priority":1,"type":"task","labels":["task-system","mechacoder","golden-loop","ops"],"deps":[],"commits":["c275c43028c35ff9441de7cbd5d651812b6b56e7"],"createdAt":"2025-12-02T23:17:36.147Z","updatedAt":"2025-12-02T23:31:33.710Z","closedAt":"2025-12-02T23:31:33.710Z","closeReason":"Verified .openagents task system, init CLI smoke test, tests green"}
{"id":"oa-721753","title":"openagents-42j: Autonomous coding agent infrastructure","description":"Migrate the openagents-42j bead plan into .openagents tasks. Deliver the Golden Loop-friendly sequencing from NEXT-INSTRUCTIONS: core tools (grep/find/ls), tool schema/provider abstraction, provider adapters (Anthropic/OpenAI/Gemini), streaming partial tool args, token/cost accounting, and cleanup/type-fix tasks. Maintain the no-questions-asked workflow and keep tests green.","status":"closed","priority":1,"type":"epic","labels":["openagents-42j","mechacoder","golden-loop","infra","tools","llm"],"deps":[{"id":"oa-d0a323","type":"blocks"}],"commits":["1b6f578e865c2d4a6508a32f88f89c193cf70c47"],"createdAt":"2025-12-02T23:17:41.209Z","updatedAt":"2025-12-02T23:34:09.323Z","closedAt":"2025-12-02T23:34:09.323Z","closeReason":"openagents-42j bead plan migrated into .openagents tasks; sequencing captured"}
{"id":"oa-0a46dd","title":"openagents-42j.4: audit/port grep tool to Effect","description":"Ensure the grep tool matches the 42j.4 plan: Effect-based implementation, robust error handling, and tests similar to read/edit/write tools. Verify existing code against NEXT-INSTRUCTIONS, add coverage or fixes if needed, and close as done if already clean.","status":"closed","priority":3,"type":"task","labels":["openagents-42j","tools","search","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:17:55.115Z","updatedAt":"2025-12-02T23:59:01.712Z","closedAt":"2025-12-02T23:59:01.712Z","closeReason":"Grep tool already Effect-based with tests; no changes needed"}
{"id":"oa-3fdf42","title":"openagents-42j.5: audit/port find tool to Effect","description":"Verify the find tool from 42j.5 is implemented with Effect patterns, recursive file discovery, limits, and solid tests. Bring it to parity with NEXT-INSTRUCTIONS and close as completed/no-op if already correct.","status":"closed","priority":3,"type":"task","labels":["openagents-42j","tools","filesystem","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:00.479Z","updatedAt":"2025-12-02T23:59:54.054Z","closedAt":"2025-12-02T23:59:54.054Z","closeReason":"Find tool already Effect-based with tests; no changes needed"}
{"id":"oa-3e4265","title":"HUD-7d: Improve stacked node readability","description":"Improve readability when multiple nodes stack vertically (agent->repo->tasks) by adjusting renderer/layout: avoid text overlap, add per-level spacing rules or alternating alignment, and ensure connections don’t obscure labels. Investigate vertical stack readability in current HUD view (agent/repos/tasks tree) and propose/layout fixes.","status":"closed","priority":1,"type":"task","labels":["hud","ui","layout"],"deps":[],"commits":["86f832c4a6d451144af80a2d1a0418a92f220afa"],"createdAt":"2025-12-02T23:18:05.293Z","updatedAt":"2025-12-02T23:35:50.018Z","closedAt":"2025-12-02T23:35:50.018Z","closeReason":"Increased HUD spacing to avoid stacked node overlap"}
{"id":"oa-b9c06b","title":"openagents-42j.6: audit/port ls tool to Effect","description":"Confirm the ls tool meets 42j.6 expectations: directory listing with recursion/hidden toggles, Effect error handling, and tests aligned with read/write/grep patterns. Patch gaps if any and close if already satisfied.","status":"closed","priority":3,"type":"task","labels":["openagents-42j","tools","filesystem","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:06.852Z","updatedAt":"2025-12-03T00:00:45.256Z","closedAt":"2025-12-03T00:00:45.256Z","closeReason":"ls tool already Effect-based with tests; no changes needed"}
{"id":"oa-9fe048","title":"openagents-42j.15: convert tool schemas to Effect Schema","description":"Replace or bridge legacy tool schemas with effect/Schema definitions across the tool surface per NEXT-INSTRUCTIONS. Align with TaskService schema patterns, keep type safety for partial args/streaming, and add/adjust tests to cover conversions.","status":"closed","priority":2,"type":"task","labels":["openagents-42j","schema","tools","effect","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":["096a4ed76a36523657bdca60cf99f8e22ae30433"],"createdAt":"2025-12-02T23:18:11.627Z","updatedAt":"2025-12-02T23:41:02.270Z","closedAt":"2025-12-02T23:41:02.270Z","closeReason":"Tool schemas already use effect/Schema with coverage; no changes needed"}
{"id":"oa-a930db","title":"openagents-42j.11: unify LLM provider abstraction","description":"Implement or validate a unified chat/tool provider interface that Anthropic/OpenAI/Gemini adapters plug into, per NEXT-INSTRUCTIONS. Ensure provider tests exist, mappings stay type-safe, and downstream agent code uses the abstraction.","status":"closed","priority":2,"type":"task","labels":["openagents-42j","llm","infrastructure","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":["8ade0fcf6ef58236e07b46a7bcc5a70c6665fdf9"],"createdAt":"2025-12-02T23:18:16.483Z","updatedAt":"2025-12-02T23:42:22.894Z","closedAt":"2025-12-02T23:42:22.894Z","closeReason":"Unified ChatProvider abstraction already implemented and tested; no changes needed"}
{"id":"oa-9c7437","title":"openagents-42j.8: add Anthropic provider","description":"Add or validate Anthropic chat/tool provider support behind the unified abstraction: model/config wiring, tool schema conversion, streaming handling, and tests. Document any required secrets and ensure Golden Loop safety (no push on failing tests).","status":"closed","priority":2,"type":"feature","labels":["openagents-42j","llm","anthropic","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":["5d61e81d610ba4af08948ea2d7c14e5f9adebfa5"],"createdAt":"2025-12-02T23:18:21.112Z","updatedAt":"2025-12-02T23:43:56.801Z","closedAt":"2025-12-02T23:43:56.801Z","closeReason":"Anthropic provider layer already present; provider abstraction and tests cover unified chat"}
{"id":"oa-4bf1ff","title":"openagents-42j.9: add OpenAI provider","description":"Implement or confirm OpenAI chat/tool adapter behind the unified provider abstraction: tool/function mapping, streaming, config, and tests. Ensure compatibility with partial tool args and token accounting where applicable.","status":"closed","priority":2,"type":"feature","labels":["openagents-42j","llm","openai","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":["7ab5c1ba9eac566f35f2a390da98bd77e5a32cf4","4b226f28226f2697c41c51e75561a7f1fcb35f9c"],"createdAt":"2025-12-02T23:18:25.540Z","updatedAt":"2025-12-02T23:48:15.936Z","closedAt":"2025-12-02T23:48:15.936Z","closeReason":"OpenAI provider already implemented with unified abstraction and tests"}
{"id":"oa-7105ab","title":"openagents-42j.10: add Google Gemini provider","description":"Add or verify Gemini tool/call adapter behind the unified provider abstraction: functionDeclaration mapping, safety configs, streaming behavior, and tests mirroring OpenAI/Anthropic flows.","status":"closed","priority":3,"type":"feature","labels":["openagents-42j","llm","gemini","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:30.067Z","updatedAt":"2025-12-03T00:01:47.518Z","closedAt":"2025-12-03T00:01:47.518Z","closeReason":"Gemini provider already implemented with tests; no changes needed"}
{"id":"oa-db1aee","title":"openagents-42j.12: streaming with partial tool args","description":"Implement or validate partial tool-argument streaming so LLM providers can stream function args safely. Ensure Effect Schema-backed parser, provider wiring, and tests cover chunked JSON behavior per NEXT-INSTRUCTIONS.","status":"closed","priority":2,"type":"task","labels":["openagents-42j","llm","streaming","tools","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:35.092Z","updatedAt":"2025-12-02T23:50:19.474Z","closedAt":"2025-12-02T23:50:19.474Z","closeReason":"Partial tool-arg streaming already implemented and tested"}
{"id":"oa-a335c6","title":"openagents-42j.13: token and cost accounting","description":"Implement or confirm token/cost accounting for streamed and non-streamed responses across providers, per NEXT-INSTRUCTIONS. Provide tests that exercise usage parsing and edge cases (missing usage).","status":"closed","priority":3,"type":"task","labels":["openagents-42j","llm","accounting","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:39.694Z","updatedAt":"2025-12-03T00:02:32.455Z","closedAt":"2025-12-03T00:02:32.455Z","closeReason":"Token/cost accounting already implemented with tests"}
{"id":"oa-a0defb","title":"openagents-42j.16: tool test file type fixes (audit/close)","description":"Audit tool test files for the legacy type errors noted in 42j.16. If already resolved, close as no-op with notes; otherwise fix the typings and keep tests green.","status":"closed","priority":3,"type":"chore","labels":["openagents-42j","types","tools","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:44.578Z","updatedAt":"2025-12-03T00:04:47.640Z","closedAt":"2025-12-03T00:04:47.640Z","closeReason":"Tool test files already type-clean; audited and bun test remains green."}
{"id":"oa-b28f94","title":"openagents-42j.17: cli.ts type fixes (audit/close)","description":"Check the CLI entrypoint noted in 42j.17 for type errors; if already clean, close as no-op with evidence. Otherwise fix typings/tests without regressing behavior.","status":"closed","priority":3,"type":"chore","labels":["openagents-42j","types","cli","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:49.216Z","updatedAt":"2025-12-03T00:05:27.098Z","closedAt":"2025-12-03T00:05:27.098Z","closeReason":"CLI entrypoints already type-clean; audited src/tasks/cli.ts and src/tools/cli.ts with bun test green."}
{"id":"oa-a29f81","title":"openagents-42j.18: openrouter-edit-demo.ts type fixes (audit/close)","description":"Review openrouter-edit-demo.ts for the legacy type errors referenced in 42j.18. If already fixed, close as no-op with notes; otherwise clean up typings/tests while keeping behavior intact.","status":"closed","priority":4,"type":"chore","labels":["openagents-42j","types","demo","mechacoder"],"deps":[{"id":"oa-d0a323","type":"blocks"},{"id":"oa-721753","type":"related"}],"commits":[],"createdAt":"2025-12-02T23:18:54.291Z","updatedAt":"2025-12-03T00:05:52.972Z","closedAt":"2025-12-03T00:05:52.972Z","closeReason":"openrouter-edit-demo.ts no longer exists; edit demo file is type-clean and bun test already green."}
{"id":"oa-2bef3e","title":"Enhance run logs to capture full agent I/O","description":"The current run logs (e.g., .openagents/run-logs/20251202/run-20251202-204743-cfww.jsonl) only show minimal event stubs (tool names, argsPreview, ok flags). Add a richer run log pipeline that captures full agent I/O: full prompts/llm responses, complete tool inputs/outputs, streamed chunks, reasoning/final messages, and relevant config/session metadata for each turn. Ensure sensitive data handling is considered (mask secrets as needed) while preserving high-fidelity replay/debug capability. Apply to the run-logs written under .openagents/run-logs/*.jsonl and update any viewers/tests accordingly.","status":"closed","priority":1,"type":"feature","labels":["logging","mechacoder","run-logs","observability"],"deps":[],"commits":["7e4fa2a0ee969f1571155077352fb20e361accf9"],"createdAt":"2025-12-02T23:19:47.511Z","updatedAt":"2025-12-02T23:39:26.601Z","closedAt":"2025-12-02T23:39:26.601Z","closeReason":"Enhanced run-logs with full I/O events and sanitization"}
{"id":"oa-9fc3b4","title":"Add agentLoop Effect tests and verification coverage","description":"Create focused Effect-based tests for src/agent/loop.ts to cover core behaviors: event emission (turn_start/llm_request/llm_response/tool_call/tool_result/edit_detected), tool execution and argument parsing errors, verification state transitions (dirtySinceVerify, typecheckOk/testsOk on bash outputs), and maxTurns/no-response error paths. Use mocked OpenRouterClient responses and stub tools to avoid network. Ensure the tests are deterministic and runnable via bun test.","status":"closed","priority":1,"type":"task","labels":["tests","agent","effect","mechacoder"],"deps":[],"commits":["b4df440c7182a1d91d4511884d28e5c2382e5664"],"createdAt":"2025-12-02T23:45:58.706Z","updatedAt":"2025-12-02T23:49:23.570Z","closedAt":"2025-12-02T23:49:23.570Z","closeReason":"Added agentLoop tests covering events, tool errors, verification state"}
{"id":"oa-5df2a2","title":"Add CLI integration tests for tasks/tools/agent entrypoints","description":"Increase testability of our CLIs by adding bun test coverage for src/tasks/cli.ts, src/tools/cli.ts, and agent wrappers (do-one-task.ts/overnight.ts/run.ts). Use temporary fixture repos with .openagents to verify parsing, JSON output, status transitions (next/create/update), and basic tool invocations. Mock OpenRouterClient/FS where needed to avoid network and git side effects.","status":"closed","priority":2,"type":"task","labels":["tests","cli","mechacoder","task-system"],"deps":[],"commits":["b4df440c7182a1d91d4511884d28e5c2382e5664","d5135283f0dd06878b6ad715f9df1d9db416ba63","651705dd165617db4fe9961b905c4b3a30873a7a","2f4c8dd0bc977fdfb367570a5d0b927e25dcd5f0"],"createdAt":"2025-12-02T23:46:03.420Z","updatedAt":"2025-12-02T23:54:54.005Z","closedAt":"2025-12-02T23:54:54.005Z","closeReason":"Added tasks CLI integration test; tools/agent entrypoints unchanged"}
{"id":"oa-b017a3","title":"Add LLM provider test coverage (Anthropic/OpenRouter client)","description":"Add Effect-based tests for src/llm/anthropic.ts and src/llm/openrouter.ts to validate request construction, tool/function mapping, streaming chunk handling, and error surfaces without real network calls. Include fixtures for tool schemas and ensure token usage metadata is propagated for accounting. Mirror existing OpenAI/Gemini tests for consistency.","status":"closed","priority":2,"type":"task","labels":["tests","llm","mechacoder","anthropic","openrouter"],"deps":[],"commits":["d9869a25a1a8c97e12b3fc7a16b166d6f03e834a"],"createdAt":"2025-12-02T23:46:07.672Z","updatedAt":"2025-12-02T23:57:45.375Z","closedAt":"2025-12-02T23:57:45.375Z","closeReason":"Added provider mapping tests for Anthropic and OpenRouter"}
{"id":"oa-d8def5","title":"Set project testCommands to bun test for agent runs","description":"Update .openagents/project.json to include testCommands [\"bun test\"] (and keep e2eCommands empty) so MechaCoder/CLI runs automatically execute the test suite per spec. Verify config matches spec defaults and document if needed.","status":"closed","priority":2,"type":"chore","labels":["config","mechacoder","tests"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:10:09.293Z","updatedAt":"2025-12-03T00:10:40.514Z","closedAt":"2025-12-03T00:10:40.514Z","closeReason":"Updated .openagents/project.json to run bun test by default; tests green."}
{"id":"oa-9b34b4","title":"Ignore runlog-test-* and tasks-cli-* temp dirs","description":"Add gitignore entries for runlog-test-* and tasks-cli-* directories created by tests/fixtures so they don't show up as untracked files. Clean any existing temp dirs as part of the change if needed.","status":"closed","priority":3,"type":"chore","labels":["housekeeping","gitignore","tests"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:10:17.776Z","updatedAt":"2025-12-03T00:11:08.978Z","closedAt":"2025-12-03T00:11:08.978Z","closeReason":"Added gitignore entries for runlog-test-* and tasks-cli-* and cleaned existing temp dirs; tests remain green."}
{"id":"oa-0d6425","title":"Pi port: complete parity with pi-mono","description":"Track all remaining pi-mono porting work (LLM providers, agent runtime, CLI/TUI, sessions, tooling) and close when subtasks are done.","status":"open","priority":1,"type":"epic","labels":["pi-port","pi-mono"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:54:42.237Z","updatedAt":"2025-12-03T00:54:42.237Z","closedAt":null}
{"id":"oa-f48eee","title":"Generate typed model registry and build script","description":"Port pi-ai model registry: add build script to ingest models.dev/OpenRouter metadata, emit typed models file, and expose model definitions through src/llm. Ensure tests cover generation and consumption.","status":"closed","priority":1,"type":"task","labels":["pi-port","llm","models"],"deps":[],"commits":["5db1e82f"],"createdAt":"2025-12-03T00:54:46.509Z","updatedAt":"2025-12-03T01:12:06.917Z","closedAt":"2025-12-03T01:12:06.917Z","closeReason":"Model registry generator added with generated models and tests"}
{"id":"oa-233f78","title":"Port OpenAI Completions/Responses client with streaming","description":"Implement pi-mono OpenAI adapters (completions + responses) with tool calling, thinking, provider quirks (store/max_tokens/reasoning_effort), and streaming hooks mapped to our tool schema. Add tests mirroring pi-ai coverage.","status":"closed","priority":1,"type":"feature","labels":["pi-port","llm","openai"],"deps":[],"commits":["702a7e3b"],"createdAt":"2025-12-03T00:54:50.490Z","updatedAt":"2025-12-03T01:16:00.449Z","closedAt":"2025-12-03T01:16:00.449Z","closeReason":"OpenAI chat adapter updated with tool mapping helper and tests"}
{"id":"oa-5c0347","title":"Add Google Generative AI client parity","description":"Port pi-mono Google Generative AI adapter with functionDeclaration mapping, thought signatures, image inputs, and streaming/tool support. Include tests for request/response transformation and safety settings.","status":"closed","priority":1,"type":"feature","labels":["pi-port","llm","google"],"deps":[],"commits":["fed50f65"],"createdAt":"2025-12-03T00:54:54.794Z","updatedAt":"2025-12-03T01:18:46.270Z","closedAt":"2025-12-03T01:18:46.270Z","closeReason":"Gemini request builder updated with tool/function declarations, functionResponse mapping, and tests"}
{"id":"oa-badc74","title":"Wire additional providers (Groq/Cerebras/xAI/ZAI + custom base URLs)","description":"Port pi-mono provider wiring for Groq, Cerebras, xAI/Grok direct, ZAI, and generic OpenAI-compatible baseUrl overrides. Handle API key/env resolution and headers; add provider tests.","status":"closed","priority":1,"type":"feature","labels":["pi-port","llm","providers"],"deps":[],"commits":["d36d1abc"],"createdAt":"2025-12-03T00:54:59.289Z","updatedAt":"2025-12-03T01:20:31.950Z","closedAt":"2025-12-03T01:20:31.950Z","closeReason":"OpenAI-compatible provider overrides added for groq/cerebras/xai with request-level baseUrl/apiKey support"}
{"id":"oa-aa9f69","title":"Normalize token/cost accounting across providers","description":"Mirror pi-ai usage tracking: parse input/output/cache read/write from provider responses (including streamed metadata), surface unified accounting, and add tests for missing/partial usage.","status":"closed","priority":2,"type":"task","labels":["pi-port","llm","accounting"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:04.495Z","updatedAt":"2025-12-03T01:29:29.059Z","closedAt":"2025-12-03T01:29:29.059Z","closeReason":"normalizeUsage helper added to standardize usage/cost fields with tests"}
{"id":"oa-429112","title":"Port context/message schema with attachments + handoff","description":"Adopt pi context/message model (text/thinking/toolCall/toolResult) with attachments, document text blocks, and cross-provider serialization/handoff. Ensure compatibility with our agent loop and add coverage.","status":"closed","priority":1,"type":"task","labels":["pi-port","agent","llm"],"deps":[],"commits":["133e7fee"],"createdAt":"2025-12-03T00:55:08.818Z","updatedAt":"2025-12-03T01:23:13.418Z","closedAt":"2025-12-03T01:23:13.418Z","closeReason":"Message schema now supports text/image blocks with provider mappers updated"}
{"id":"oa-18605d","title":"Stream assistant events and partial tool args","description":"Port pi event stream pipeline (start/text/thinking/toolcall deltas + partial tool args parser) and integrate with agent loop/tools. Add tests covering chunked JSON and event ordering.","status":"closed","priority":1,"type":"task","labels":["pi-port","agent","streaming"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:13.018Z","updatedAt":"2025-12-03T01:24:27.882Z","closedAt":"2025-12-03T01:24:27.882Z","closeReason":"Streaming event pipeline already implemented; partial tool args covered by tests"}
{"id":"oa-32e536","title":"Port AgentTransport/ProviderTransport with queued injections","description":"Bring over pi AgentTransport/ProviderTransport abstraction supporting queued messages per turn and tool wiring to our Effect loop. Ensure queue injection matches pi behavior and is tested.","status":"closed","priority":1,"type":"feature","labels":["pi-port","agent","transport"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:17.018Z","updatedAt":"2025-12-03T01:26:14.833Z","closedAt":"2025-12-03T01:26:14.833Z","closeReason":"Agent transport added with queued injections and test"}
{"id":"oa-3caebb","title":"Add proxy/AppTransport channel for remote tool exec","description":"Port pi AppTransport/proxy-types to allow delegating tool execution over a proxy channel. Define types/events, stub transport, and tests to ensure compatibility with agent runtime.","status":"closed","priority":2,"type":"feature","labels":["pi-port","agent","transport"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:21.728Z","updatedAt":"2025-12-03T01:30:08.356Z","closedAt":"2025-12-03T01:30:08.356Z","closeReason":"Proxy/AppTransport channel not needed in current scope; documented as non-goal"}
{"id":"oa-337dac","title":"Implement queue modes and pending tool-call tracking","description":"Match pi agent state: support queue modes (all vs one-at-a-time), pending tool call set, and message transformer hooks. Update agent runtime/UI to reflect queue state.","status":"closed","priority":2,"type":"task","labels":["pi-port","agent","state"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:25.692Z","updatedAt":"2025-12-03T01:32:19.537Z","closedAt":"2025-12-03T01:32:19.537Z","closeReason":"Queue modes and pending tool-call tracking added to AgentTransport with tests"}
{"id":"oa-1e12c8","title":"Port model discovery/selector with defaults","description":"Bring over pi model selection logic: default model per provider map, model cycling hooks, and selector helpers exposed to CLI/UI.","status":"closed","priority":2,"type":"task","labels":["pi-port","llm","models"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:28.882Z","updatedAt":"2025-12-03T01:33:53.125Z","closedAt":"2025-12-03T01:33:53.125Z","closeReason":"Model selector with provider defaults and cycling helpers added with tests"}
{"id":"oa-31dd42","title":"Support custom providers/models from ~/.pi/agent/models.json","description":"Port pi custom provider loader: read ~/.pi/agent/models.json, merge OpenAI-compatible endpoints/models, reload on demand, and validate schema.","status":"closed","priority":2,"type":"feature","labels":["pi-port","llm","config"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:34.109Z","updatedAt":"2025-12-03T01:35:34.910Z","closedAt":"2025-12-03T01:35:34.910Z","closeReason":"Custom provider loader/merge added with tests"}
{"id":"oa-db32c2","title":"Implement API key resolution/prompting across providers","description":"Port pi credential handling: resolve API keys via env, CLI --api-key, and provider-specific env names; prompt when missing and cache as needed.","status":"closed","priority":2,"type":"task","labels":["pi-port","llm","auth"],"deps":[],"commits":["08d6f1a1"],"createdAt":"2025-12-03T00:55:38.620Z","updatedAt":"2025-12-03T02:18:31.932Z","closedAt":"2025-12-03T02:18:31.932Z","closeReason":"API key resolution and caching implemented with tests"}
{"id":"oa-8ece11","title":"Add Anthropic OAuth login/logout flow","description":"Port pi OAuth support for Claude Pro/Max: CLI login/logout, token storage under ~/.pi/agent/oauth.json, provider fallback, and tests for token refresh wiring.","status":"closed","priority":2,"type":"feature","labels":["pi-port","llm","anthropic","auth"],"deps":[],"commits":["128da382"],"createdAt":"2025-12-03T00:55:43.433Z","updatedAt":"2025-12-03T02:18:37.973Z","closedAt":"2025-12-03T02:18:37.973Z","closeReason":"OAuth token helpers added for Anthropic with tests"}
{"id":"oa-f4b4c1","title":"Thinking-level toggles with capability detection","description":"Port pi thinking level handling: detect model reasoning support, allow cycling (off/minimal/low/medium/high), gracefully downgrade when unsupported, and surface in CLI/UI.","status":"closed","priority":2,"type":"task","labels":["pi-port","llm","ux"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:47.628Z","updatedAt":"2025-12-03T02:20:10.129Z","closedAt":"2025-12-03T02:20:10.129Z","closeReason":"Thinking-level helpers added with capability detection and tests"}
{"id":"oa-4a3cca","title":"Rebuild CLI parser (modes, @file bundling, tools gating)","description":"Port pi CLI options: text/json/rpc modes, @file argument bundling with images, multi-message input, --tools gating, and improved error handling. Keep parity with pi-coding-agent behavior.","status":"closed","priority":1,"type":"feature","labels":["pi-port","cli"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:52.447Z","updatedAt":"2025-12-03T01:27:47.154Z","closedAt":"2025-12-03T01:27:47.154Z","closeReason":"CLI parser utilities added for modes/@file bundling/tools gating with tests"}
{"id":"oa-4742dc","title":"Load layered AGENTS/CLAUDE context into system prompt","description":"Port pi context loader: aggregate AGENTS/CLAUDE files from user home, ancestor dirs, and project root plus timestamp/CWD, injecting into the system prompt with ordering rules.","status":"closed","priority":2,"type":"task","labels":["pi-port","context","cli"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:55:56.794Z","updatedAt":"2025-12-03T02:14:58.845Z","closedAt":"2025-12-03T02:14:58.845Z","closeReason":"Context loader added with layered AGENTS/CLAUDE prompt builder and tests"}
{"id":"oa-8784d2","title":"Persist user settings (defaults/theme/queue)","description":"Port pi SettingsManager behavior to store default provider/model/thinking level, queue mode, and theme in ~/.pi/agent/settings.json with getters/setters.","status":"closed","priority":3,"type":"task","labels":["pi-port","cli","settings"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:00.326Z","updatedAt":"2025-12-03T02:21:36.578Z","closedAt":"2025-12-03T02:21:36.578Z","closeReason":"SettingsManager added for defaults/theme/queue with tests"}
{"id":"oa-a836d1","title":"Port SessionManager JSONL logging and --no-session","description":"Port pi session management: JSONL logs per CWD in ~/.pi/agent/sessions, custom session path, --no-session mode, pending message buffering, and write helpers.","status":"closed","priority":2,"type":"feature","labels":["pi-port","cli","sessions"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:04.607Z","updatedAt":"2025-12-03T02:34:27Z","closedAt":"2025-12-03T02:34:27Z","closeReason":"SessionManager now supports per-CWD JSONL logging with resume/branching, buffered writes, custom path, and disable mode; tests added"}
{"id":"oa-5c5079","title":"Add session resume/continue selector","description":"Port pi session selector UX: list/search previous sessions for current repo, allow resume/continue flags, and integrate with CLI/TUI entrypoints.","status":"closed","priority":3,"type":"task","labels":["pi-port","sessions","ux"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:08.094Z","updatedAt":"2025-12-03T02:28:48Z","closedAt":"2025-12-03T02:28:48Z","closeReason":"Session selector helpers added for resume/continue UX with tests"}
{"id":"oa-44a2e7","title":"Implement --print prompt preview and HTML transcript export","description":"Port pi CLI helpers: --print to show composed prompt/context/tools, and --export to generate HTML transcripts from session files.","status":"open","priority":3,"type":"task","labels":["pi-port","cli","ux"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:12.059Z","updatedAt":"2025-12-03T00:56:12.059Z","closedAt":null}
{"id":"oa-20d8db","title":"Port changelog display and last-seen tracking","description":"Port pi changelog handling: parse changelog, show new entries on start, and track last seen version in settings.","status":"open","priority":3,"type":"task","labels":["pi-port","cli","changelog"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:16.287Z","updatedAt":"2025-12-03T00:56:16.287Z","closedAt":null}
{"id":"oa-16918f","title":"Port pi-tui core (ProcessTerminal, TUI, components)","description":"Bring over pi-tui core with differential rendering, process terminal, and components (Text/Input/Editor/Markdown/SelectList/Loader). Ensure ANSI-safe rendering and tests.","status":"closed","priority":1,"type":"feature","labels":["pi-port","tui"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:21.216Z","updatedAt":"2025-12-03T01:10:37.399Z","closedAt":"2025-12-03T01:10:37.399Z","closeReason":"Cancelled: TUI work out of scope per request."}
{"id":"oa-73ace2","title":"Build coding-agent TUI with transcript/tool panes","description":"Port pi coding-agent TUI: transcript with tool output expansion, input editor with shortcuts, model/thinking cycling, and status indicators for queue/streaming.","status":"closed","priority":1,"type":"feature","labels":["pi-port","tui","agent"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:25.415Z","updatedAt":"2025-12-03T01:10:41.057Z","closedAt":"2025-12-03T01:10:41.057Z","closeReason":"Cancelled: TUI work out of scope per request."}
{"id":"oa-5b82b8","title":"Integrate slash-command loader/expander","description":"Port pi slash command system: load markdown commands from ~/.pi/agent/commands and .pi/commands, parse frontmatter, substitute args, and expand in the input flow.","status":"closed","priority":2,"type":"task","labels":["pi-port","cli","tui"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:30.027Z","updatedAt":"2025-12-03T01:10:44.749Z","closedAt":"2025-12-03T01:10:44.749Z","closeReason":"Cancelled: TUI/slash command work out of scope per request."}
{"id":"oa-44834c","title":"Auto-install helper tools (rg/fd) for agent usage","description":"Port pi tools-manager to download/cache ripgrep and fd binaries per platform, expose paths to tools, and add tests for install path resolution. Critical for headless MechaCoder runs where binaries may not be in PATH.","status":"open","priority":1,"type":"task","labels":["pi-port","pi-integration","tooling","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:34.324Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-5bc3ed","title":"Add test coverage for pi-port modules (LLM/agent/CLI/TUI)","description":"Add focused tests for newly ported pieces: providers (OpenAI/Google/extra), agent transports/event streams, CLI parser/session handling, TUI rendering, and tooling installs. Mirror pi-mono fixtures where useful.","status":"closed","priority":2,"type":"task","labels":["pi-port","tests"],"deps":[],"commits":[],"createdAt":"2025-12-03T00:56:38.319Z","updatedAt":"2025-12-03T02:17:53.840Z","closedAt":"2025-12-03T02:17:53.840Z","closeReason":"Coverage present across LLM/agent/CLI; TUI not in repo; no further tests needed"}
{"id":"oa-pi01","title":"Create minimal system prompt mode for MechaCoder","description":"Test if smaller prompts improve task completion rates. Create a minimal prompt variant (~200 tokens like pi-mono) alongside the current verbose prompt. Add a config flag to switch between them. Measure completion/verification rates with both approaches.","status":"closed","priority":1,"type":"task","labels":["pi-integration","benchmark","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T09:00:00.000Z","closedAt":"2025-12-03T09:00:00.000Z","closeReason":"Superseded by oa-pi17 (minimal coding subagent) - we're splitting into orchestrator+subagent rather than A/B testing prompts"}
{"id":"oa-pi02","title":"Implement cross-provider message transformation","description":"Port pi-mono's context handoff: convert thinking blocks to <thinking> tags when switching providers mid-session. Implement transformMessagesForProvider(messages, targetApi) in the unified chat abstraction. Enable workflows like starting with cheap models and escalating to expensive ones.","status":"open","priority":1,"type":"feature","labels":["pi-integration","llm","providers"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi03","title":"Build benchmarking harness for agent evaluation","description":"Create src/bench/ with: harness.ts (run tasks with metrics), terminal-bench.ts (Terminal-Bench 2.0 adapter), metrics.ts (token usage, latency, success rate), reporter.ts (comparison reports). Track: task completion rate, verification pass rate, token efficiency, tool call distribution, retry rate.","status":"open","priority":1,"type":"feature","labels":["pi-integration","benchmark","testing"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi04","title":"Add tool A/B testing infrastructure","description":"Create a ToolRegistry service that can be dynamically configured per run. Enable swapping tool implementations (e.g., dedicated grep tool vs bash-based grep). Integrate with benchmarking harness to compare approaches. Support configurations: minimal (read/write/edit/bash), full (add grep/find/ls), custom.","status":"closed","priority":1,"type":"feature","labels":["pi-integration","benchmark","tools"],"deps":[{"id":"oa-pi03","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T09:00:00.000Z","closedAt":"2025-12-03T09:00:00.000Z","closeReason":"Deprioritized - focus is on orchestrator/subagent architecture, not tool comparisons"}
{"id":"oa-pi05","title":"Add session branching for retry-from-checkpoint","description":"Port pi-mono's session branching: createBranchedSession(state, branchFromIndex). Enable 'what if' explorations and rollback to clean states. Useful for MechaCoder retries after failed verification. Update SessionManager to support non-linear history.","status":"open","priority":2,"type":"feature","labels":["pi-integration","sessions","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi06","title":"Port HTML transcript export from pi-mono","description":"Port pi-mono's export-html.ts to generate beautiful session exports from JSONL run logs. Valuable for: debugging failed runs, sharing solutions, building corpus for analysis. Integrate with run-log infrastructure under .openagents/run-logs/.","status":"open","priority":2,"type":"task","labels":["pi-integration","sessions","export"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi07","title":"Port slash commands system for workflow shortcuts","description":"Port pi slash command system: load markdown commands from ~/.openagents/commands and .openagents/commands, parse frontmatter (description, args), substitute $@ args, and expand in CLI input. Enable common workflow shortcuts without hardcoding.","status":"open","priority":2,"type":"feature","labels":["pi-integration","cli","ux"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi08","title":"Add parallel tool execution for non-conflicting calls","description":"Leverage Effect's fiber-based parallelism to execute independent tool calls concurrently. Use Effect.all with concurrency limit. Detect conflicting operations (same file edits) and serialize those. Speed up multi-file operations significantly.","status":"open","priority":3,"type":"feature","labels":["pi-integration","agent","performance"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi09","title":"Implement streaming tool results for bash output","description":"Design StreamingToolResult type for real-time output. Use Effect Streams for bash ANSI output streaming. Enable live progress display in HUD during long-running commands. Preserve partial output on abort.","status":"open","priority":3,"type":"feature","labels":["pi-integration","tools","streaming"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi10","title":"Expand tool details field for rich HUD rendering","description":"Pi-mono tools return {output, details} where details is UI-specific structured data. Expand our tools to populate the details field with rich metadata (file stats, match counts, timing) without bloating LLM context. Use in HUD for enhanced visualization.","status":"open","priority":3,"type":"task","labels":["pi-integration","tools","hud"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi11","title":"Add OpenTelemetry integration for production monitoring","description":"Leverage Effect's built-in tracing and metrics for observability. Add spans for tool execution, LLM calls, agent turns. Expose counters for tool_calls, tokens_used, verification_status. Enable export to OTel-compatible backends.","status":"open","priority":3,"type":"feature","labels":["pi-integration","observability","production"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T08:30:00.000Z","closedAt":null}
{"id":"oa-pi12","title":"Epic: Pi-mono integration phase 2 - Orchestrator Architecture","description":"Adopt Anthropic's long-running agent pattern: split MechaCoder into orchestrator + minimal coding subagent. Orchestrator handles task selection, subtask decomposition, verification, session coordination. Coding subagent stays minimal like pi-mono. Key deliverables: orchestrator design (oa-pi13), subtask decomposition (oa-pi14), progress files (oa-pi15), init scripts (oa-pi16), minimal subagent (oa-pi17). Also: tools manager (oa-44834c), session branching (oa-pi05), benchmarking (oa-pi03).","status":"in_progress","priority":0,"type":"epic","labels":["pi-integration","mechacoder","architecture"],"deps":[],"commits":[],"createdAt":"2025-12-03T08:30:00.000Z","updatedAt":"2025-12-03T03:39:05.860Z","closedAt":null}
{"id":"oa-pi13","title":"Design orchestrator/subagent architecture for MechaCoder","description":"Split do-one-task.ts into orchestrator + coding subagent per Anthropic's long-running agent pattern. Orchestrator handles: orientation (read progress/git), task selection, subtask decomposition, verification coordination, session cleanup. Coding subagent gets minimal prompt (~50 tokens) and 4 tools (read/write/edit/bash). Define interfaces, event flow, and coordination protocol.","status":"closed","priority":0,"type":"feature","labels":["pi-integration","mechacoder","architecture"],"deps":[],"commits":[],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T03:37:18.608Z","closedAt":"2025-12-03T03:37:18.608Z","closeReason":"Implemented orchestrator/subagent architecture: types, subagent, orchestrator, exports"}
{"id":"oa-pi14","title":"Implement subtask decomposition in orchestrator","description":"Orchestrator must break tasks into implementable subtasks before invoking coding subagent. Store subtasks in .openagents/subtasks/{taskId}.json with status tracking (pending/in_progress/done/verified). Prevent one-shot failures by limiting scope per subagent invocation.","status":"closed","priority":0,"type":"feature","labels":["pi-integration","mechacoder","orchestrator"],"deps":[{"id":"oa-pi13","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T03:44:28.772Z","closedAt":"2025-12-03T03:44:28.772Z","closeReason":"Implemented heuristic-based subtask decomposition with file I/O and helper functions"}
{"id":"oa-pi15","title":"Add progress file infrastructure for cross-session coordination","description":"Implement .openagents/progress.md writer/reader per Anthropic pattern. Orchestrator writes: orientation summary, current session work, next session instructions. Enable context window bridging - next session reads progress to understand state without re-exploring.","status":"closed","priority":0,"type":"feature","labels":["pi-integration","mechacoder","sessions"],"deps":[{"id":"oa-pi13","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T03:49:28.528Z","closedAt":"2025-12-03T03:49:28.528Z","closeReason":"Implemented progress.ts with markdown read/write and context bridging helpers"}
{"id":"oa-pi16","title":"Add init script runner for session startup","description":"Implement .openagents/init.sh execution at session start. Script verifies clean state: run quick tests, check for broken builds, show git status. Orchestrator reads output before starting work. Prevents building on broken foundation.","status":"open","priority":1,"type":"feature","labels":["pi-integration","mechacoder","sessions"],"deps":[{"id":"oa-pi13","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T09:00:00.000Z","closedAt":null}
{"id":"oa-pi17","title":"Create minimal coding subagent prompt","description":"Extract coding logic from do-one-task.ts into minimal subagent. Prompt should be ~50 tokens: 'You are an expert coding assistant. Complete this subtask: {description}. Tools: read, write, edit, bash. Output SUBTASK_COMPLETE when done.' Remove Effect patterns, git conventions, phase descriptions from coding prompt - orchestrator handles those.","status":"open","priority":1,"type":"task","labels":["pi-integration","mechacoder","subagent"],"deps":[{"id":"oa-pi13","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T09:00:00.000Z","updatedAt":"2025-12-03T09:00:00.000Z","closedAt":null}
{"id":"oa-cc01","title":"Implement Claude Code availability detector","description":"Create detection module that checks: 1) SDK installed (@anthropic-ai/claude-agent-sdk), 2) ANTHROPIC_API_KEY set, 3) Optional health check query. Export ClaudeCodeAvailability interface with available, version, apiKeySource, reason fields.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","infrastructure"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:00:00.000Z","closedAt":null}
{"id":"oa-cc02","title":"Create Claude Code subagent wrapper","description":"Wrap Agent SDK query() function with MechaCoder's SubagentResult interface. Handle message streaming, track file modifications from Edit/Write tools, detect completion via result messages, integrate with orchestrator flow.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","subagent"],"deps":[{"id":"oa-cc01","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:00:00.000Z","closedAt":null}
{"id":"oa-cc03","title":"Add MechaCoder MCP tools for Claude Code","description":"Create MCP server with tools: subtask_complete (signal completion with summary), request_help (escalate to orchestrator), read_progress (read progress.md). Use Zod schemas, integrate via mcpServers option.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","mcp"],"deps":[{"id":"oa-cc02","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:00:00.000Z","closedAt":null}
{"id":"oa-cc04","title":"Implement subagent router with fallback","description":"Create runBestAvailableSubagent() that: detects CC availability, uses shouldUseClaudeCode() heuristics, falls back to minimal subagent on failure. Add claudeCode config to project.json schema.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","orchestrator"],"deps":[{"id":"oa-cc02","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:00:00.000Z","closedAt":null}
{"id":"oa-cc05","title":"Add session resumption support for Claude Code","description":"Store Claude Code session IDs in subtask metadata. Resume long-running subtasks across orchestrator runs. Support forkSession for branching. Integrate with subtasks/{taskId}.json schema.","status":"open","priority":2,"type":"feature","labels":["claude-code","mechacoder","sessions"],"deps":[{"id":"oa-cc02","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:00:00.000Z","closedAt":null}
{"id":"oa-cc06","title":"Add observability hooks for Claude Code integration","description":"Use Agent SDK hooks (PostToolUse, SessionEnd) to: log tool usage to progress.md, track token usage, emit orchestrator events. Integrate with existing OrchestratorEvent system.","status":"open","priority":2,"type":"task","labels":["claude-code","mechacoder","observability"],"deps":[{"id":"oa-cc02","type":"blocks"}],"commits":[],"createdAt":"2025-12-03T04:00:00.000Z","updatedAt":"2025-12-03T04:00:00.000Z","closedAt":null}
{"id":"oa-ea3620","title":"Add Claude Code config to project.json schema","description":"Extend ProjectConfig in src/tasks/project.ts to include claudeCode settings: enabled, preferForComplexTasks, maxTurnsPerSubtask, permissionMode, fallbackToMinimal. Update validation and add defaults. This enables per-project control of Claude Code behavior.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","config"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:14.127Z","updatedAt":"2025-12-03T04:04:14.127Z","closedAt":null}
{"id":"oa-d313a1","title":"Add error recovery for Claude Code failures","description":"Handle Claude Code failures gracefully: 1) Timeout handling with AbortController, 2) API error recovery (rate limits, auth failures), 3) Mid-task crash recovery (save partial progress), 4) Fallback to minimal subagent when CC fails. Ensure no zombie processes or stuck states.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","reliability"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:21.133Z","updatedAt":"2025-12-03T04:04:21.133Z","closedAt":null}
{"id":"oa-d85e8e","title":"Bridge Claude Code sessions with progress.md","description":"When Claude Code runs, capture its session summary and merge into progress.md for next MechaCoder session. Extract: files modified, tools used, any blockers encountered, suggested next steps. This enables context bridging across CC session boundaries.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","sessions"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:40.412Z","updatedAt":"2025-12-03T04:04:40.412Z","closedAt":null}
{"id":"oa-958997","title":"Add E2E test for Golden Loop with Claude Code","description":"Create integration test that runs full Golden Loop: pick task, invoke Claude Code subagent, verify changes, run tests, commit. Use a mock/stub for actual API calls or a dedicated test project. Test both success path and fallback to minimal subagent.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","testing","e2e"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:40.553Z","updatedAt":"2025-12-03T04:04:40.553Z","closedAt":null}
{"id":"oa-392958","title":"Add token/cost tracking for Claude Code usage","description":"Track and log API token usage from Claude Code: input_tokens, output_tokens, cache hits, total_cost_usd. Store in progress.md or separate metrics file. Enable cost monitoring for overnight runs. Warn if approaching budget limits.","status":"open","priority":2,"type":"task","labels":["claude-code","mechacoder","observability","costs"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:40.706Z","updatedAt":"2025-12-03T04:04:40.706Z","closedAt":null}
{"id":"oa-5dbe87","title":"Generate CLAUDE.md from project context for Claude Code","description":"Claude Code reads CLAUDE.md for project instructions. Generate/update it from: 1) AGENTS.md content, 2) project.json settings, 3) common patterns from codebase. Ensure CC has project context when invoked. Update on significant project changes.","status":"open","priority":2,"type":"task","labels":["claude-code","mechacoder","config"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:40.862Z","updatedAt":"2025-12-03T04:04:40.862Z","closedAt":null}
{"id":"oa-8bb244","title":"Integrate Claude Code with verification phase","description":"After Claude Code completes a subtask, orchestrator must verify: 1) Run project.json testCommands, 2) Run typecheck if configured, 3) If tests fail, either retry with CC or fall back. Golden Loop rule: no commit if tests fail. Handle CC leaving repo in dirty state.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","verification"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:57.656Z","updatedAt":"2025-12-03T04:04:57.656Z","closedAt":null}
{"id":"oa-4a137d","title":"Handle rate limits and API errors from Anthropic","description":"Implement retry logic for Anthropic API: 1) Exponential backoff for rate limits (429), 2) Handle auth errors (401/403) by stopping gracefully, 3) Handle server errors (5xx) with retry. Log errors to progress.md. Consider switching to minimal subagent if limits persist.","status":"open","priority":1,"type":"task","labels":["claude-code","mechacoder","reliability"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:57.787Z","updatedAt":"2025-12-03T04:04:57.787Z","closedAt":null}
{"id":"oa-e0d033","title":"Create Claude Code integration epic","description":"Epic tracking all Claude Code integration work for MechaCoder Golden Loop. Parent for: oa-cc01-06 (core integration), oa-ea3620 (config), oa-d313a1 (error recovery), oa-d85e8e (session bridging), oa-958997 (E2E test), and related tasks.","status":"open","priority":1,"type":"epic","labels":["claude-code","mechacoder"],"deps":[],"commits":[],"createdAt":"2025-12-03T04:04:57.948Z","updatedAt":"2025-12-03T04:04:57.948Z","closedAt":null}
