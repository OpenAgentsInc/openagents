[workspace]
resolver = "2"
members = [
    "crates/agent",
    "crates/archivist",
    "crates/atif",
    "crates/atif-store",
    "crates/fm-bridge",
    "crates/commander",
    "crates/gpui",
    "crates/gpui_macros",
    "crates/collections",
    "crates/http_client", # Package name is reqwest_client
    "crates/hillclimber",
    "crates/util",
    "crates/util_macros",
    "crates/refineable",
    "crates/sum_tree",
    "crates/media",
    "crates/testgen",
    "crates/unit",
    "crates/hud",
    "crates/storybook",
    "crates/tasks",
    "crates/config",
    "crates/tools",
    "crates/llm",
    "crates/orchestrator",
    "crates/cli",
    "crates/parallel",
    "crates/perf",
    "crates/theme",
    "crates/gym",
    "crates/sandbox",
    "crates/nostr",
    "crates/nostr-relay",
    "crates/nostr-chat",
    "crates/ui",
    "crates/marketplace",
    "crates/reflexion",
    "crates/guardrails",
    "crates/sessions",
    "crates/healer",
    "crates/oanix",
    "crates/vibe",
    "crates/harbor",
    "crates/telemetry",
]

[workspace.lints.rust]
missing_docs = "allow"
unexpected_cfgs = { level = "warn", check-cfg = ['cfg(perf_enabled)'] }

[workspace.package]
version = "0.1.0"
edition = "2024"
authors = ["OpenAgents"]
license = "CC-0"

[workspace.dependencies]
# Workspace member crates
gpui = { path = "crates/gpui" }
gpui_macros = { path = "crates/gpui_macros" }
collections = { path = "crates/collections" }
util = { path = "crates/util" }
util_macros = { path = "crates/util_macros" }
refineable = { path = "crates/refineable" }
sum_tree = { path = "crates/sum_tree" }
media = { path = "crates/media" }
derive_refineable = { path = "crates/refineable/derive_refineable" }
reqwest_client = { path = "crates/http_client" }
http_client = { path = "crates/http_client", package = "reqwest_client" }
tasks = { path = "crates/tasks" }
config = { path = "crates/config" }
tools = { path = "crates/tools" }
llm = { path = "crates/llm" }
orchestrator = { path = "crates/orchestrator" }
cli = { path = "crates/cli" }
parallel = { path = "crates/parallel" }
sandbox = { path = "crates/sandbox" }
telemetry = { path = "crates/telemetry" }

# External dependencies (from Zed workspace)
tracing = "0.1.40"
tracing-subscriber = { version = "0.3", features = ["env-filter", "json", "fmt"] }
tracing-bunyan-formatter = "0.3"
tracing-log = "0.2"

# OpenTelemetry (optional in telemetry crate via feature flag)
opentelemetry = "0.21"
opentelemetry-otlp = { version = "0.14", features = ["tonic"] }
opentelemetry_sdk = { version = "0.21", features = ["rt-tokio"] }
tracing-opentelemetry = "0.22"
perf = { path = "crates/perf" }
mach2 = "0.5"
walkdir = "2.5"
take-until = "0.2.0"
serde_urlencoded = "0.7"
http-body = "1.0"
http = "1.1"
syn = { version = "2.0.101", features = ["full", "extra-traits", "visit-mut"] }
quote = "1.0.9"
proc-macro2 = "1.0.93"
heck = "0.5"
rustc-hash = "2.1.0"
windows-core = "0.61"
windows = "0.61"
objc = "0.2"
metal = "0.29"
core-video = { version = "0.4.3", features = ["metal"] }
cocoa-foundation = "=0.2.0"
scap = { git = "https://github.com/zed-industries/scap", rev = "4afea48c3b002197176fb19cd0f9b180dd36eaac", default-features = false, package = "zed-scap", version = "0.0.8-zed" }
naga = { version = "25.0", features = ["wgsl-in"] }
stacksafe = "0.1"
slotmap = "1.0.6"
inventory = "0.3.19"
circular-buffer = "1.0"
aho-corasick = "1.1"
backtrace = "0.3"
alacritty_terminal = { git = "https://github.com/alacritty/alacritty", rev = "91d034ff8b53867143c005acfaa14609147c9a2c" }
any_vec = "0.14"
anyhow = "1.0.86"
arrayvec = { version = "0.7.4", features = ["serde"] }
ashpd = "0.9.1"
async-compat = "0.2.1"
async-compression = { version = "0.4", features = ["gzip", "futures-io"] }
async-dispatcher = "0.1"
async-fs = "1.6"
async-pipe = { git = "https://github.com/zed-industries/async-pipe-rs", rev = "82d00a04211cf4e1236029aa03e6b6ce2a74c553" }
async-recursion = "1.0.0"
async-tar = "0.5.0"
async-trait = "0.1"
async-tungstenite = "0.24"
async-watch = "0.3.1"
async_zip = { version = "0.0.17", features = ["deflate", "deflate64"] }
base64 = "0.22"
bitflags = "2.6.0"
blade-graphics = { git = "https://github.com/kvark/blade", rev = "e142a3a5e678eb6a13e642ad8401b1f3aa38e969" }
blade-macros = { git = "https://github.com/kvark/blade", rev = "e142a3a5e678eb6a13e642ad8401b1f3aa38e969" }
blade-util = { git = "https://github.com/kvark/blade", rev = "e142a3a5e678eb6a13e642ad8401b1f3aa38e969" }
blake3 = "1.5.3"
bytes = "1.0"
cargo_metadata = "0.18"
cargo_toml = "0.20"
chrono = { version = "0.4", features = ["serde"] }
clap = { version = "4.4", features = ["derive"] }
clickhouse = "0.11.6"
cocoa = "0.26"
convert_case = "0.6.0"
core-foundation = "=0.10.0"
core-foundation-sys = "0.8.6"
ctor = "0.2.6"
dashmap = "6.0"
derive_more = "0.99.17"
dirs = "4.0"
ec4rs = "1.1"
emojis = "0.6.1"
env_logger = "0.11"
exec = "0.3.1"
fork = "0.2.0"
futures = "0.3"
futures-batch = "0.6.1"
futures-lite = "1.13"
git2 = { version = "0.19", default-features = false }
globset = "0.4"
handlebars = "4.3"
heed = { version = "0.20.1", features = ["read-txn-no-tls"] }
hex = "0.4.3"
html5ever = "0.27.0"
hyper = "0.14"
ignore = "0.4.22"
image = "0.25.1"
indexmap = { version = "1.6.2", features = ["serde"] }
indoc = "2"
itertools = "0.13.0"
jsonwebtoken = "9.3"
libc = "0.2"
linkify = "0.10.0"
log = { version = "0.4.16", features = ["kv_unstable_serde", "serde"] }
markup5ever_rcdom = "0.3.0"
nanoid = "0.4"
nbformat = "0.3.2"
nix = "0.29"
num-format = "0.4.4"
once_cell = "1.19.0"
ordered-float = "2.1.1"
palette = { version = "0.7.5", default-features = false, features = ["std"] }
parking_lot = "0.12.1"
pathdiff = "0.2"
pet = { git = "https://github.com/microsoft/python-environment-tools.git", rev = "ffcbf3f28c46633abd5448a52b1f396c322e0d6c" }
pet-conda = { git = "https://github.com/microsoft/python-environment-tools.git", rev = "ffcbf3f28c46633abd5448a52b1f396c322e0d6c"  }
pet-core = { git = "https://github.com/microsoft/python-environment-tools.git", rev = "ffcbf3f28c46633abd5448a52b1f396c322e0d6c"  }
pet-poetry = { git = "https://github.com/microsoft/python-environment-tools.git", rev = "ffcbf3f28c46633abd5448a52b1f396c322e0d6c"  }
pet-reporter = { git = "https://github.com/microsoft/python-environment-tools.git", rev = "ffcbf3f28c46633abd5448a52b1f396c322e0d6c"  }
postage = { version = "0.5", features = ["futures-traits"] }
pretty_assertions = "1.3.0"
profiling = "1"
prost = "0.9"
prost-build = "0.9"
prost-types = "0.9"
pulldown-cmark = { version = "0.12.0", default-features = false }
rand = "0.8.5"
rayon = "1.8"
regex = "1.5"
repair_json = "0.1.0"
reqwest = { git = "https://github.com/zed-industries/reqwest.git", rev = "c15662463bda39148ba154100dd44d3fba5873a4", default-features = false, features = ["charset", "http2", "macos-system-configuration", "multipart", "rustls-tls-native-roots", "socks", "stream"], package = "zed-reqwest", version = "0.12.15-zed" }
rsa = "0.9.6"
runtimelib = { version = "0.30.0", default-features = false, features = ["async-dispatcher-runtime", "aws-lc-rs"] }
rustc-demangle = "0.1.23"
rust-embed = { version = "8.4", features = ["include-exclude"] }
rustls = "0.20.3"
rustls-native-certs = "0.8.0"
schemars = { version = "1.0", features = ["indexmap2"] }
semver = "1.0"
serde = { version = "1.0", features = ["derive", "rc"] }
serde_derive = { version = "1.0", features = ["deserialize_in_place"] }
serde_json = { version = "1.0", features = ["preserve_order", "raw_value"] }
serde_json_lenient = { version = "0.2", features = ["preserve_order", "raw_value"] }
serde_repr = "0.1"
sha2 = "0.10"
shellexpand = "2.1.0"
shlex = "1.3.0"
signal-hook = "0.3.17"
similar = "1.3"
simplelog = "0.12.2"
smallvec = { version = "1.6", features = ["union"] }
smol = "1.2"
sqlformat = "0.2"
strsim = "0.11"
strum = { version = "0.25.0", features = ["derive"] }
subtle = "2.5.0"
sys-locale = "0.3.1"
sysinfo = "0.31.0"
tempfile = "3.9.0"
thiserror = "1.0.29"
tiktoken-rs = "0.5.9"
time = { version = "0.3", features = ["macros", "parsing", "serde", "serde-well-known", "formatting", "local-offset"] }
tiny_http = "0.8"
toml = "0.8"
tokio = { version = "1" }
tower-http = "0.4.4"
tree-sitter = { version = "0.23", features = ["wasm"] }
tree-sitter-bash = "0.23"
tree-sitter-c = "0.23"
tree-sitter-cpp = "0.23"
tree-sitter-css = "0.23"
tree-sitter-elixir = "0.3"
tree-sitter-embedded-template = "0.23.0"
tree-sitter-go = "0.23"
tree-sitter-go-mod = { git = "https://github.com/zed-industries/tree-sitter-go-mod", rev = "a9aea5e358cde4d0f8ff20b7bc4fa311e359c7ca", package = "tree-sitter-gomod" }
tree-sitter-gowork = { git = "https://github.com/zed-industries/tree-sitter-go-work", rev = "acb0617bf7f4fda02c6217676cc64acb89536dc7" }
tree-sitter-heex = { git = "https://github.com/zed-industries/tree-sitter-heex", rev = "1dd45142fbb05562e35b2040c6129c9bca346592" }
tree-sitter-diff = "0.1.0"
tree-sitter-html = "0.20"
tree-sitter-jsdoc = "0.23"
tree-sitter-json = "0.23"
tree-sitter-md = { git = "https://github.com/tree-sitter-grammars/tree-sitter-markdown", rev = "9a23c1a96c0513d8fc6520972beedd419a973539" }
tree-sitter-python = "0.23"
tree-sitter-regex = "0.23"
tree-sitter-ruby = "0.23"
tree-sitter-rust = "0.23"
tree-sitter-typescript = "0.23"
tree-sitter-yaml = { git = "https://github.com/zed-industries/tree-sitter-yaml", rev = "baff0b51c64ef6a1fb1f8390f3ad6015b83ec13a" }
unicase = "2.6"
unindent = "0.1.7"
unicode-segmentation = "1.10"
url = "2.2"
uuid = { version = "1.1.2", features = ["v4", "v5", "serde"] }
wasmparser = "0.215"
wasm-encoder = "0.215"
wasmtime = { version = "29", default-features = false, features = ["async", "demangle", "runtime", "cranelift", "component-model", "incremental-cache", "parallel-compilation"] }
wasmtime-wasi = "29"
which = "6.0.0"
wit-component = "0.201"
zstd = "0.11"

[profile.dev]
opt-level = 1

[profile.release]
opt-level = 3
lto = true
codegen-units = 1
