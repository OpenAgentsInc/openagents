# Autopilot Desktop Codex Status

Date: 2026-02-19 17:40  
Scope: `apps/autopilot-desktop/` Codex readiness and runtime integration state.

## Executive Status

`apps/autopilot-desktop/` is working and integration-stage.  
It is not yet fully production-ready for end-to-end unified desktop administration through runtime as final authority.

## How Desktop Uses Codex

Desktop currently runs Codex locally/directly through `AppServerClient`:

- session/thread lifecycle (`thread_start`, `thread_resume`)
- turn lifecycle (`turn_start`, `turn_interrupt`)

Primary references:

- `apps/autopilot-desktop/src/main.rs:1140`
- `apps/autopilot-desktop/src/main.rs:1179`

## Runtime Sync Path (Current)

Desktop optionally mirrors local Codex session state into runtime when `OPENAGENTS_RUNTIME_SYNC_*` environment variables are set.

What is mirrored:

- worker create/reattach with stable per-thread worker IDs
- async notification ingest to runtime worker events
- periodic worker heartbeat events

Primary references:

- `apps/autopilot-desktop/src/main.rs:88`
- `apps/autopilot-desktop/src/main.rs:171`
- `apps/autopilot-desktop/src/main.rs:252`
- `apps/autopilot-desktop/src/main.rs:1254`

Runtime event taxonomy mapping (`worker.started`, `worker.event`, `worker.error`, `worker.heartbeat`, `worker.stopped`):

- `apps/autopilot-desktop/src/main.rs:353`

## Cross-Surface Admin/Visibility State

Runtime worker APIs are implemented and test-covered:

- `apps/openagents-runtime/docs/RUNTIME_CONTRACT.md:384`
- `apps/openagents-runtime/test/openagents_runtime_web/controllers/codex_worker_controller_test.exs:1`

Laravel proxy/admin APIs are implemented and test-covered:

- `apps/openagents.com/app/Http/Controllers/Api/RuntimeCodexWorkersController.php:1`
- `apps/openagents.com/tests/Feature/Api/RuntimeCodexWorkersApiTest.php:1`

Web and mobile Codex worker admin/observability surfaces exist:

- `apps/openagents.com/resources/js/pages/admin/index.tsx:1`
- `apps/mobile/app/screens/CodexWorkersScreen.tsx:1`

## Verified Build/Test Snapshot

Executed during this status review:

1. `cargo check -p autopilot-desktop`  
   Result: pass (warnings only).
2. `cargo check -p pylon`  
   Result: pass.
3. `cd apps/openagents-runtime && mix test test/openagents_runtime_web/controllers/codex_worker_controller_test.exs`  
   Result: pass (8 tests).
4. `cd apps/openagents.com && php artisan test --filter=RuntimeCodexWorkersApiTest`  
   Result: pass (6 tests).

## Main Readiness Gap

Runtime adapter selection still resolves non-`in_memory` adapters to `InMemory`.
That means `desktop_bridge` is not yet a true runtime-executed adapter path.

Primary references:

- `apps/openagents-runtime/lib/openagents_runtime/codex/worker_supervisor.ex:36`
- `apps/openagents-runtime/lib/openagents_runtime/codex/worker_supervisor.ex:37`

Practical impact:

- desktop-originated activity is mirrored and visible cross-surface,
- but runtime-driven worker request execution is not yet fully bridged into live desktop execution semantics.

## Readiness Verdict

1. Local Rust desktop Codex execution: solid.
2. Runtime-mirrored visibility and admin surfaces: good.
3. Fully unified desktop-admin-through-runtime maturity: partial/beta, not final production-complete.

## Plan Alignment

Canonical integration plan and remaining hardening references:

- `docs/codex/unified-runtime-desktop-plan.md:130`
- `docs/codex/unified-runtime-desktop-plan.md:182`
