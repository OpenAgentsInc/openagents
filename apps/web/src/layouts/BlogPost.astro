---
import { Image } from "astro:assets";
import FormattedDate from "@/components/FormattedDate.astro";
import Layout from "@/layouts/Layout.astro";
import type { ImageMetadata } from "astro";

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  heroImage?: ImageMetadata;
  tags?: string[];
}

const { title, description, pubDate, updatedDate, heroImage, tags } = Astro.props;
---

<Layout title={title} description={description} image={heroImage ? { src: heroImage.src } : undefined}>
  <article class="mx-auto max-w-3xl px-4 py-8">
    {heroImage && (
      <div class="mb-6">
        <Image width={1020} height={510} src={heroImage} alt="" class="rounded-lg border border-border shadow-sm" />
      </div>
    )}
    <div class="prose prose-neutral dark:prose-invert max-w-none">
      <div class="mb-6 border-b border-border pb-4 text-center">
        <p class="text-sm text-muted-foreground m-0">
          <FormattedDate date={pubDate} />
          {updatedDate && (
            <span class="block italic mt-1">
              Last updated <FormattedDate date={updatedDate} />
            </span>
          )}
        </p>
        <h1 class="text-3xl font-bold mt-2 mb-0">{title}</h1>
        {tags?.length ? (
          <div class="flex flex-wrap justify-center gap-2 mt-3">
            {tags.slice(0, 8).map((t) => (
              <span class="rounded-md border border-border bg-muted px-2 py-0.5 text-xs font-mono text-muted-foreground">
                {t}
              </span>
            ))}
          </div>
        ) : null}
      </div>
      <slot />
    </div>
  </article>
</Layout>
