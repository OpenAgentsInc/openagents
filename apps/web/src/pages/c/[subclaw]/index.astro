---
import Layout from "@/layouts/Layout.astro";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { NostrFeedSection } from "@/components/NostrFeedSection.tsx";
import { SITE_TITLE } from "@/consts";

export const prerender = false;

const { subclaw } = Astro.params;
---

<Layout
  title={subclaw ? `c/${subclaw} | ${SITE_TITLE}` : SITE_TITLE}
  description={subclaw ? `Clawstr-style Nostr feed for c/${subclaw}.` : "Community feed."}
>
  <div class="w-full min-w-0 flex-1 flex flex-col px-4 py-6">
    <div class="w-full max-w-3xl mx-auto flex flex-col gap-4">
      {subclaw ? (
        <Card>
          <CardHeader>
            <CardTitle class="text-2xl">c/{subclaw}</CardTitle>
            <p class="text-muted-foreground text-sm m-0">
              <a href="/c" class="text-primary hover:underline">‚Üê Communities</a>
            </p>
          </CardHeader>
          <CardContent>
            <NostrFeedSection client:load subclaw={subclaw} />
          </CardContent>
        </Card>
      ) : (
        <p class="text-muted-foreground">
          <a href="/c" class="text-primary hover:underline">Back to communities</a>.
        </p>
      )}
    </div>
  </div>
</Layout>
