[package]
name = "protocol"
version.workspace = true
edition.workspace = true
license.workspace = true
description = "Protocol layer for typed job schemas with deterministic hashing"

[lib]
name = "protocol"
path = "src/lib.rs"

[dependencies]
# Serialization - preserve_order for canonical JSON
serde = { version = "1.0", features = ["derive"] }
serde_json = { version = "1.0", features = ["preserve_order"] }

# Hashing
sha2 = "0.10"
hex = "0.4"

# Error handling
thiserror = "2.0"

# Optional: integration with existing nostr types
nostr = { path = "../nostr/core", optional = true }

[features]
default = []
nostr-integration = ["nostr"]

[dev-dependencies]
serde_json = "1.0"
