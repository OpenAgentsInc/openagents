We’re building a **headless, agent-only search & orchestration engine** for macOS (with optional iOS client) that indexes a repo, runs **hybrid retrieval** (FTS5 lexical + Core ML embeddings + fusion), and streams **typed results** and **plans** to agents. Storage is SQLite (FTS + vector blobs), chunking is block-aware with safe span reads, and performance targets are <300–700ms p95 depending on mode. The flagship flow is **“Explore Codebase”**: one call kickstarts indexing, generates a live plan on-device (snapshot streaming), executes grep/semantic/span ops, and returns an `ExploreSummary` (languages, entrypoints, top files). Background indexing is allowed; when a session subscribes, we mirror progress as a synthetic tool call.

Everything on the wire is **ACP-shaped**. We use the ACP `initialize` handshake, then keep all activity inside `session/*`: engine ops are ACP **tool calls** (`search.lexical|semantic|hybrid`, `content.get_span`, `orchestrate.explore.start`), and results stream as `tool_call_update` with **typed payloads** (`type`, `schema_version`, checksum). Plans map to `ACPPlan` entries; IDs (`planId`, `snapshotId`, `opId`) make streaming monotonic and replayable. Policy is local-first and permissive (assume-allow FS; external LLMs gated by allowlist). The spec locks down encoding, payload bounds, concurrency/backpressure, error codes, and adds a full test matrix (unit, integration, ACP parity, performance) targeting the default workspace at `/Users/christopherdavid/code/openagents`.
