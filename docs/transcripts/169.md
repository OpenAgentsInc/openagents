# OpenAgents Video Series - Episode 169

## Video Information

- **Title**: OpenAgents ⚡ - Episode 169: Agent Payments API  At this weekend's @PlebLab hackathon...
- **Creator**: OpenAgents ⚡
- **Duration**: 25:58
- **Published**: May 05, 2025
- **URL**: https://x.com/OpenAgentsInc/status/1919419077887410389
- **Transcribed**: June 07, 2025
- **Language**: en

## Full Transcript

Hey, we're back at pleb lab. How's it going everybody? We are at the Rusty vibe coding AI something something hackathon and we're here to introduce the open agents API This is way less mature and stable than the ZapRite API So if you're like you want something stable and mature and production ready ZapRite's the way to go if you want something bleeding edge and like you'll find some bugs that are hilarious But you'll build cool shit. Yeah, use the open agents API same prize purse deal And ZapRite so this is available now our docs on our new site at open agents calm. You can check this out. I'm going to step through it The big idea here is we want to let you transact money To and from agents as easy as making a single API call We are building on top of the just released spark SDK from light spark that came out a few days ago It's like a late they call it a layer to it's really a state chain That kind of like sits on top of lightning in some interesting ways that enables a few things like if you want an agent to send to another agent And it's sort of like within the same ecosystem or just really any agent that's using spark You can send agent to agent instantly with no fees whatsoever and not even to worry about channel liquidity So that's a nice feature to kind of add and everything's got exit to lightning exit to Bitcoin if you want to So let's go through a few things. So let's just start off This is my like draft blog post. We're gonna be like announcing this formally on Monday And my hope is between now and then I'm able to like showcase some of the cool things that you guys build in this post Using our new agents payments API so the my favorite quote will start with from Michael sailor is the AIs are coming The AIs don't get bank accounts. They don't get credit cards the AIs the artificial economy intelligence economy will be built on digital capital Digital property. It will be a hundred trillion dollar economy. It will be built on Bitcoin Obviously, this is going to require agents to be able to be economic actors and transact with Bitcoin There has not really been an easy way to do this. I argue until now We have this amazing thing that we're building on top of called the spark SDK we've been sort of alpha beta testing this for a number of months They just launched to main net like three days ago Car asked me to put together an API something for you guys to chew on this week And I'll like all right well. I'll build an API on top of spark you can always build directly with spark They have only right now a node JS SDK for server side they're in the process of doing a rust one, but it's not like to parody of their node JS one But I was like okay, here's where I'll just like throw an API on top of this so you can consume this from any application So if you're coding today and you're back in this and rust you're able to easily use our APIs for this and You know you might think that you can if you're like new to developing make sure you know that like any time that you're dealing with secure credentials It's important that you not include them in the client side So even though you could be making HTTP requests from the client side Maybe that might help you during the course of like a hackathon just kind of proof stuff out Basically never deploy your your keys to to client side Okay, so a couple of things here Let's go through the docs so super simple in this case our agents API This is largely just table stakes it gets you a thing. There's no agentsic behavior here here at all So the only relevant thing that you can do here is like have a thing that you're gonna have access to a wallet the relevant thing here is in agent payments So you can do a few different things here. You can create a wallet for a given agent You can check its wallet balance and you can do payments either through Lightning or through Spark so let's say that you want to be able to Create an agent that presents a lightning invoice to the user because you want the user to fund the agent You'll do create invoice and you'll get back a bullet 11 Render a QR code in the way that you're used to doing the user pays the agent balance will be instantly funded Now hopefully with that agent that you have that has a balance Hopefully you can now think of some interesting things to do do you want that agent to be able to pay an invoice and here's where you're Gonna use your tools like cursor your tools like other LLM that you probably have access, you know all of the very many Multi-billion dollar labs that are throwing credits and stuff at you to be able to make it easy for you to do LLM type things Use the first L.A. ISDK through this into there. Maybe you're gonna just create a tool around this And now you have an agent that's able to make payments very easily if you're wanting it to kind of transact through the world of You know other lightning enabled services these agents can all pay invoices And then there's like one subset of cool things you can do with that There's another subset of cool things that you can do with sending payments to other agents One thing that if I'm gonna be judging and looking for people who are using this in the coolest way Ideally, you're able to do something You know picking one of those two things or maybe combining them where you're interacting with the outside world using the Bitcoin payments But then I'd love to see some cool new Applications around agent to agent commerce Particularly if you're able to work with some of the other people that are also building on this API All of these agents have spark wallets when you create an agent Then you create this wallet and I'll demo these endpoints in a second You're gonna get back an identity that's a public case you can use that for you know Attaching a Noster metadata to it if you want but more importantly you get a spark address This spark address is Globally like anybody can send to this spark address So maybe some of you make like a little web page and your agent has an address that some other agent can talk to Or you don't even skip the web page part and just do this all as MCPs Okay, so in terms of using this you can kind of like look through these docs If there's anything like confusing about this, please let me know obviously this was kind of like thrown together rather quickly I did basic testing of it to make sure that it works and it does We separately also have an open agents API Jason I got to add the links still to the docs But if you go to open agents.com slash open API You can also just do open API dot Jason it'll both take you to the same place. That one starts off pretty pretty bright So you basically you just dump this into any application and have it working So let's actually try this out. First let's just go to chat to be T and ask for a like summarize this and what's possible I'm just gonna pretend that I'm super new what's possible and how do I use it? I'll be floating around during the hackathon you can always come up to me and ask questions and certainly if anything is like not Behaving the way that it seems to from the docs. Please let me know Well, let's just step through what chat GBT thinks is You know what this API makes possible. Here's the summary The open agents API that you create and manage AI agents give each agent a wallet send and receive lightning payments through agents I don't even know that it knows what spark even is, but that's one of the other endpoints. So Create agent list agents get agents basics stuff and then wallet management create wallet get balance and then payments Create and pay invoice and then when it says here send sats Gosh, I think that it's just for spark this one here, but maybe it's maybe I Maybe the AI attached with this did it more thorough job than even I asked to do okay, so for authentication You need an API token. You're gonna get that for free on our website. There's a page on the docs called authentication You'll see this in a second when I step through the flow you just click generate IP You sign up with just an email in the password. There's no verification anything I don't care who you are just you know free account email password you generate an API key That's what you use for authentication as a bear now you'll be able to copy Things like this and then swap in your credentials This is just kind of like a dummy thing this this signature doesn't do anything, but if you go to agent payments You should see all the information that you need for the actual like copy pasteable URL You know That will come to our doc site in the next few days probably, but for now just ask Chat GPT or any UI Curse or whatever of your choice to give you a curl request like this or if you're building and rust You can ask it to give you like whatever rust HTTP library you're using it'll create you just whatever their basics for like simple HTTP fetching There's no special magic here. You don't need an SDK to interact with this stuff You have an HTTP endpoint that should work Your API token gets you access to that. Okay, so let's actually step through this and test it out So I'm gonna go to openagels.com create a new user The other cool thing I'm looking for is we have a stats page on openagels.com I see two of you have already signed up When you create an account you'll see if I just use this go up We have the number of agent instances We also have the value Transacted and I've only tested this on my local machine So I'm gonna try to get like numbers on the board here. It should say You know the amount of spark payments and lightning payments transacted in the total I will probably be in the judging criteria looking to see like whoever drives the most volume And makes these numbers go up the most that will factor the judging for sure Hopefully you're not just sending a payment between two agents infinitely. Although that would be valuable too for stress testing purposes Okay, let's sign up We'll call this Chris hack test man email blah blah blah password All right, I'm in I'm redirected to the docs. I'm gonna go to get a API key Um Oh fuck where did I put the API key part? Okay Okay, I set up a redirect because the dashboard generally wasn't ready Fuck oh here it is. I'm in there. I'm in there. Sorry bottom left. Okay. This is what you get for for building a UI in three seconds Bottom left you have settings. Please let me into the settings. Okay. Thank God. Okay. Here it is Dashboard will just redirect to the docs. I don't have any actual dashboard there. All right. We're good. We found it. We found it Okay API keys Okay, so here you're gonna name an API key. I'm gonna call it blah blah blah doesn't matter Create API key API key created sorry. There's no like nice copy button here, but I'm gonna copy this into a note There's my API key feel free to impersonate me. I don't care That's generally what it's gonna look like you say I've got my API key. It will not show up again. You get the basics information here For just a basic test of your API key. Let's try this request here I'm gonna copy that. I'm gonna draw my API key make sure to include this front part with the thing there and Let's make an API request. I'm gonna go to my terminal Ignore all that stuff. Let's try this Okay, we have our user ID 6 Chris hack test man email email verified blah blah blah And that just shows you the that's who you are log in at if someone else hits that endpoint They're not gonna get your information because they don't have your bear token. Okay, so let's try some of these nice little things that Chat you gave us so I'm gonna go do this one first What did tell me to create an agent? Let's create an agent when I also draw my API key in here and Let's create an agent called my awesome live agent and Let's try that and actually let's take a look at the before and after of the stats page just to make sure that's updating correctly So I've got agent instances five Paste enter misspelled refresh all right. We have agent instance number six now. Let's even get value transacted Let's go back to here create wallet for now you have to create a wallet After you create the agent I may consolidate that but let's just do this Let's create a wallet and this is gonna be communicating to our Server which is throw again air let's go see what it is Let's see we got here. Here's my Where the service is hosted check out the logs here A spark API running on port 8080. Okay, it's working But I got an error so let's try this again on oh, oh, okay if you see a massive mess steak that I make feel free to shout out Here I didn't put in the Asian ID So you're gonna take the agent ID that you get back from the previous step which in this case was six and you're gonna drop it right there All right, you got to tell it what you're creating the law for so Just gonna take a couple seconds because it is failed a great wallet service and available great. Let's take a look Okay, we crash the app excellent Let's see what happened so Yesterday I Was doing this and it was working amazingly for two days in a row and then I got an error like this with spark off end service And the light spark service actually went down because their database was growing too fast and they had to scale it up So like the service was just down for 30 minutes and like I don't know if they knew that it or and I just flagged them something I don't know if they knew that already or not. Well within 30 minutes are reported and then they fixed it Let's see if we can figure out what's going on here All right authentication error client error spark. Ethnic or verify channel received rst stream with server error Verify challenge authentication failed So the beautiful part about one beautiful thing about spark is that the SDK does not require any API keys like if you use the breeze SDK you have to drop it in an API key that you get from them With spark it's all really just like you're using your bit 39 entropy similar to breeze for example You're making a call to the the the SDK that they're using And then that's just communicating to their servers The problem is if their server is not accessible, which it looks like is the case here. Let's try it maybe one more time And then maybe I'll try again locally just to rule out that we don't have any problem there so We got it working sometimes you just got to try it a second time all of this stuff is bleeding edge stuff I don't know why this succeeded in the previous one didn't but We appreciate your help testing our beta API, which is sitting on top of a beta SDK and if you didn't If you didn't see this beta warning let's zoom it in the open agents API is currently in beta Do not use it with live funds that you aren't willing to use I'm gonna fund this with like 10 sats Spark does have like a reg test Way of using it. I just haven't set that up at all. This is all main net So you know back in the early days of lightning we call it hashtag reckless like it's production But you'll probably lose your stuff. So hashtag reckless over on top of this Okay, so when you successfully create an agent you'll get back agent ID and the spark address So this is a thing that if you are interacting with somebody else's agent if you give them this spark address They should be able to pay your agent When you run the balance check command you should then see the balance update There is one kind of unique thing about the spark infrastructure, which is that like in order for the balance update to show You have to like re-initialize your wallet which I think is done by a wallet balance check There's been a couple of things times where I've had to like kind of do an additional check or initialization There's like something that we may run into if you're your balance doesn't immediately update I've got like a longer explanation for that that AI help me understand that I'll probably post on the doc But let's just try this right now. So we've got our first wallet active We're gonna do that again and we're gonna fund this wallet. Let's see if it actually works So I'm gonna create another agent and we'll call this one Let's go back to here. Let's do create an agent. We'll call this one agent to and I want to try to get one agent funded and then paying the second agent and then we'll call that Call it the end. We'll call this my agent to Let's create another agent Clear that out my agent to created I've got to go again create a wallet for this gonna go back over here Just kind of save that and then where's my wallet creation one here Agents what was that ID 7 bear blah blah blah copy Paste Okay, I now have two Agents there's their information now generate a lightning invoice on let's do it on agent six So I'm gonna come over to here create a lightning invoice to fund it Curl blah blah blah was agent six I'm Going to drop in my API key Whenever you're using AI you get really good at copy pasting You a lot of practice with it and there will come a time when we're not copy pasting a bunch of stuff in here Okay, so let's do it for eight sats And do that see if that works Please spark yes, okay, we got it back here's our invoice I'm gonna copy this and paste it to my cash app which is On my phone right now does anyone want to pay this invoice? Let me see Can I drop it into the slack? Yeah Pid blah blah here's all my stuff okay car So in a second I will check the balance on that and then while he's doing that let's get the transaction ready Or the API call ready to so that's the payment Okay, so the send one is first sparked not pay. I don't care. I want to pay From agent six to agent seven Pay agent six after funding the lightning and voice So give me a what happened? We're okay. Let's just do a balance check. So give me a API call for The send of Five sats I'm gonna send five sats from agent six which should have a balance of eight sats. So let's First tell me how to check balance of agent six Okay Bearer where's my key Balance eight sats it worked hooray you also see token balances in there spark introduce a thing called LRC 20 tokens. I think intending initially to be used as stablecoins, but Shake coins on Bitcoin may be coming soon too. I don't know how much we'll participate in that kind of thing But these can support balances like stablecoins as well Let's see so we have a agent six with eight sats. We have agent seven with zero sats Let's just confirm that it actually has Zero sats by running that same command again with agent seven in there Okay, let's make a spark payment from six to seven and let's see if we end up with the same amount of sats Or if there's a fee that we don't know about Let's see Curve a blah blah so pay send From While it's six to recipient agent seven five sats Fingers crossed to the demo gods Perfect okay, so The transaction looks like it went through the status of transfer status sender key tweaked You can google that but that's the thing I was talking about earlier where it's like You need to you might need to re-initialize the Let's just let's just see what happens if we check the balance of six and seven so six Balance of sats three. That's what we expect to see and Seven Five okay, it worked. I guess the checking of the wallet like initialize it Okay, so we sent a five-sat transaction from agent one to agent two You if you had the spark address of any of these you'd be able to send Sats over spark to any of these And if you're you're also able to generate and pay lightning and voices from these That should be enough for like doing basic Payment related things the main objective here is like make it as easy for someone to add Lightning payments to any agent It's not even just any agent because you can be doing this with like like there's nothing even specifically Agente to go about what we implemented here or just like a series of API endpoints that can interact easily with lightning that you don't have to care about liquidity or channels or any of that kind of thing There's no KYC to this you shine up with it fake email and dress and password and like you can hit all the stuff And it should work. Oh, let's check out the see if we are stats page updated whole fingers crossed that worked No, something's wrong with our stats reporting for the Value transactions. We'll figure out that out later Well, we saw on the sparring network that that worked. Okay, any questions from anybody No So I'll be floating around any questions anybody has for these kind of things again I'd like to see hopefully like some amount of Volume of transactions and then maybe like some cool ways that these agents interact with existing lightning services If you say like oh here's how we figured out how to make this pay a zap right store check out something like that or if you got together with some other hackathon participant and You know did something cool with each other can I split the winnings if there's like two projects and do something cool Cool We get up or is like it knows Yes, or our previous if you go down to open a just calm we have an interface oops a Chat UI we've moved to v4.open a just calm if you get do a chat with AI and and this might be helpful for like vibe coding type things I Wouldn't recommend this right now like I personally I used to use this mostly as my daily driver, but right now like cloud code is just better But anyway We will be tying so so just a little bit of let me end on this note a little bit of where we're going with this So this payment thing we're blog we're announcing okay, so We want to be doing Bitcoin revenue sharing Where if you let's say that you refer someone who does a lot of that volume we want to give you a little piece of that we want to be Creating kind of a monetization layer for MCP so one thing that MCP is great at is like this idea of the possibility for Discovering services that your aIs can use but there's no kind of built-in payments are pricing with that So it's hard to discover like knowing what what is actually good like I want to know who's actually spending Compute on like top NC MCPs like that should be like something I could just pull up and see what where the sat flow is going to The objective here even though we're just starting by kind of like sitting on top of the spark SDK We want to add support to everything else is relevant in anything relevant to Bitcoin based finance for agents So stablecoins including tether so like to my knowledge spark is not doing anything with tether They've got their own like stablecoin partnership with something that has like 1% of the volume, but I want to add Tap root asset support to this that shouldn't be too difficult and so have you know agents able to also trans out with tether We're going to be combining this with a like a self-custodial web wallet So we're going to keep this kind of like experimental bleeding edge stuff for the AI agents But I want to be able to have a dashboard in here where you can kind of sweep your balances to your agent from your agents to your personal wallet The personal wall will be using will be on breeze. They just released their Web-based SDK using wasm. They took their SDK and made available to web agents You can now do breeze you know built into a website What we may offer some select LRC 20 tokens if we think they're cool No reason not to add trawm and e-cash do cash you and have these also speak l42 basically any kind of Bitcoin based protocol Agents should be able to speak it. I don't know which of these is going to be like more prominent or whatever But we would just want to make it easy for developers to be able to like have one API call and then just have all the Successful to them. So we'll be working on that over the next month or two I really really really appreciate any feedback anyone has you run into bugs. Please come tell me And best of luck to you. Thank you

## Timestamped Transcript

[0:00 - 0:02] Hey, we're back at pleb lab. How's it going everybody?

[0:03 - 0:12] We are at the Rusty vibe coding AI something something hackathon and we're here to introduce the open agents API

[0:13 - 0:17] This is way less mature and stable than the ZapRite API

[0:17 - 0:20] So if you're like you want something stable and mature and production ready

[0:20 - 0:26] ZapRite's the way to go if you want something bleeding edge and like you'll find some bugs that are hilarious

[0:26 - 0:31] But you'll build cool shit. Yeah, use the open agents API same prize purse deal

[0:31 - 0:39] And ZapRite so this is available now our docs on our new site at open agents calm. You can check this out. I'm going to step through it

[0:41 - 0:44] The big idea here is we want to let you

[0:44 - 0:45] transact

[0:46 - 0:46] money

[0:47 - 0:51] To and from agents as easy as making a single API call

[0:51 - 0:57] We are building on top of the just released spark SDK from light spark that came out a few days ago

[0:57 - 1:00] It's like a late they call it a layer to it's really a state chain

[1:01 - 1:07] That kind of like sits on top of lightning in some interesting ways that enables a few things like if you want an agent to send to another agent

[1:07 - 1:12] And it's sort of like within the same ecosystem or just really any agent that's using spark

[1:12 - 1:17] You can send agent to agent instantly with no fees whatsoever and not even to worry about channel liquidity

[1:17 - 1:23] So that's a nice feature to kind of add and everything's got exit to lightning exit to Bitcoin if you want to

[1:24 - 1:26] So let's go through a few things. So let's just start off

[1:26 - 1:30] This is my like draft blog post. We're gonna be like announcing this formally on Monday

[1:30 - 1:36] And my hope is between now and then I'm able to like showcase some of the cool things that you guys build in this post

[1:37 - 1:44] Using our new agents payments API so the my favorite quote will start with from Michael sailor is the AIs are coming

[1:44 - 1:52] The AIs don't get bank accounts. They don't get credit cards the AIs the artificial economy intelligence economy will be built on digital capital

[1:52 - 1:58] Digital property. It will be a hundred trillion dollar economy. It will be built on Bitcoin

[1:59 - 2:05] Obviously, this is going to require agents to be able to be economic actors and transact with Bitcoin

[2:05 - 2:09] There has not really been an easy way to do this. I argue until now

[2:09 - 2:13] We have this amazing thing that we're building on top of called the spark

[2:14 - 2:17] SDK we've been sort of alpha beta testing this for a number of months

[2:17 - 2:20] They just launched to main net like three days ago

[2:20 - 2:24] Car asked me to put together an API something for you guys to chew on this week

[2:24 - 2:29] And I'll like all right well. I'll build an API on top of spark you can always build directly with spark

[2:30 - 2:33] They have only right now a node JS

[2:34 - 2:39] SDK for server side they're in the process of doing a rust one, but it's not like to parody of their node JS one

[2:40 - 2:45] But I was like okay, here's where I'll just like throw an API on top of this so you can consume this from any application

[2:45 - 2:50] So if you're coding today and you're back in this and rust you're able to easily use our APIs for this and

[2:52 - 2:58] You know you might think that you can if you're like new to developing make sure you know that like any time that you're dealing with secure credentials

[2:58 - 3:01] It's important that you not include them in the client side

[3:02 - 3:04] So even though you could be making HTTP requests from the client side

[3:04 - 3:08] Maybe that might help you during the course of like a hackathon just kind of proof stuff out

[3:09 - 3:12] Basically never deploy your your keys to to client side

[3:13 - 3:14] Okay, so a couple of things here

[3:16 - 3:22] Let's go through the docs so super simple in this case our agents API

[3:22 - 3:28] This is largely just table stakes it gets you a thing. There's no agentsic behavior here here at all

[3:28 - 3:36] So the only relevant thing that you can do here is like have a thing that you're gonna have access to a wallet the relevant thing here is in agent payments

[3:36 - 3:39] So you can do a few different things here. You can create a wallet for a given agent

[3:39 - 3:45] You can check its wallet balance and you can do payments either through

[3:46 - 3:50] Lightning or through Spark so let's say that you want to be able to

[3:50 - 3:56] Create an agent that presents a lightning invoice to the user because you want the user to fund the agent

[3:56 - 3:59] You'll do create invoice and you'll get back a bullet 11

[4:00 - 4:05] Render a QR code in the way that you're used to doing the user pays the agent balance will be instantly funded

[4:06 - 4:09] Now hopefully with that agent that you have that has a balance

[4:09 - 4:16] Hopefully you can now think of some interesting things to do do you want that agent to be able to pay an invoice and here's where you're

[4:16 - 4:22] Gonna use your tools like cursor your tools like other LLM that you probably have access, you know all of the very many

[4:23 - 4:28] Multi-billion dollar labs that are throwing credits and stuff at you to be able to make it easy for you to do LLM type things

[4:28 - 4:33] Use the first L.A. ISDK through this into there. Maybe you're gonna just create a tool around this

[4:33 - 4:41] And now you have an agent that's able to make payments very easily if you're wanting it to kind of transact through the world of

[4:42 - 4:46] You know other lightning enabled services these agents can all pay invoices

[4:47 - 4:50] And then there's like one subset of cool things you can do with that

[4:50 - 4:55] There's another subset of cool things that you can do with sending payments to other agents

[4:55 - 5:00] One thing that if I'm gonna be judging and looking for people who are using this in the coolest way

[5:01 - 5:03] Ideally, you're able to do something

[5:03 - 5:09] You know picking one of those two things or maybe combining them where you're interacting with the outside world using the Bitcoin payments

[5:09 - 5:10] But then I'd love to see some cool

[5:11 - 5:11] new

[5:12 - 5:14] Applications around agent to agent commerce

[5:15 - 5:20] Particularly if you're able to work with some of the other people that are also building on this API

[5:20 - 5:25] All of these agents have spark wallets when you create an agent

[5:26 - 5:30] Then you create this wallet and I'll demo these endpoints in a second

[5:30 - 5:35] You're gonna get back an identity that's a public case you can use that for you know

[5:35 - 5:38] Attaching a Noster metadata to it if you want but more importantly you get a spark address

[5:38 - 5:40] This spark address is

[5:41 - 5:44] Globally like anybody can send to this spark address

[5:44 - 5:49] So maybe some of you make like a little web page and your agent has an address that some other agent can talk to

[5:50 - 5:53] Or you don't even skip the web page part and just do this all as MCPs

[5:55 - 5:58] Okay, so in terms of using this you can kind of like look through these docs

[5:58 - 6:03] If there's anything like confusing about this, please let me know obviously this was kind of like thrown together rather quickly

[6:03 - 6:06] I did basic testing of it to make sure that it works and it does

[6:06 - 6:09] We separately also have an open agents API

[6:09 - 6:11] Jason I got to add the links still to the docs

[6:11 - 6:14] But if you go to open agents.com slash open API

[6:15 - 6:21] You can also just do open API dot Jason it'll both take you to the same place. That one starts off pretty pretty bright

[6:21 - 6:25] So you basically you just dump this into any application and have it working

[6:25 - 6:31] So let's actually try this out. First let's just go to chat to be T and ask for a like summarize this and what's possible

[6:31 - 6:36] I'm just gonna pretend that I'm super new what's possible and how do I use it?

[6:38 - 6:43] I'll be floating around during the hackathon you can always come up to me and ask questions and certainly if anything is like not

[6:43 - 6:46] Behaving the way that it seems to from the docs. Please let me know

[6:46 - 6:49] Well, let's just step through what chat GBT thinks is

[6:49 - 6:52] You know what this API makes possible. Here's the summary

[6:53 - 7:00] The open agents API that you create and manage AI agents give each agent a wallet send and receive lightning payments through agents

[7:00 - 7:04] I don't even know that it knows what spark even is, but that's one of the other endpoints. So

[7:04 - 7:12] Create agent list agents get agents basics stuff and then wallet management create wallet get balance and then payments

[7:13 - 7:16] Create and pay invoice and then when it says here send sats

[7:17 - 7:21] Gosh, I think that it's just for spark this one here, but maybe it's maybe I

[7:21 - 7:27] Maybe the AI attached with this did it more thorough job than even I asked to do okay, so for authentication

[7:27 - 7:33] You need an API token. You're gonna get that for free on our website. There's a page on the docs called authentication

[7:36 - 7:40] You'll see this in a second when I step through the flow you just click generate IP

[7:40 - 7:43] You sign up with just an email in the password. There's no verification anything

[7:43 - 7:48] I don't care who you are just you know free account email password you generate an API key

[7:48 - 7:51] That's what you use for authentication as a bear now you'll be able to copy

[7:52 - 7:55] Things like this and then swap in your credentials

[7:55 - 8:01] This is just kind of like a dummy thing this this signature doesn't do anything, but if you go to agent payments

[8:02 - 8:07] You should see all the information that you need for the actual like copy pasteable URL

[8:08 - 8:08] You know

[8:09 - 8:13] That will come to our doc site in the next few days probably, but for now just ask

[8:13 - 8:15] Chat GPT or any UI

[8:16 - 8:21] Curse or whatever of your choice to give you a curl request like this or if you're building and rust

[8:21 - 8:28] You can ask it to give you like whatever rust HTTP library you're using it'll create you just whatever their basics for like simple HTTP fetching

[8:28 - 8:32] There's no special magic here. You don't need an SDK to interact with this stuff

[8:32 - 8:35] You have an HTTP endpoint that should work

[8:35 - 8:40] Your API token gets you access to that. Okay, so let's actually step through this and test it out

[8:40 - 8:42] So I'm gonna go to openagels.com create a new user

[8:43 - 8:47] The other cool thing I'm looking for is we have a stats page on openagels.com

[8:47 - 8:50] I see two of you have already signed up

[8:51 - 8:53] When you create an account you'll see if I just use this go up

[8:53 - 8:54] We have the number of agent instances

[8:54 - 8:56] We also have the value

[8:57 - 8:59] Transacted and I've only tested this on my local machine

[8:59 - 9:02] So I'm gonna try to get like numbers on the board here. It should say

[9:02 - 9:07] You know the amount of spark payments and lightning payments transacted in the total

[9:07 - 9:12] I will probably be in the judging criteria looking to see like whoever drives the most volume

[9:13 - 9:16] And makes these numbers go up the most that will factor the judging for sure

[9:16 - 9:21] Hopefully you're not just sending a payment between two agents infinitely. Although that would be valuable too for stress testing purposes

[9:21 - 9:22] Okay, let's sign up

[9:23 - 9:28] We'll call this Chris hack test man email blah blah blah

[9:29 - 9:30] password

[9:30 - 9:38] All right, I'm in I'm redirected to the docs. I'm gonna go to get a

[9:40 - 9:42] API key

[9:44 - 9:44] Um

[9:47 - 9:49] Oh fuck where did I put the API key part?

[10:00 - 10:00] Okay

[10:00 - 10:03] Okay, I set up a redirect because the dashboard generally wasn't ready

[10:04 - 10:09] Fuck oh here it is. I'm in there. I'm in there. Sorry bottom left. Okay. This is what you get for for building a UI in three seconds

[10:10 - 10:13] Bottom left you have settings. Please let me into the settings. Okay. Thank God. Okay. Here it is

[10:14 - 10:19] Dashboard will just redirect to the docs. I don't have any actual dashboard there. All right. We're good. We found it. We found it

[10:19 - 10:19] Okay API keys

[10:21 - 10:25] Okay, so here you're gonna name an API key. I'm gonna call it blah blah blah doesn't matter

[10:25 - 10:32] Create API key API key created sorry. There's no like nice copy button here, but I'm gonna copy this into a note

[10:35 - 10:38] There's my API key feel free to impersonate me. I don't care

[10:39 - 10:44] That's generally what it's gonna look like you say I've got my API key. It will not show up again. You get the basics information here

[10:46 - 10:50] For just a basic test of your API key. Let's try this request here

[10:51 - 10:56] I'm gonna copy that. I'm gonna draw my API key make sure to include this front part with the

[10:56 - 10:58] thing there and

[10:58 - 11:02] Let's make an API request. I'm gonna go to my terminal

[11:02 - 11:05] Ignore all that stuff. Let's try this

[11:07 - 11:13] Okay, we have our user ID 6 Chris hack test man email email verified blah blah blah

[11:13 - 11:17] And that just shows you the that's who you are log in at if someone else hits that endpoint

[11:17 - 11:22] They're not gonna get your information because they don't have your bear token. Okay, so let's try some of these nice little things that

[11:23 - 11:26] Chat you gave us so I'm gonna go do this one first

[11:26 - 11:30] What did tell me to create an agent? Let's create an agent when I also draw my API key in here and

[11:31 - 11:34] Let's create an agent called my awesome live agent and

[11:36 - 11:41] Let's try that and actually let's take a look at the before and after of the stats page just to make sure that's updating correctly

[11:41 - 11:43] So I've got agent instances five

[11:44 - 11:51] Paste enter misspelled refresh all right. We have agent instance number six now. Let's even get value transacted

[11:52 - 11:56] Let's go back to here create wallet for now you have to create a wallet

[11:57 - 12:01] After you create the agent I may consolidate that but let's just do this

[12:02 - 12:07] Let's create a wallet and this is gonna be communicating to our

[12:08 - 12:11] Server which is throw again air let's go see what it is

[12:14 - 12:16] Let's see we got here. Here's my

[12:17 - 12:20] Where the service is hosted check out the logs here

[12:23 - 12:27] A spark API running on port 8080. Okay, it's working

[12:29 - 12:37] But I got an error so let's try this again on oh, oh, okay if you see a massive mess steak that I make feel free to shout out

[12:37 - 12:38] Here I didn't put in the Asian ID

[12:39 - 12:45] So you're gonna take the agent ID that you get back from the previous step which in this case was six and you're gonna drop it right there

[12:46 - 12:50] All right, you got to tell it what you're creating the law for so

[12:52 - 12:56] Just gonna take a couple seconds because it is failed a great wallet service and available great. Let's take a look

[12:56 - 12:58] Okay, we crash the app excellent

[13:00 - 13:01] Let's see what happened

[13:02 - 13:03] so

[13:04 - 13:05] Yesterday I

[13:06 - 13:12] Was doing this and it was working amazingly for two days in a row and then I got an error like this with spark off end service

[13:13 - 13:17] And the light spark service actually went down because their database was growing too fast and they had to scale it up

[13:17 - 13:23] So like the service was just down for 30 minutes and like I don't know if they knew that it or and I just flagged them something

[13:23 - 13:27] I don't know if they knew that already or not. Well within 30 minutes are reported and then they fixed it

[13:28 - 13:30] Let's see if we can figure out what's going on here

[13:30 - 13:36] All right authentication error client error spark. Ethnic or verify channel received rst stream with server error

[13:38 - 13:41] Verify challenge authentication failed

[13:42 - 13:47] So the beautiful part about one beautiful thing about spark is that the

[13:48 - 13:55] SDK does not require any API keys like if you use the breeze SDK you have to drop it in an API key that you get from them

[13:55 - 14:01] With spark it's all really just like you're using your bit 39 entropy similar to breeze for example

[14:01 - 14:06] You're making a call to the the the SDK that they're using

[14:06 - 14:08] And then that's just communicating to their servers

[14:08 - 14:15] The problem is if their server is not accessible, which it looks like is the case here. Let's try it maybe one more time

[14:16 - 14:21] And then maybe I'll try again locally just to rule out that we don't have any problem there so

[14:23 - 14:28] We got it working sometimes you just got to try it a second time all of this stuff is bleeding edge stuff

[14:28 - 14:31] I don't know why this succeeded in the previous one didn't but

[14:31 - 14:37] We appreciate your help testing our beta API, which is sitting on top of a beta SDK and if you didn't

[14:37 - 14:43] If you didn't see this beta warning let's zoom it in the open agents API is currently in beta

[14:43 - 14:47] Do not use it with live funds that you aren't willing to use I'm gonna fund this with like 10 sats

[14:48 - 14:50] Spark does have like a reg test

[14:51 - 14:54] Way of using it. I just haven't set that up at all. This is all main net

[14:54 - 14:58] So you know back in the early days of lightning we call it hashtag reckless like it's production

[14:58 - 15:02] But you'll probably lose your stuff. So hashtag reckless over on top of this

[15:02 - 15:08] Okay, so when you successfully create an agent you'll get back agent ID and the spark address

[15:08 - 15:14] So this is a thing that if you are interacting with somebody else's agent if you give them this spark address

[15:14 - 15:16] They should be able to pay your agent

[15:17 - 15:22] When you run the balance check command you should then see the balance update

[15:22 - 15:30] There is one kind of unique thing about the spark infrastructure, which is that like in order for the balance update to show

[15:30 - 15:35] You have to like re-initialize your wallet which I think is done by a wallet balance check

[15:35 - 15:40] There's been a couple of things times where I've had to like kind of do an additional check or initialization

[15:40 - 15:44] There's like something that we may run into if you're your balance doesn't immediately update

[15:46 - 15:50] I've got like a longer explanation for that that AI help me understand that I'll probably post on the doc

[15:50 - 15:54] But let's just try this right now. So we've got our first wallet active

[15:55 - 16:00] We're gonna do that again and we're gonna fund this wallet. Let's see if it actually works

[16:00 - 16:03] So I'm gonna create another agent and we'll call this one

[16:05 - 16:12] Let's go back to here. Let's do create an agent. We'll call this one agent to and I want to try to get

[16:13 - 16:14] one agent

[16:14 - 16:17] funded and then paying the second agent and then we'll call that

[16:18 - 16:20] Call it the end. We'll call this my agent to

[16:21 - 16:23] Let's create another agent

[16:23 - 16:31] Clear that out my agent to created I've got to go again create a wallet for this gonna go back over here

[16:31 - 16:36] Just kind of save that and then where's my wallet creation one here

[16:41 - 16:46] Agents what was that ID 7 bear blah blah blah

[16:47 - 16:47] copy

[16:49 - 16:50] Paste

[16:51 - 16:53] Okay, I now have two

[16:54 - 17:00] Agents there's their information now generate a lightning invoice on let's do it on agent six

[17:00 - 17:03] So I'm gonna come over to here create a lightning invoice to fund it

[17:06 - 17:08] Curl blah blah blah was agent six I'm

[17:11 - 17:13] Going to drop in my API key

[17:13 - 17:17] Whenever you're using AI you get really good at copy pasting

[17:17 - 17:22] You a lot of practice with it and there will come a time when we're not copy pasting a bunch of stuff in here

[17:22 - 17:23] Okay, so let's do it for

[17:24 - 17:25] eight sats

[17:27 - 17:29] And do that see if that works

[17:30 - 17:34] Please spark yes, okay, we got it back here's our invoice

[17:36 - 17:40] I'm gonna copy this and paste it to my cash app which is

[17:40 - 17:44] On my phone right now does anyone want to pay this invoice? Let me see

[17:46 - 17:49] Can I drop it into the slack? Yeah

[17:52 - 17:56] Pid blah blah here's all my stuff okay car

[18:02 - 18:08] So in a second I will check the balance on that and then while he's doing that let's get the transaction ready

[18:08 - 18:12] Or the API call ready to so that's the payment

[18:13 - 18:21] Okay, so the send one is first sparked not pay. I don't care. I want to pay

[18:22 - 18:25] From agent six to agent seven

[18:26 - 18:29] Pay agent six after funding the lightning and voice

[18:31 - 18:33] So give me a what happened?

[18:34 - 18:39] We're okay. Let's just do a balance check. So give me a API call for

[18:41 - 18:43] The send of

[18:43 - 18:44] Five sats

[18:47 - 18:51] I'm gonna send five sats from agent six which should have a balance of eight sats. So let's

[18:52 - 18:56] First tell me how to check balance of agent six

[18:59 - 19:00] Okay

[19:05 - 19:07] Bearer where's my key

[19:18 - 19:24] Balance eight sats it worked hooray you also see token balances in there spark introduce a thing called

[19:24 - 19:28] LRC 20 tokens. I think intending initially to be used as stablecoins, but

[19:29 - 19:33] Shake coins on Bitcoin may be coming soon too. I don't know how much we'll participate in that kind of thing

[19:33 - 19:36] But these can support balances like stablecoins as well

[19:37 - 19:42] Let's see so we have a agent six with eight sats. We have agent seven with zero sats

[19:42 - 19:44] Let's just confirm that it actually has

[19:46 - 19:51] Zero sats by running that same command again with agent seven in there

[19:54 - 20:00] Okay, let's make a spark payment from six to seven and let's see if we end up with the same amount of sats

[20:00 - 20:02] Or if there's a fee that we don't know about

[20:02 - 20:03] Let's see

[20:04 - 20:08] Curve a blah blah so pay send

[20:13 - 20:13] From

[20:15 - 20:20] While it's six to recipient agent seven five sats

[20:23 - 20:25] Fingers crossed to the demo gods

[20:36 - 20:37] Perfect okay, so

[20:39 - 20:44] The transaction looks like it went through the status of transfer status sender key tweaked

[20:44 - 20:48] You can google that but that's the thing I was talking about earlier where it's like

[20:48 - 20:51] You need to you might need to re-initialize the

[20:52 - 20:57] Let's just let's just see what happens if we check the balance of six and seven so six

[20:58 - 21:01] Balance of sats three. That's what we expect to see and

[21:02 - 21:03] Seven

[21:06 - 21:11] Five okay, it worked. I guess the checking of the wallet like initialize it

[21:13 - 21:17] Okay, so we sent a five-sat transaction from agent one to agent two

[21:18 - 21:22] You if you had the spark address of any of these you'd be able to send

[21:23 - 21:25] Sats over spark to any of these

[21:26 - 21:29] And if you're you're also able to generate and pay lightning and voices from these

[21:29 - 21:33] That should be enough for like doing basic

[21:34 - 21:39] Payment related things the main objective here is like make it as easy for someone to add

[21:39 - 21:41] Lightning payments to any agent

[21:41 - 21:45] It's not even just any agent because you can be doing this with like like there's nothing even specifically

[21:45 - 21:46] Agente to go about what we implemented here

[21:46 - 21:53] or just like a series of API endpoints that can interact easily with lightning that you don't have to care about

[21:53 - 21:55] liquidity or channels or any of that kind of thing

[21:55 - 22:00] There's no KYC to this you shine up with it fake email and dress and password and like you can hit all the stuff

[22:00 - 22:06] And it should work. Oh, let's check out the see if we are stats page updated whole fingers crossed that worked

[22:06 - 22:09] No, something's wrong with our stats reporting for the

[22:10 - 22:12] Value transactions. We'll figure out that out later

[22:12 - 22:18] Well, we saw on the sparring network that that worked. Okay, any questions from anybody

[22:23 - 22:24] No

[22:31 - 22:35] So I'll be floating around any questions anybody has for these kind of things again

[22:35 - 22:37] I'd like to see hopefully like some amount of

[22:38 - 22:45] Volume of transactions and then maybe like some cool ways that these agents interact with existing lightning services

[22:45 - 22:51] If you say like oh here's how we figured out how to make this pay a zap right store check out something like that

[22:52 - 22:56] or if you got together with some other hackathon participant and

[22:57 - 23:02] You know did something cool with each other can I split the winnings if there's like two projects and do something cool

[23:05 - 23:05] Cool

[23:15 - 23:17] We get up or is like it knows

[23:18 - 23:23] Yes, or our previous if you go down to open a just calm we have an interface

[23:23 - 23:24] oops a

[23:26 - 23:34] Chat UI we've moved to v4.open a just calm if you get do a chat with AI and and this might be helpful for like vibe coding type things

[23:35 - 23:35] I

[23:36 - 23:43] Wouldn't recommend this right now like I personally I used to use this mostly as my daily driver, but right now like cloud code is just better

[23:45 - 23:46] But anyway

[23:47 - 23:52] We will be tying so so just a little bit of let me end on this note a little bit of where we're going with this

[23:54 - 23:57] So this payment thing we're blog we're announcing okay, so

[23:59 - 24:01] We want to be doing Bitcoin revenue sharing

[24:03 - 24:08] Where if you let's say that you refer someone who does a lot of that volume we want to give you a little piece of that we want to be

[24:08 - 24:15] Creating kind of a monetization layer for MCP so one thing that MCP is great at is like this idea of the possibility for

[24:15 - 24:20] Discovering services that your aIs can use but there's no kind of built-in payments are pricing with that

[24:20 - 24:26] So it's hard to discover like knowing what what is actually good like I want to know who's actually spending

[24:27 - 24:33] Compute on like top NC MCPs like that should be like something I could just pull up and see what where the sat flow is going to

[24:34 - 24:39] The objective here even though we're just starting by kind of like sitting on top of the spark SDK

[24:39 - 24:45] We want to add support to everything else is relevant in anything relevant to Bitcoin based finance for agents

[24:45 - 24:50] So stablecoins including tether so like to my knowledge spark is not doing anything with tether

[24:50 - 24:56] They've got their own like stablecoin partnership with something that has like 1% of the volume, but I want to add

[24:56 - 25:01] Tap root asset support to this that shouldn't be too difficult and so have you know agents able to also trans out with tether

[25:01 - 25:04] We're going to be combining this with a like a self-custodial web wallet

[25:04 - 25:08] So we're going to keep this kind of like experimental bleeding edge stuff for the AI agents

[25:08 - 25:15] But I want to be able to have a dashboard in here where you can kind of sweep your balances to your agent from your agents to your personal wallet

[25:15 - 25:19] The personal wall will be using will be on breeze. They just released their

[25:20 - 25:24] Web-based SDK using wasm. They took their SDK and made available to web agents

[25:24 - 25:26] You can now do breeze you know built into a website

[25:26 - 25:31] What we may offer some select LRC 20 tokens if we think they're cool

[25:32 - 25:39] No reason not to add trawm and e-cash do cash you and have these also speak l42 basically any kind of Bitcoin based protocol

[25:39 - 25:43] Agents should be able to speak it. I don't know which of these is going to be like more prominent or whatever

[25:43 - 25:47] But we would just want to make it easy for developers to be able to like have one API call and then just have all the

[25:47 - 25:50] Successful to them. So we'll be working on that over the next month or two

[25:50 - 25:54] I really really really appreciate any feedback anyone has you run into bugs. Please come tell me

[25:56 - 25:57] And best of luck to you. Thank you


## Notes

This transcript was automatically generated using OpenAI Whisper (base model) from the video at https://x.com/OpenAgentsInc/status/1919419077887410389.

Transcription accuracy may vary. Please refer to the original video for definitive content.
