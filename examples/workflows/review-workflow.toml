# Autopilot Code Review Workflow Configuration
# This demonstrates using autopilot for automated code review

[review]
# Model to use for reviews (opus for thorough analysis)
model = "opus"

# Budget for review tasks
review_budget = 3.0

# Areas to focus on
focus_areas = [
    "security",
    "performance",
    "maintainability",
    "test_coverage",
    "documentation"
]

[checks]
# Security checks
security = true
security_patterns = [
    "SQL injection",
    "XSS vulnerabilities",
    "Command injection",
    "Path traversal",
    "Hardcoded secrets"
]

# Performance checks
performance = true
performance_patterns = [
    "N+1 queries",
    "Inefficient algorithms",
    "Memory leaks",
    "Blocking operations"
]

# Code quality checks
quality = true
quality_patterns = [
    "Code duplication",
    "Complex functions",
    "Missing error handling",
    "Improper resource cleanup"
]

# Test coverage checks
test_coverage = true
min_coverage = 80.0
check_edge_cases = true

# Documentation checks
documentation = true
doc_patterns = [
    "Missing module docs",
    "Missing function docs",
    "Outdated comments",
    "Missing examples"
]

[output]
# Generate review report
create_report = true
report_format = "markdown"
report_location = "reviews/YYYYMMDD-review.md"

# Create issues for findings
create_issues = true
issue_priority_mapping = {
    "security" = "urgent",
    "performance" = "high",
    "quality" = "medium",
    "documentation" = "low"
}

# Add labels to issues
use_labels = true
labels = [
    "automated-review",
    "needs-human-review"
]

[git]
# Review mode (don't auto-commit changes)
auto_commit = false

# Create review branch
create_review_branch = true
branch_name = "review/YYYYMMDD-automated"

# Add review comments
add_inline_comments = false  # Requires GitHub integration

[thresholds]
# Fail review if critical issues found
fail_on_security = true
fail_on_test_coverage = false
fail_on_complexity = false

# Complexity thresholds
max_function_lines = 50
max_cyclomatic_complexity = 10
max_cognitive_complexity = 15

[review_template]
# Template for review comments
header = """
# Automated Code Review

**Review Date:** {date}
**Commit:** {commit_hash}
**Model:** {model}
**Focus Areas:** {focus_areas}

## Summary
"""

section = """
## {category}

**Severity:** {severity}
**Found:** {count} issues

{details}
"""

footer = """
## Recommendations

{recommendations}

---
*This review was automatically generated by OpenAgents Autopilot*
"""

[integration]
# GitHub integration (optional)
github_enabled = false
github_token = ""
create_pr_comments = false
create_check_run = false

# Slack integration (optional)
slack_enabled = false
slack_webhook = ""
notify_on_critical = true

[metrics]
# Track review metrics
track_review_time = true
track_issues_found = true
export_metrics = true
metrics_file = "review-metrics.json"
