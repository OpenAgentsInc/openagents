{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Simple typographic replacements\n  //\n  // (c) (C) → ©\n  // (tm) (TM) → ™\n  // (r) (R) → ®\n  // +- → ±\n  // (p) (P) -> §\n  // ... → … (also ?.... → ?.., !.... → !..)\n  // ???????? → ???, !!!!! → !!!, `,,` → `,`\n  // -- → &ndash;, --- → &mdash;\n  //\n  'use strict';\n\n  // TODO:\n  // - fractionals 1/2, 1/4, 3/4 -> ½, ¼, ¾\n  // - miltiplication 2 x 4 -> 2 × 4\n  var RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\n  // Workaround for phantomjs - need regex without /g flag,\n  // or root check will fail every second time\n  var SCOPED_ABBR_TEST_RE = /\\((c|tm|r|p)\\)/i;\n  var SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\n  var SCOPED_ABBR = {\n    c: '©',\n    r: '®',\n    p: '§',\n    tm: '™'\n  };\n  function replaceFn(match, name) {\n    return SCOPED_ABBR[name.toLowerCase()];\n  }\n  function replace_scoped(inlineTokens) {\n    var i,\n      token,\n      inside_autolink = 0;\n    for (i = inlineTokens.length - 1; i >= 0; i--) {\n      token = inlineTokens[i];\n      if (token.type === 'text' && !inside_autolink) {\n        token.content = token.content.replace(SCOPED_ABBR_RE, replaceFn);\n      }\n      if (token.type === 'link_open' && token.info === 'auto') {\n        inside_autolink--;\n      }\n      if (token.type === 'link_close' && token.info === 'auto') {\n        inside_autolink++;\n      }\n    }\n  }\n  function replace_rare(inlineTokens) {\n    var i,\n      token,\n      inside_autolink = 0;\n    for (i = inlineTokens.length - 1; i >= 0; i--) {\n      token = inlineTokens[i];\n      if (token.type === 'text' && !inside_autolink) {\n        if (RARE_RE.test(token.content)) {\n          token.content = token.content.replace(/\\+-/g, '±')\n          // .., ..., ....... -> …\n          // but ?..... & !..... -> ?.. & !..\n          .replace(/\\.{2,}/g, '…').replace(/([?!])…/g, '$1..').replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n          // em-dash\n          .replace(/(^|[^-])---([^-]|$)/mg, '$1\\u2014$2')\n          // en-dash\n          .replace(/(^|\\s)--(\\s|$)/mg, '$1\\u2013$2').replace(/(^|[^-\\s])--([^-\\s]|$)/mg, '$1\\u2013$2');\n        }\n      }\n      if (token.type === 'link_open' && token.info === 'auto') {\n        inside_autolink--;\n      }\n      if (token.type === 'link_close' && token.info === 'auto') {\n        inside_autolink++;\n      }\n    }\n  }\n  module.exports = function replace(state) {\n    var blkIdx;\n    if (!state.md.options.typographer) {\n      return;\n    }\n    for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n      if (state.tokens[blkIdx].type !== 'inline') {\n        continue;\n      }\n      if (SCOPED_ABBR_TEST_RE.test(state.tokens[blkIdx].content)) {\n        replace_scoped(state.tokens[blkIdx].children);\n      }\n      if (RARE_RE.test(state.tokens[blkIdx].content)) {\n        replace_rare(state.tokens[blkIdx].children);\n      }\n    }\n  };\n});","lineCount":93,"map":[[2,2,1,0],[3,2,2,0],[4,2,3,0],[5,2,4,0],[6,2,5,0],[7,2,6,0],[8,2,7,0],[9,2,8,0],[10,2,9,0],[11,2,10,0],[12,2,11,0],[13,2,12,0],[13,14,12,12],[15,2,14,0],[16,2,15,0],[17,2,16,0],[18,2,18,0],[18,6,18,4,"RARE_RE"],[18,13,18,11],[18,16,18,14],[18,46,18,44],[20,2,20,0],[21,2,21,0],[22,2,22,0],[22,6,22,4,"SCOPED_ABBR_TEST_RE"],[22,25,22,23],[22,28,22,26],[22,45,22,43],[23,2,24,0],[23,6,24,4,"SCOPED_ABBR_RE"],[23,20,24,18],[23,23,24,21],[23,41,24,39],[24,2,25,0],[24,6,25,4,"SCOPED_ABBR"],[24,17,25,15],[24,20,25,18],[25,4,26,2,"c"],[25,5,26,3],[25,7,26,5],[25,10,26,8],[26,4,27,2,"r"],[26,5,27,3],[26,7,27,5],[26,10,27,8],[27,4,28,2,"p"],[27,5,28,3],[27,7,28,5],[27,10,28,8],[28,4,29,2,"tm"],[28,6,29,4],[28,8,29,6],[29,2,30,0],[29,3,30,1],[30,2,32,0],[30,11,32,9,"replaceFn"],[30,20,32,18,"replaceFn"],[30,21,32,19,"match"],[30,26,32,24],[30,28,32,26,"name"],[30,32,32,30],[30,34,32,32],[31,4,33,2],[31,11,33,9,"SCOPED_ABBR"],[31,22,33,20],[31,23,33,21,"name"],[31,27,33,25],[31,28,33,26,"toLowerCase"],[31,39,33,37],[31,40,33,38],[31,41,33,39],[31,42,33,40],[32,2,34,0],[33,2,36,0],[33,11,36,9,"replace_scoped"],[33,25,36,23,"replace_scoped"],[33,26,36,24,"inlineTokens"],[33,38,36,36],[33,40,36,38],[34,4,37,2],[34,8,37,6,"i"],[34,9,37,7],[35,6,37,9,"token"],[35,11,37,14],[36,6,37,16,"inside_autolink"],[36,21,37,31],[36,24,37,34],[36,25,37,35],[37,4,39,2],[37,9,39,7,"i"],[37,10,39,8],[37,13,39,11,"inlineTokens"],[37,25,39,23],[37,26,39,24,"length"],[37,32,39,30],[37,35,39,33],[37,36,39,34],[37,38,39,36,"i"],[37,39,39,37],[37,43,39,41],[37,44,39,42],[37,46,39,44,"i"],[37,47,39,45],[37,49,39,47],[37,51,39,49],[38,6,40,4,"token"],[38,11,40,9],[38,14,40,12,"inlineTokens"],[38,26,40,24],[38,27,40,25,"i"],[38,28,40,26],[38,29,40,27],[39,6,42,4],[39,10,42,8,"token"],[39,15,42,13],[39,16,42,14,"type"],[39,20,42,18],[39,25,42,23],[39,31,42,29],[39,35,42,33],[39,36,42,34,"inside_autolink"],[39,51,42,49],[39,53,42,51],[40,8,43,6,"token"],[40,13,43,11],[40,14,43,12,"content"],[40,21,43,19],[40,24,43,22,"token"],[40,29,43,27],[40,30,43,28,"content"],[40,37,43,35],[40,38,43,36,"replace"],[40,45,43,43],[40,46,43,44,"SCOPED_ABBR_RE"],[40,60,43,58],[40,62,43,60,"replaceFn"],[40,71,43,69],[40,72,43,70],[41,6,44,4],[42,6,46,4],[42,10,46,8,"token"],[42,15,46,13],[42,16,46,14,"type"],[42,20,46,18],[42,25,46,23],[42,36,46,34],[42,40,46,38,"token"],[42,45,46,43],[42,46,46,44,"info"],[42,50,46,48],[42,55,46,53],[42,61,46,59],[42,63,46,61],[43,8,47,6,"inside_autolink"],[43,23,47,21],[43,25,47,23],[44,6,48,4],[45,6,50,4],[45,10,50,8,"token"],[45,15,50,13],[45,16,50,14,"type"],[45,20,50,18],[45,25,50,23],[45,37,50,35],[45,41,50,39,"token"],[45,46,50,44],[45,47,50,45,"info"],[45,51,50,49],[45,56,50,54],[45,62,50,60],[45,64,50,62],[46,8,51,6,"inside_autolink"],[46,23,51,21],[46,25,51,23],[47,6,52,4],[48,4,53,2],[49,2,54,0],[50,2,56,0],[50,11,56,9,"replace_rare"],[50,23,56,21,"replace_rare"],[50,24,56,22,"inlineTokens"],[50,36,56,34],[50,38,56,36],[51,4,57,2],[51,8,57,6,"i"],[51,9,57,7],[52,6,57,9,"token"],[52,11,57,14],[53,6,57,16,"inside_autolink"],[53,21,57,31],[53,24,57,34],[53,25,57,35],[54,4,59,2],[54,9,59,7,"i"],[54,10,59,8],[54,13,59,11,"inlineTokens"],[54,25,59,23],[54,26,59,24,"length"],[54,32,59,30],[54,35,59,33],[54,36,59,34],[54,38,59,36,"i"],[54,39,59,37],[54,43,59,41],[54,44,59,42],[54,46,59,44,"i"],[54,47,59,45],[54,49,59,47],[54,51,59,49],[55,6,60,4,"token"],[55,11,60,9],[55,14,60,12,"inlineTokens"],[55,26,60,24],[55,27,60,25,"i"],[55,28,60,26],[55,29,60,27],[56,6,62,4],[56,10,62,8,"token"],[56,15,62,13],[56,16,62,14,"type"],[56,20,62,18],[56,25,62,23],[56,31,62,29],[56,35,62,33],[56,36,62,34,"inside_autolink"],[56,51,62,49],[56,53,62,51],[57,8,63,6],[57,12,63,10,"RARE_RE"],[57,19,63,17],[57,20,63,18,"test"],[57,24,63,22],[57,25,63,23,"token"],[57,30,63,28],[57,31,63,29,"content"],[57,38,63,36],[57,39,63,37],[57,41,63,39],[58,10,64,8,"token"],[58,15,64,13],[58,16,64,14,"content"],[58,23,64,21],[58,26,64,24,"token"],[58,31,64,29],[58,32,64,30,"content"],[58,39,64,37],[58,40,65,11,"replace"],[58,47,65,18],[58,48,65,19],[58,54,65,25],[58,56,65,27],[58,59,65,30],[59,10,66,10],[60,10,67,10],[61,10,67,10],[61,11,68,11,"replace"],[61,18,68,18],[61,19,68,19],[61,28,68,28],[61,30,68,30],[61,33,68,33],[61,34,68,34],[61,35,68,35,"replace"],[61,42,68,42],[61,43,68,43],[61,53,68,53],[61,55,68,55],[61,61,68,61],[61,62,68,62],[61,63,69,11,"replace"],[61,70,69,18],[61,71,69,19],[61,84,69,32],[61,86,69,34],[61,94,69,42],[61,95,69,43],[61,96,69,44,"replace"],[61,103,69,51],[61,104,69,52],[61,112,69,60],[61,114,69,62],[61,117,69,65],[62,10,70,10],[63,10,70,10],[63,11,71,11,"replace"],[63,18,71,18],[63,19,71,19],[63,42,71,42],[63,44,71,44],[63,56,71,56],[64,10,72,10],[65,10,72,10],[65,11,73,11,"replace"],[65,18,73,18],[65,19,73,19],[65,37,73,37],[65,39,73,39],[65,51,73,51],[65,52,73,52],[65,53,74,11,"replace"],[65,60,74,18],[65,61,74,19],[65,87,74,45],[65,89,74,47],[65,101,74,59],[65,102,74,60],[66,8,75,6],[67,6,76,4],[68,6,78,4],[68,10,78,8,"token"],[68,15,78,13],[68,16,78,14,"type"],[68,20,78,18],[68,25,78,23],[68,36,78,34],[68,40,78,38,"token"],[68,45,78,43],[68,46,78,44,"info"],[68,50,78,48],[68,55,78,53],[68,61,78,59],[68,63,78,61],[69,8,79,6,"inside_autolink"],[69,23,79,21],[69,25,79,23],[70,6,80,4],[71,6,82,4],[71,10,82,8,"token"],[71,15,82,13],[71,16,82,14,"type"],[71,20,82,18],[71,25,82,23],[71,37,82,35],[71,41,82,39,"token"],[71,46,82,44],[71,47,82,45,"info"],[71,51,82,49],[71,56,82,54],[71,62,82,60],[71,64,82,62],[72,8,83,6,"inside_autolink"],[72,23,83,21],[72,25,83,23],[73,6,84,4],[74,4,85,2],[75,2,86,0],[76,2,89,0,"module"],[76,8,89,6],[76,9,89,7,"exports"],[76,16,89,14],[76,19,89,17],[76,28,89,26,"replace"],[76,35,89,33,"replace"],[76,36,89,34,"state"],[76,41,89,39],[76,43,89,41],[77,4,90,2],[77,8,90,6,"blkIdx"],[77,14,90,12],[78,4,92,2],[78,8,92,6],[78,9,92,7,"state"],[78,14,92,12],[78,15,92,13,"md"],[78,17,92,15],[78,18,92,16,"options"],[78,25,92,23],[78,26,92,24,"typographer"],[78,37,92,35],[78,39,92,37],[79,6,92,39],[80,4,92,47],[81,4,94,2],[81,9,94,7,"blkIdx"],[81,15,94,13],[81,18,94,16,"state"],[81,23,94,21],[81,24,94,22,"tokens"],[81,30,94,28],[81,31,94,29,"length"],[81,37,94,35],[81,40,94,38],[81,41,94,39],[81,43,94,41,"blkIdx"],[81,49,94,47],[81,53,94,51],[81,54,94,52],[81,56,94,54,"blkIdx"],[81,62,94,60],[81,64,94,62],[81,66,94,64],[82,6,96,4],[82,10,96,8,"state"],[82,15,96,13],[82,16,96,14,"tokens"],[82,22,96,20],[82,23,96,21,"blkIdx"],[82,29,96,27],[82,30,96,28],[82,31,96,29,"type"],[82,35,96,33],[82,40,96,38],[82,48,96,46],[82,50,96,48],[83,8,96,50],[84,6,96,60],[85,6,98,4],[85,10,98,8,"SCOPED_ABBR_TEST_RE"],[85,29,98,27],[85,30,98,28,"test"],[85,34,98,32],[85,35,98,33,"state"],[85,40,98,38],[85,41,98,39,"tokens"],[85,47,98,45],[85,48,98,46,"blkIdx"],[85,54,98,52],[85,55,98,53],[85,56,98,54,"content"],[85,63,98,61],[85,64,98,62],[85,66,98,64],[86,8,99,6,"replace_scoped"],[86,22,99,20],[86,23,99,21,"state"],[86,28,99,26],[86,29,99,27,"tokens"],[86,35,99,33],[86,36,99,34,"blkIdx"],[86,42,99,40],[86,43,99,41],[86,44,99,42,"children"],[86,52,99,50],[86,53,99,51],[87,6,100,4],[88,6,102,4],[88,10,102,8,"RARE_RE"],[88,17,102,15],[88,18,102,16,"test"],[88,22,102,20],[88,23,102,21,"state"],[88,28,102,26],[88,29,102,27,"tokens"],[88,35,102,33],[88,36,102,34,"blkIdx"],[88,42,102,40],[88,43,102,41],[88,44,102,42,"content"],[88,51,102,49],[88,52,102,50],[88,54,102,52],[89,8,103,6,"replace_rare"],[89,20,103,18],[89,21,103,19,"state"],[89,26,103,24],[89,27,103,25,"tokens"],[89,33,103,31],[89,34,103,32,"blkIdx"],[89,40,103,38],[89,41,103,39],[89,42,103,40,"children"],[89,50,103,48],[89,51,103,49],[90,6,104,4],[91,4,106,2],[92,2,107,0],[92,3,107,1],[93,0,107,2],[93,3]],"functionMap":{"names":["<global>","replaceFn","replace_scoped","replace_rare","replace"],"mappings":"AAA;AC+B;CDE;AEE;CFkB;AGE;CH8B;iBIG;CJkB"},"hasCjsExports":true},"type":"js/module"}]}