{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"./WorkletsError","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":48,"index":63}}],"key":"vXPuRilP/vaUIYuYdR30RgyRXtA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.registerWorkletStackDetails = registerWorkletStackDetails;\n  exports.reportFatalRemoteError = reportFatalRemoteError;\n  exports.registerReportFatalRemoteError = registerReportFatalRemoteError;\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _WorkletsError = require(_dependencyMap[1]);\n  var _workletStackDetails = new Map();\n  function registerWorkletStackDetails(hash, stackDetails) {\n    _workletStackDetails.set(hash, stackDetails);\n  }\n  function getBundleOffset(error) {\n    var frame = error.stack?.split('\\n')?.[0];\n    if (frame) {\n      var parsedFrame = /@([^@]+):(\\d+):(\\d+)/.exec(frame);\n      if (parsedFrame) {\n        var _parsedFrame = (0, _slicedToArray.default)(parsedFrame, 4),\n          file = _parsedFrame[1],\n          line = _parsedFrame[2],\n          col = _parsedFrame[3];\n        return [file, Number(line), Number(col)];\n      }\n    }\n    return ['unknown', 0, 0];\n  }\n  function processStack(stack) {\n    if (stack === '' || stack === undefined) {\n      return undefined;\n    }\n    var workletStackEntries = stack.match(/worklet_(\\d+):(\\d+):(\\d+)/g);\n    var result = stack;\n    workletStackEntries?.forEach(match => {\n      var _match$split$map = match.split(/:|_/).map(Number),\n        _match$split$map2 = (0, _slicedToArray.default)(_match$split$map, 4),\n        hash = _match$split$map2[1],\n        origLine = _match$split$map2[2],\n        origCol = _match$split$map2[3];\n      var errorDetails = _workletStackDetails.get(hash);\n      if (!errorDetails) {\n        return;\n      }\n      var _errorDetails = (0, _slicedToArray.default)(errorDetails, 3),\n        error = _errorDetails[0],\n        lineOffset = _errorDetails[1],\n        colOffset = _errorDetails[2];\n      var _getBundleOffset = getBundleOffset(error),\n        _getBundleOffset2 = (0, _slicedToArray.default)(_getBundleOffset, 3),\n        bundleFile = _getBundleOffset2[0],\n        bundleLine = _getBundleOffset2[1],\n        bundleCol = _getBundleOffset2[2];\n      var line = origLine + bundleLine + lineOffset;\n      var col = origCol + bundleCol + colOffset;\n      result = result.replace(match, `${bundleFile}:${line}:${col}`);\n    });\n    return result;\n  }\n  /**\n   * Remote error is an error coming from a Worklet Runtime that we bubble up to\n   * the RN Runtime.\n   */\n  function reportFatalRemoteError(_ref, force) {\n    var message = _ref.message,\n      stack = _ref.stack,\n      name = _ref.name,\n      jsEngine = _ref.jsEngine;\n    var error = new _WorkletsError.WorkletsError();\n    error.message = message;\n    error.stack = processStack(stack);\n    error.name = name;\n    error.jsEngine = jsEngine;\n    if (force) {\n      throw error;\n    } else {\n      // @ts-expect-error React Native's `ErrorUtils` are hidden from the global scope.\n      globalThis.ErrorUtils.reportFatalError(error);\n    }\n  }\n\n  /**\n   * Registers `reportFatalRemoteError` function in global scope to allow to\n   * invoke it from C++.\n   */\n  function registerReportFatalRemoteError() {\n    globalThis.__reportFatalRemoteError = reportFatalRemoteError;\n  }\n});","lineCount":96,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopDefault"],[7,27,1,13,"e"],[7,28,1,13],[8,4,1,13],[8,11,1,13,"e"],[8,12,1,13],[8,16,1,13,"e"],[8,17,1,13],[8,18,1,13,"__esModule"],[8,28,1,13],[8,31,1,13,"e"],[8,32,1,13],[9,6,1,13,"default"],[9,13,1,13],[9,15,1,13,"e"],[10,4,1,13],[11,2,1,13],[12,2,8,0,"exports"],[12,9,8,0],[12,10,8,0,"registerWorkletStackDetails"],[12,37,8,0],[12,40,8,0,"registerWorkletStackDetails"],[12,67,8,0],[13,2,57,0,"exports"],[13,9,57,0],[13,10,57,0,"reportFatalRemoteError"],[13,32,57,0],[13,35,57,0,"reportFatalRemoteError"],[13,57,57,0],[14,2,78,0,"exports"],[14,9,78,0],[14,10,78,0,"registerReportFatalRemoteError"],[14,40,78,0],[14,43,78,0,"registerReportFatalRemoteError"],[14,73,78,0],[15,2,80,1],[15,6,80,1,"_babelRuntimeHelpersSlicedToArray"],[15,39,80,1],[15,42,80,1,"require"],[15,49,80,1],[15,50,80,1,"_dependencyMap"],[15,64,80,1],[16,2,80,1],[16,6,80,1,"_slicedToArray"],[16,20,80,1],[16,23,80,1,"_interopDefault"],[16,38,80,1],[16,39,80,1,"_babelRuntimeHelpersSlicedToArray"],[16,72,80,1],[17,2,3,0],[17,6,3,0,"_WorkletsError"],[17,20,3,0],[17,23,3,0,"require"],[17,30,3,0],[17,31,3,0,"_dependencyMap"],[17,45,3,0],[18,2,6,0],[18,6,6,6,"_workletStackDetails"],[18,26,6,26],[18,29,6,29],[18,33,6,33,"Map"],[18,36,6,36],[18,37,6,66],[18,38,6,67],[19,2,8,7],[19,11,8,16,"registerWorkletStackDetails"],[19,38,8,43,"registerWorkletStackDetails"],[19,39,9,2,"hash"],[19,43,9,14],[19,45,10,2,"stackDetails"],[19,57,10,35],[19,59,11,2],[20,4,12,2,"_workletStackDetails"],[20,24,12,22],[20,25,12,23,"set"],[20,28,12,26],[20,29,12,27,"hash"],[20,33,12,31],[20,35,12,33,"stackDetails"],[20,47,12,45],[20,48,12,46],[21,2,13,0],[22,2,15,0],[22,11,15,9,"getBundleOffset"],[22,26,15,24,"getBundleOffset"],[22,27,15,25,"error"],[22,32,15,37],[22,34,15,65],[23,4,16,2],[23,8,16,8,"frame"],[23,13,16,13],[23,16,16,16,"error"],[23,21,16,21],[23,22,16,22,"stack"],[23,27,16,27],[23,29,16,29,"split"],[23,34,16,34],[23,35,16,35],[23,39,16,39],[23,40,16,40],[23,43,16,43],[23,44,16,44],[23,45,16,45],[24,4,17,2],[24,8,17,6,"frame"],[24,13,17,11],[24,15,17,13],[25,6,18,4],[25,10,18,10,"parsedFrame"],[25,21,18,21],[25,24,18,24],[25,46,18,46],[25,47,18,47,"exec"],[25,51,18,51],[25,52,18,52,"frame"],[25,57,18,57],[25,58,18,58],[26,6,19,4],[26,10,19,8,"parsedFrame"],[26,21,19,19],[26,23,19,21],[27,8,20,6],[27,12,20,6,"_parsedFrame"],[27,24,20,6],[27,31,20,6,"_slicedToArray"],[27,45,20,6],[27,46,20,6,"default"],[27,53,20,6],[27,55,20,34,"parsedFrame"],[27,66,20,45],[28,10,20,15,"file"],[28,14,20,19],[28,17,20,19,"_parsedFrame"],[28,29,20,19],[29,10,20,21,"line"],[29,14,20,25],[29,17,20,25,"_parsedFrame"],[29,29,20,25],[30,10,20,27,"col"],[30,13,20,30],[30,16,20,30,"_parsedFrame"],[30,28,20,30],[31,8,21,6],[31,15,21,13],[31,16,21,14,"file"],[31,20,21,18],[31,22,21,20,"Number"],[31,28,21,26],[31,29,21,27,"line"],[31,33,21,31],[31,34,21,32],[31,36,21,34,"Number"],[31,42,21,40],[31,43,21,41,"col"],[31,46,21,44],[31,47,21,45],[31,48,21,46],[32,6,22,4],[33,4,23,2],[34,4,24,2],[34,11,24,9],[34,12,24,10],[34,21,24,19],[34,23,24,21],[34,24,24,22],[34,26,24,24],[34,27,24,25],[34,28,24,26],[35,2,25,0],[36,2,27,0],[36,11,27,9,"processStack"],[36,23,27,21,"processStack"],[36,24,27,22,"stack"],[36,29,27,36],[36,31,27,58],[37,4,28,2],[37,8,28,6,"stack"],[37,13,28,11],[37,18,28,16],[37,20,28,18],[37,24,28,22,"stack"],[37,29,28,27],[37,34,28,32,"undefined"],[37,43,28,41],[37,45,28,43],[38,6,29,4],[38,13,29,11,"undefined"],[38,22,29,20],[39,4,30,2],[40,4,31,2],[40,8,31,8,"workletStackEntries"],[40,27,31,27],[40,30,31,30,"stack"],[40,35,31,35],[40,36,31,36,"match"],[40,41,31,41],[40,42,31,42],[40,70,31,70],[40,71,31,71],[41,4,32,2],[41,8,32,6,"result"],[41,14,32,12],[41,17,32,15,"stack"],[41,22,32,20],[42,4,33,2,"workletStackEntries"],[42,23,33,21],[42,25,33,23,"forEach"],[42,32,33,30],[42,33,33,32,"match"],[42,38,33,37],[42,42,33,42],[43,6,34,4],[43,10,34,4,"_match$split$map"],[43,26,34,4],[43,29,34,40,"match"],[43,34,34,45],[43,35,34,46,"split"],[43,40,34,51],[43,41,34,52],[43,46,34,57],[43,47,34,58],[43,48,34,59,"map"],[43,51,34,62],[43,52,34,63,"Number"],[43,58,34,69],[43,59,34,70],[44,8,34,70,"_match$split$map2"],[44,25,34,70],[44,32,34,70,"_slicedToArray"],[44,46,34,70],[44,47,34,70,"default"],[44,54,34,70],[44,56,34,70,"_match$split$map"],[44,72,34,70],[45,8,34,13,"hash"],[45,12,34,17],[45,15,34,17,"_match$split$map2"],[45,32,34,17],[46,8,34,19,"origLine"],[46,16,34,27],[46,19,34,27,"_match$split$map2"],[46,36,34,27],[47,8,34,29,"origCol"],[47,15,34,36],[47,18,34,36,"_match$split$map2"],[47,35,34,36],[48,6,35,4],[48,10,35,10,"errorDetails"],[48,22,35,22],[48,25,35,25,"_workletStackDetails"],[48,45,35,45],[48,46,35,46,"get"],[48,49,35,49],[48,50,35,50,"hash"],[48,54,35,54],[48,55,35,55],[49,6,36,4],[49,10,36,8],[49,11,36,9,"errorDetails"],[49,23,36,21],[49,25,36,23],[50,8,37,6],[51,6,38,4],[52,6,39,4],[52,10,39,4,"_errorDetails"],[52,23,39,4],[52,30,39,4,"_slicedToArray"],[52,44,39,4],[52,45,39,4,"default"],[52,52,39,4],[52,54,39,43,"errorDetails"],[52,66,39,55],[53,8,39,11,"error"],[53,13,39,16],[53,16,39,16,"_errorDetails"],[53,29,39,16],[54,8,39,18,"lineOffset"],[54,18,39,28],[54,21,39,28,"_errorDetails"],[54,34,39,28],[55,8,39,30,"colOffset"],[55,17,39,39],[55,20,39,39,"_errorDetails"],[55,33,39,39],[56,6,40,4],[56,10,40,4,"_getBundleOffset"],[56,26,40,4],[56,29,40,48,"getBundleOffset"],[56,44,40,63],[56,45,40,64,"error"],[56,50,40,69],[56,51,40,70],[57,8,40,70,"_getBundleOffset2"],[57,25,40,70],[57,32,40,70,"_slicedToArray"],[57,46,40,70],[57,47,40,70,"default"],[57,54,40,70],[57,56,40,70,"_getBundleOffset"],[57,72,40,70],[58,8,40,11,"bundleFile"],[58,18,40,21],[58,21,40,21,"_getBundleOffset2"],[58,38,40,21],[59,8,40,23,"bundleLine"],[59,18,40,33],[59,21,40,33,"_getBundleOffset2"],[59,38,40,33],[60,8,40,35,"bundleCol"],[60,17,40,44],[60,20,40,44,"_getBundleOffset2"],[60,37,40,44],[61,6,41,4],[61,10,41,10,"line"],[61,14,41,14],[61,17,41,17,"origLine"],[61,25,41,25],[61,28,41,28,"bundleLine"],[61,38,41,38],[61,41,41,41,"lineOffset"],[61,51,41,51],[62,6,42,4],[62,10,42,10,"col"],[62,13,42,13],[62,16,42,16,"origCol"],[62,23,42,23],[62,26,42,26,"bundleCol"],[62,35,42,35],[62,38,42,38,"colOffset"],[62,47,42,47],[63,6,44,4,"result"],[63,12,44,10],[63,15,44,13,"result"],[63,21,44,19],[63,22,44,20,"replace"],[63,29,44,27],[63,30,44,28,"match"],[63,35,44,33],[63,37,44,35],[63,40,44,38,"bundleFile"],[63,50,44,48],[63,54,44,52,"line"],[63,58,44,56],[63,62,44,60,"col"],[63,65,44,63],[63,67,44,65],[63,68,44,66],[64,4,45,2],[64,5,45,3],[64,6,45,4],[65,4,46,2],[65,11,46,9,"result"],[65,17,46,15],[66,2,47,0],[67,2,53,0],[68,0,54,0],[69,0,55,0],[70,0,56,0],[71,2,57,7],[71,11,57,16,"reportFatalRemoteError"],[71,33,57,38,"reportFatalRemoteError"],[71,34,57,38,"_ref"],[71,38,57,38],[71,40,59,2,"force"],[71,45,59,16],[71,47,60,8],[72,4,60,8],[72,8,58,4,"message"],[72,15,58,11],[72,18,58,11,"_ref"],[72,22,58,11],[72,23,58,4,"message"],[72,30,58,11],[73,6,58,13,"stack"],[73,11,58,18],[73,14,58,18,"_ref"],[73,18,58,18],[73,19,58,13,"stack"],[73,24,58,18],[74,6,58,20,"name"],[74,10,58,24],[74,13,58,24,"_ref"],[74,17,58,24],[74,18,58,20,"name"],[74,22,58,24],[75,6,58,26,"jsEngine"],[75,14,58,34],[75,17,58,34,"_ref"],[75,21,58,34],[75,22,58,26,"jsEngine"],[75,30,58,34],[76,4,61,2],[76,8,61,8,"error"],[76,13,61,13],[76,16,61,16],[76,20,61,20,"WorkletsError"],[76,34,61,33],[76,35,61,33,"WorkletsError"],[76,48,61,33],[76,49,61,34],[76,50,61,46],[77,4,62,2,"error"],[77,9,62,7],[77,10,62,8,"message"],[77,17,62,15],[77,20,62,18,"message"],[77,27,62,25],[78,4,63,2,"error"],[78,9,63,7],[78,10,63,8,"stack"],[78,15,63,13],[78,18,63,16,"processStack"],[78,30,63,28],[78,31,63,29,"stack"],[78,36,63,34],[78,37,63,35],[79,4,64,2,"error"],[79,9,64,7],[79,10,64,8,"name"],[79,14,64,12],[79,17,64,15,"name"],[79,21,64,19],[80,4,65,2,"error"],[80,9,65,7],[80,10,65,8,"jsEngine"],[80,18,65,16],[80,21,65,19,"jsEngine"],[80,29,65,27],[81,4,66,2],[81,8,66,6,"force"],[81,13,66,11],[81,15,66,13],[82,6,67,4],[82,12,67,10,"error"],[82,17,67,15],[83,4,68,2],[83,5,68,3],[83,11,68,9],[84,6,69,4],[85,6,70,4,"globalThis"],[85,16,70,14],[85,17,70,15,"ErrorUtils"],[85,27,70,25],[85,28,70,26,"reportFatalError"],[85,44,70,42],[85,45,70,43,"error"],[85,50,70,48],[85,51,70,49],[86,4,71,2],[87,2,72,0],[89,2,74,0],[90,0,75,0],[91,0,76,0],[92,0,77,0],[93,2,78,7],[93,11,78,16,"registerReportFatalRemoteError"],[93,41,78,46,"registerReportFatalRemoteError"],[93,42,78,46],[93,44,78,49],[94,4,79,2,"globalThis"],[94,14,79,12],[94,15,79,13,"__reportFatalRemoteError"],[94,39,79,37],[94,42,79,40,"reportFatalRemoteError"],[94,64,79,62],[95,2,80,0],[96,0,80,1],[96,3]],"functionMap":{"names":["<global>","registerWorkletStackDetails","getBundleOffset","processStack","workletStackEntries.forEach$argument_0","reportFatalRemoteError","registerReportFatalRemoteError"],"mappings":"AAA;OCO;CDK;AEE;CFU;AGE;+BCM;GDY;CHE;OKU;CLe;OMM;CNE"},"hasCjsExports":false},"type":"js/module"}]}