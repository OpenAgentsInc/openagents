{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":16,"index":136},"end":{"line":4,"column":32,"index":152}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"./LinkPreviewContext","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":29,"index":183},"end":{"line":5,"column":60,"index":214}}],"key":"aLYFQm4EDGJfSD6i9vRNTM/WlNM=","exportNames":["*"],"imports":1}},{"name":"./utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":16,"index":232},"end":{"line":6,"column":34,"index":250}}],"key":"Arg6QRuIuy5D/jfcnxX1qJiHjX8=","exportNames":["*"],"imports":1}},{"name":"../../global-state/router-store","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":23,"index":275},"end":{"line":7,"column":65,"index":317}}],"key":"34G8cf9eMVuL1UIt4w1T43KGPlk=","exportNames":["*"],"imports":1}},{"name":"../../hooks","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":16,"index":335},"end":{"line":8,"column":38,"index":357}}],"key":"4axDW+gHYZE8GuC1vLdCjsfAmVo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _slicedToArray = require(_dependencyMap[0]).default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useNextScreenId = useNextScreenId;\n  var react_1 = require(_dependencyMap[1]);\n  var LinkPreviewContext_1 = require(_dependencyMap[2]);\n  var utils_1 = require(_dependencyMap[3]);\n  var router_store_1 = require(_dependencyMap[4]);\n  var hooks_1 = require(_dependencyMap[5]);\n  function useNextScreenId() {\n    var router = (0, hooks_1.useRouter)();\n    var _ref = (0, LinkPreviewContext_1.useLinkPreviewContext)(),\n      setOpenPreviewKey = _ref.setOpenPreviewKey;\n    var _ref2 = (0, react_1.useState)(),\n      _ref3 = _slicedToArray(_ref2, 2),\n      internalNextScreenId = _ref3[0],\n      internalSetNextScreenId = _ref3[1];\n    var currentHref = (0, react_1.useRef)(undefined);\n    var _ref4 = (0, react_1.useState)([]),\n      _ref5 = _slicedToArray(_ref4, 2),\n      tabPath = _ref5[0],\n      setTabPath = _ref5[1];\n    (0, react_1.useEffect)(() => {\n      // When screen is prefetched, then the root state is updated with the preloaded route.\n      return router_store_1.store.navigationRef.addListener('state', _ref6 => {\n        var state = _ref6.data.state;\n        // If we have the current href, it means that we prefetched the route\n        if (currentHref.current && state) {\n          var preloadedRoute = (0, utils_1.getPreloadedRouteFromRootStateByHref)(currentHref.current, state);\n          var routeKey = preloadedRoute?.key;\n          var tabPathFromRootState = (0, utils_1.getTabPathFromRootStateByHref)(currentHref.current, state);\n          // Without this timeout react-native does not have enough time to mount the new screen\n          // and thus it will not be found on the native side\n          if (routeKey || tabPathFromRootState.length) {\n            setTimeout(() => {\n              internalSetNextScreenId(routeKey);\n              setOpenPreviewKey(routeKey);\n              setTabPath(tabPathFromRootState);\n            });\n          }\n          // We got the preloaded state, so we can reset the currentHref\n          // to prevent unnecessary processing\n          currentHref.current = undefined;\n        }\n      });\n    }, []);\n    var prefetch = (0, react_1.useCallback)(href => {\n      // Resetting the nextScreenId to undefined\n      internalSetNextScreenId(undefined);\n      router.prefetch(href);\n      currentHref.current = href;\n    }, [router.prefetch]);\n    return [{\n      nextScreenId: internalNextScreenId,\n      tabPath\n    }, prefetch];\n  }\n});","lineCount":62,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_slicedToArray"],[4,20,1,13],[4,23,1,13,"require"],[4,30,1,13],[4,31,1,13,"_dependencyMap"],[4,45,1,13],[4,50,1,13,"default"],[4,57,1,13],[5,2,2,0,"Object"],[5,8,2,6],[5,9,2,7,"defineProperty"],[5,23,2,21],[5,24,2,22,"exports"],[5,31,2,29],[5,33,2,31],[5,45,2,43],[5,47,2,45],[6,4,2,47,"value"],[6,9,2,52],[6,11,2,54],[7,2,2,59],[7,3,2,60],[7,4,2,61],[8,2,3,0,"exports"],[8,9,3,7],[8,10,3,8,"useNextScreenId"],[8,25,3,23],[8,28,3,26,"useNextScreenId"],[8,43,3,41],[9,2,4,0],[9,6,4,6,"react_1"],[9,13,4,13],[9,16,4,16,"require"],[9,23,4,23],[9,24,4,23,"_dependencyMap"],[9,38,4,23],[9,41,4,31],[9,42,4,32],[10,2,5,0],[10,6,5,6,"LinkPreviewContext_1"],[10,26,5,26],[10,29,5,29,"require"],[10,36,5,36],[10,37,5,36,"_dependencyMap"],[10,51,5,36],[10,54,5,59],[10,55,5,60],[11,2,6,0],[11,6,6,6,"utils_1"],[11,13,6,13],[11,16,6,16,"require"],[11,23,6,23],[11,24,6,23,"_dependencyMap"],[11,38,6,23],[11,41,6,33],[11,42,6,34],[12,2,7,0],[12,6,7,6,"router_store_1"],[12,20,7,20],[12,23,7,23,"require"],[12,30,7,30],[12,31,7,30,"_dependencyMap"],[12,45,7,30],[12,48,7,64],[12,49,7,65],[13,2,8,0],[13,6,8,6,"hooks_1"],[13,13,8,13],[13,16,8,16,"require"],[13,23,8,23],[13,24,8,23,"_dependencyMap"],[13,38,8,23],[13,41,8,37],[13,42,8,38],[14,2,9,0],[14,11,9,9,"useNextScreenId"],[14,26,9,24,"useNextScreenId"],[14,27,9,24],[14,29,9,27],[15,4,10,4],[15,8,10,10,"router"],[15,14,10,16],[15,17,10,19],[15,18,10,20],[15,19,10,21],[15,21,10,23,"hooks_1"],[15,28,10,30],[15,29,10,31,"useRouter"],[15,38,10,40],[15,40,10,42],[15,41,10,43],[16,4,11,4],[16,8,11,4,"_ref"],[16,12,11,4],[16,15,11,34],[16,16,11,35],[16,17,11,36],[16,19,11,38,"LinkPreviewContext_1"],[16,39,11,58],[16,40,11,59,"useLinkPreviewContext"],[16,61,11,80],[16,63,11,82],[16,64,11,83],[17,6,11,12,"setOpenPreviewKey"],[17,23,11,29],[17,26,11,29,"_ref"],[17,30,11,29],[17,31,11,12,"setOpenPreviewKey"],[17,48,11,29],[18,4,12,4],[18,8,12,4,"_ref2"],[18,13,12,4],[18,16,12,60],[18,17,12,61],[18,18,12,62],[18,20,12,64,"react_1"],[18,27,12,71],[18,28,12,72,"useState"],[18,36,12,80],[18,38,12,82],[18,39,12,83],[19,6,12,83,"_ref3"],[19,11,12,83],[19,14,12,83,"_slicedToArray"],[19,28,12,83],[19,29,12,83,"_ref2"],[19,34,12,83],[20,6,12,11,"internalNextScreenId"],[20,26,12,31],[20,29,12,31,"_ref3"],[20,34,12,31],[21,6,12,33,"internalSetNextScreenId"],[21,29,12,56],[21,32,12,56,"_ref3"],[21,37,12,56],[22,4,13,4],[22,8,13,10,"currentHref"],[22,19,13,21],[22,22,13,24],[22,23,13,25],[22,24,13,26],[22,26,13,28,"react_1"],[22,33,13,35],[22,34,13,36,"useRef"],[22,40,13,42],[22,42,13,44,"undefined"],[22,51,13,53],[22,52,13,54],[23,4,14,4],[23,8,14,4,"_ref4"],[23,13,14,4],[23,16,14,34],[23,17,14,35],[23,18,14,36],[23,20,14,38,"react_1"],[23,27,14,45],[23,28,14,46,"useState"],[23,36,14,54],[23,38,14,56],[23,40,14,58],[23,41,14,59],[24,6,14,59,"_ref5"],[24,11,14,59],[24,14,14,59,"_slicedToArray"],[24,28,14,59],[24,29,14,59,"_ref4"],[24,34,14,59],[25,6,14,11,"tabPath"],[25,13,14,18],[25,16,14,18,"_ref5"],[25,21,14,18],[26,6,14,20,"setTabPath"],[26,16,14,30],[26,19,14,30,"_ref5"],[26,24,14,30],[27,4,15,4],[27,5,15,5],[27,6,15,6],[27,8,15,8,"react_1"],[27,15,15,15],[27,16,15,16,"useEffect"],[27,25,15,25],[27,27,15,27],[27,33,15,33],[28,6,16,8],[29,6,17,8],[29,13,17,15,"router_store_1"],[29,27,17,29],[29,28,17,30,"store"],[29,33,17,35],[29,34,17,36,"navigationRef"],[29,47,17,49],[29,48,17,50,"addListener"],[29,59,17,61],[29,60,17,62],[29,67,17,69],[29,69,17,71,"_ref6"],[29,74,17,71],[29,78,17,96],[30,8,17,96],[30,12,17,82,"state"],[30,17,17,87],[30,20,17,87,"_ref6"],[30,25,17,87],[30,26,17,74,"data"],[30,30,17,78],[30,31,17,82,"state"],[30,36,17,87],[31,8,18,12],[32,8,19,12],[32,12,19,16,"currentHref"],[32,23,19,27],[32,24,19,28,"current"],[32,31,19,35],[32,35,19,39,"state"],[32,40,19,44],[32,42,19,46],[33,10,20,16],[33,14,20,22,"preloadedRoute"],[33,28,20,36],[33,31,20,39],[33,32,20,40],[33,33,20,41],[33,35,20,43,"utils_1"],[33,42,20,50],[33,43,20,51,"getPreloadedRouteFromRootStateByHref"],[33,79,20,87],[33,81,20,89,"currentHref"],[33,92,20,100],[33,93,20,101,"current"],[33,100,20,108],[33,102,20,110,"state"],[33,107,20,115],[33,108,20,116],[34,10,21,16],[34,14,21,22,"routeKey"],[34,22,21,30],[34,25,21,33,"preloadedRoute"],[34,39,21,47],[34,41,21,49,"key"],[34,44,21,52],[35,10,22,16],[35,14,22,22,"tabPathFromRootState"],[35,34,22,42],[35,37,22,45],[35,38,22,46],[35,39,22,47],[35,41,22,49,"utils_1"],[35,48,22,56],[35,49,22,57,"getTabPathFromRootStateByHref"],[35,78,22,86],[35,80,22,88,"currentHref"],[35,91,22,99],[35,92,22,100,"current"],[35,99,22,107],[35,101,22,109,"state"],[35,106,22,114],[35,107,22,115],[36,10,23,16],[37,10,24,16],[38,10,25,16],[38,14,25,20,"routeKey"],[38,22,25,28],[38,26,25,32,"tabPathFromRootState"],[38,46,25,52],[38,47,25,53,"length"],[38,53,25,59],[38,55,25,61],[39,12,26,20,"setTimeout"],[39,22,26,30],[39,23,26,31],[39,29,26,37],[40,14,27,24,"internalSetNextScreenId"],[40,37,27,47],[40,38,27,48,"routeKey"],[40,46,27,56],[40,47,27,57],[41,14,28,24,"setOpenPreviewKey"],[41,31,28,41],[41,32,28,42,"routeKey"],[41,40,28,50],[41,41,28,51],[42,14,29,24,"setTabPath"],[42,24,29,34],[42,25,29,35,"tabPathFromRootState"],[42,45,29,55],[42,46,29,56],[43,12,30,20],[43,13,30,21],[43,14,30,22],[44,10,31,16],[45,10,32,16],[46,10,33,16],[47,10,34,16,"currentHref"],[47,21,34,27],[47,22,34,28,"current"],[47,29,34,35],[47,32,34,38,"undefined"],[47,41,34,47],[48,8,35,12],[49,6,36,8],[49,7,36,9],[49,8,36,10],[50,4,37,4],[50,5,37,5],[50,7,37,7],[50,9,37,9],[50,10,37,10],[51,4,38,4],[51,8,38,10,"prefetch"],[51,16,38,18],[51,19,38,21],[51,20,38,22],[51,21,38,23],[51,23,38,25,"react_1"],[51,30,38,32],[51,31,38,33,"useCallback"],[51,42,38,44],[51,44,38,47,"href"],[51,48,38,51],[51,52,38,56],[52,6,39,8],[53,6,40,8,"internalSetNextScreenId"],[53,29,40,31],[53,30,40,32,"undefined"],[53,39,40,41],[53,40,40,42],[54,6,41,8,"router"],[54,12,41,14],[54,13,41,15,"prefetch"],[54,21,41,23],[54,22,41,24,"href"],[54,26,41,28],[54,27,41,29],[55,6,42,8,"currentHref"],[55,17,42,19],[55,18,42,20,"current"],[55,25,42,27],[55,28,42,30,"href"],[55,32,42,34],[56,4,43,4],[56,5,43,5],[56,7,43,7],[56,8,43,8,"router"],[56,14,43,14],[56,15,43,15,"prefetch"],[56,23,43,23],[56,24,43,24],[56,25,43,25],[57,4,44,4],[57,11,44,11],[57,12,44,12],[58,6,44,14,"nextScreenId"],[58,18,44,26],[58,20,44,28,"internalNextScreenId"],[58,40,44,48],[59,6,44,50,"tabPath"],[60,4,44,58],[60,5,44,59],[60,7,44,61,"prefetch"],[60,15,44,69],[60,16,44,70],[61,2,45,0],[62,0,45,1],[62,3]],"functionMap":{"names":["<global>","useNextScreenId","<anonymous>","router_store_1.store.navigationRef.addListener$argument_1","setTimeout$argument_0"],"mappings":"AAA;ACQ;2BCM;uECE;+BCS;qBDI;SDM;KDC;8CCC;KDK;CDE"},"hasCjsExports":true},"type":"js/module"}]}