{"dependencies":[{"name":"./Updates","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"dHmtn1izBCeSkZ/2BgK9eSyi8a8=","exportNames":["*"],"imports":1}},{"name":"./UseUpdates.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":53,"index":91}}],"key":"c/0dTIDFMt3vtNcWYCgpJC9RQHM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"currentlyRunning\", {\n    enumerable: true,\n    get: function () {\n      return currentlyRunning;\n    }\n  });\n  Object.defineProperty(exports, \"updateFromManifest\", {\n    enumerable: true,\n    get: function () {\n      return updateFromManifest;\n    }\n  });\n  Object.defineProperty(exports, \"updateFromRollback\", {\n    enumerable: true,\n    get: function () {\n      return updateFromRollback;\n    }\n  });\n  Object.defineProperty(exports, \"updatesStateFromContext\", {\n    enumerable: true,\n    get: function () {\n      return updatesStateFromContext;\n    }\n  });\n  var _Updates = require(_dependencyMap[0]);\n  var Updates = _interopNamespace(_Updates);\n  var _UseUpdatesTypes = require(_dependencyMap[1]);\n  // The currently running info, constructed from Updates constants\n  var currentlyRunning = {\n    updateId: Updates.updateId ?? undefined,\n    channel: Updates.channel ?? undefined,\n    createdAt: Updates.createdAt ?? undefined,\n    launchDuration: Updates.launchDuration ?? undefined,\n    isEmbeddedLaunch: Updates.isEmbeddedLaunch,\n    isEmergencyLaunch: Updates.isEmergencyLaunch,\n    emergencyLaunchReason: Updates.emergencyLaunchReason,\n    manifest: Updates.manifest ?? undefined,\n    runtimeVersion: Updates.runtimeVersion ?? undefined\n  };\n  // Constructs an UpdateInfo from a manifest\n  var updateFromManifest = manifest => {\n    return {\n      type: _UseUpdatesTypes.UpdateInfoType.NEW,\n      updateId: manifest.id ?? '',\n      createdAt: manifest && 'createdAt' in manifest && manifest.createdAt ? new Date(manifest.createdAt) :\n      // We should never reach this if the manifest is valid and has a commit time,\n      // but leave this in so that createdAt is always defined\n      new Date(0),\n      manifest\n    };\n  };\n  var updateFromRollback = rollback => ({\n    type: _UseUpdatesTypes.UpdateInfoType.ROLLBACK,\n    createdAt: new Date(rollback.commitTime),\n    manifest: undefined,\n    updateId: undefined\n  });\n  // Transform the useUpdates() state based on native state machine context\n  var updatesStateFromContext = context => {\n    var availableUpdate = context?.latestManifest ? updateFromManifest(context?.latestManifest) : context.rollback ? updateFromRollback(context.rollback) : undefined;\n    var downloadedUpdate = context?.downloadedManifest ? updateFromManifest(context?.downloadedManifest) : context.rollback ? updateFromRollback(context.rollback) : undefined;\n    return {\n      isStartupProcedureRunning: context.isStartupProcedureRunning,\n      isUpdateAvailable: context.isUpdateAvailable,\n      isUpdatePending: context.isUpdatePending,\n      isChecking: context.isChecking,\n      isDownloading: context.isDownloading,\n      isRestarting: context.isRestarting,\n      restartCount: context.restartCount,\n      availableUpdate,\n      downloadedUpdate,\n      checkError: context.checkError,\n      downloadError: context.downloadError,\n      downloadProgress: context.downloadProgress,\n      lastCheckForUpdateTimeSinceRestart: context.lastCheckForUpdateTime\n    };\n  };\n});","lineCount":99,"map":[[22,2,4,0,"Object"],[22,8,4,0],[22,9,4,0,"defineProperty"],[22,23,4,0],[22,24,4,0,"exports"],[22,31,4,0],[23,4,4,0,"enumerable"],[23,14,4,0],[24,4,4,0,"get"],[24,7,4,0],[24,18,4,0,"get"],[24,19,4,0],[25,6,4,0],[25,13,4,0,"currentlyRunning"],[25,29,4,0],[26,4,4,0],[27,2,4,0],[28,2,16,0,"Object"],[28,8,16,0],[28,9,16,0,"defineProperty"],[28,23,16,0],[28,24,16,0,"exports"],[28,31,16,0],[29,4,16,0,"enumerable"],[29,14,16,0],[30,4,16,0,"get"],[30,7,16,0],[30,18,16,0,"get"],[30,19,16,0],[31,6,16,0],[31,13,16,0,"updateFromManifest"],[31,31,16,0],[32,4,16,0],[33,2,16,0],[34,2,28,0,"Object"],[34,8,28,0],[34,9,28,0,"defineProperty"],[34,23,28,0],[34,24,28,0,"exports"],[34,31,28,0],[35,4,28,0,"enumerable"],[35,14,28,0],[36,4,28,0,"get"],[36,7,28,0],[36,18,28,0,"get"],[36,19,28,0],[37,6,28,0],[37,13,28,0,"updateFromRollback"],[37,31,28,0],[38,4,28,0],[39,2,28,0],[40,2,35,0,"Object"],[40,8,35,0],[40,9,35,0,"defineProperty"],[40,23,35,0],[40,24,35,0,"exports"],[40,31,35,0],[41,4,35,0,"enumerable"],[41,14,35,0],[42,4,35,0,"get"],[42,7,35,0],[42,18,35,0,"get"],[42,19,35,0],[43,6,35,0],[43,13,35,0,"updatesStateFromContext"],[43,36,35,0],[44,4,35,0],[45,2,35,0],[46,2,1,0],[46,6,1,0,"_Updates"],[46,14,1,0],[46,17,1,0,"require"],[46,24,1,0],[46,25,1,0,"_dependencyMap"],[46,39,1,0],[47,2,1,0],[47,6,1,0,"Updates"],[47,13,1,0],[47,16,1,0,"_interopNamespace"],[47,33,1,0],[47,34,1,0,"_Updates"],[47,42,1,0],[48,2,2,0],[48,6,2,0,"_UseUpdatesTypes"],[48,22,2,0],[48,25,2,0,"require"],[48,32,2,0],[48,33,2,0,"_dependencyMap"],[48,47,2,0],[49,2,3,0],[50,2,4,7],[50,6,4,13,"currentlyRunning"],[50,22,4,29],[50,25,4,32],[51,4,5,4,"updateId"],[51,12,5,12],[51,14,5,14,"Updates"],[51,21,5,21],[51,22,5,22,"updateId"],[51,30,5,30],[51,34,5,34,"undefined"],[51,43,5,43],[52,4,6,4,"channel"],[52,11,6,11],[52,13,6,13,"Updates"],[52,20,6,20],[52,21,6,21,"channel"],[52,28,6,28],[52,32,6,32,"undefined"],[52,41,6,41],[53,4,7,4,"createdAt"],[53,13,7,13],[53,15,7,15,"Updates"],[53,22,7,22],[53,23,7,23,"createdAt"],[53,32,7,32],[53,36,7,36,"undefined"],[53,45,7,45],[54,4,8,4,"launchDuration"],[54,18,8,18],[54,20,8,20,"Updates"],[54,27,8,27],[54,28,8,28,"launchDuration"],[54,42,8,42],[54,46,8,46,"undefined"],[54,55,8,55],[55,4,9,4,"isEmbeddedLaunch"],[55,20,9,20],[55,22,9,22,"Updates"],[55,29,9,29],[55,30,9,30,"isEmbeddedLaunch"],[55,46,9,46],[56,4,10,4,"isEmergencyLaunch"],[56,21,10,21],[56,23,10,23,"Updates"],[56,30,10,30],[56,31,10,31,"isEmergencyLaunch"],[56,48,10,48],[57,4,11,4,"emergencyLaunchReason"],[57,25,11,25],[57,27,11,27,"Updates"],[57,34,11,34],[57,35,11,35,"emergencyLaunchReason"],[57,56,11,56],[58,4,12,4,"manifest"],[58,12,12,12],[58,14,12,14,"Updates"],[58,21,12,21],[58,22,12,22,"manifest"],[58,30,12,30],[58,34,12,34,"undefined"],[58,43,12,43],[59,4,13,4,"runtimeVersion"],[59,18,13,18],[59,20,13,20,"Updates"],[59,27,13,27],[59,28,13,28,"runtimeVersion"],[59,42,13,42],[59,46,13,46,"undefined"],[60,2,14,0],[60,3,14,1],[61,2,15,0],[62,2,16,7],[62,6,16,13,"updateFromManifest"],[62,24,16,31],[62,27,16,35,"manifest"],[62,35,16,43],[62,39,16,48],[63,4,17,4],[63,11,17,11],[64,6,18,8,"type"],[64,10,18,12],[64,12,18,14,"UpdateInfoType"],[64,28,18,28],[64,29,18,28,"UpdateInfoType"],[64,43,18,28],[64,44,18,29,"NEW"],[64,47,18,32],[65,6,19,8,"updateId"],[65,14,19,16],[65,16,19,18,"manifest"],[65,24,19,26],[65,25,19,27,"id"],[65,27,19,29],[65,31,19,33],[65,33,19,35],[66,6,20,8,"createdAt"],[66,15,20,17],[66,17,20,19,"manifest"],[66,25,20,27],[66,29,20,31],[66,40,20,42],[66,44,20,46,"manifest"],[66,52,20,54],[66,56,20,58,"manifest"],[66,64,20,66],[66,65,20,67,"createdAt"],[66,74,20,76],[66,77,21,14],[66,81,21,18,"Date"],[66,85,21,22],[66,86,21,23,"manifest"],[66,94,21,31],[66,95,21,32,"createdAt"],[66,104,21,41],[66,105,21,42],[67,6,22,14],[68,6,23,16],[69,6,24,16],[69,10,24,20,"Date"],[69,14,24,24],[69,15,24,25],[69,16,24,26],[69,17,24,27],[70,6,25,8,"manifest"],[71,4,26,4],[71,5,26,5],[72,2,27,0],[72,3,27,1],[73,2,28,7],[73,6,28,13,"updateFromRollback"],[73,24,28,31],[73,27,28,35,"rollback"],[73,35,28,43],[73,40,28,49],[74,4,29,4,"type"],[74,8,29,8],[74,10,29,10,"UpdateInfoType"],[74,26,29,24],[74,27,29,24,"UpdateInfoType"],[74,41,29,24],[74,42,29,25,"ROLLBACK"],[74,50,29,33],[75,4,30,4,"createdAt"],[75,13,30,13],[75,15,30,15],[75,19,30,19,"Date"],[75,23,30,23],[75,24,30,24,"rollback"],[75,32,30,32],[75,33,30,33,"commitTime"],[75,43,30,43],[75,44,30,44],[76,4,31,4,"manifest"],[76,12,31,12],[76,14,31,14,"undefined"],[76,23,31,23],[77,4,32,4,"updateId"],[77,12,32,12],[77,14,32,14,"undefined"],[78,2,33,0],[78,3,33,1],[78,4,33,2],[79,2,34,0],[80,2,35,7],[80,6,35,13,"updatesStateFromContext"],[80,29,35,36],[80,32,35,40,"context"],[80,39,35,47],[80,43,35,52],[81,4,36,4],[81,8,36,10,"availableUpdate"],[81,23,36,25],[81,26,36,28,"context"],[81,33,36,35],[81,35,36,37,"latestManifest"],[81,49,36,51],[81,52,37,10,"updateFromManifest"],[81,70,37,28],[81,71,37,29,"context"],[81,78,37,36],[81,80,37,38,"latestManifest"],[81,94,37,52],[81,95,37,53],[81,98,38,10,"context"],[81,105,38,17],[81,106,38,18,"rollback"],[81,114,38,26],[81,117,39,14,"updateFromRollback"],[81,135,39,32],[81,136,39,33,"context"],[81,143,39,40],[81,144,39,41,"rollback"],[81,152,39,49],[81,153,39,50],[81,156,40,14,"undefined"],[81,165,40,23],[82,4,41,4],[82,8,41,10,"downloadedUpdate"],[82,24,41,26],[82,27,41,29,"context"],[82,34,41,36],[82,36,41,38,"downloadedManifest"],[82,54,41,56],[82,57,42,10,"updateFromManifest"],[82,75,42,28],[82,76,42,29,"context"],[82,83,42,36],[82,85,42,38,"downloadedManifest"],[82,103,42,56],[82,104,42,57],[82,107,43,10,"context"],[82,114,43,17],[82,115,43,18,"rollback"],[82,123,43,26],[82,126,44,14,"updateFromRollback"],[82,144,44,32],[82,145,44,33,"context"],[82,152,44,40],[82,153,44,41,"rollback"],[82,161,44,49],[82,162,44,50],[82,165,45,14,"undefined"],[82,174,45,23],[83,4,46,4],[83,11,46,11],[84,6,47,8,"isStartupProcedureRunning"],[84,31,47,33],[84,33,47,35,"context"],[84,40,47,42],[84,41,47,43,"isStartupProcedureRunning"],[84,66,47,68],[85,6,48,8,"isUpdateAvailable"],[85,23,48,25],[85,25,48,27,"context"],[85,32,48,34],[85,33,48,35,"isUpdateAvailable"],[85,50,48,52],[86,6,49,8,"isUpdatePending"],[86,21,49,23],[86,23,49,25,"context"],[86,30,49,32],[86,31,49,33,"isUpdatePending"],[86,46,49,48],[87,6,50,8,"isChecking"],[87,16,50,18],[87,18,50,20,"context"],[87,25,50,27],[87,26,50,28,"isChecking"],[87,36,50,38],[88,6,51,8,"isDownloading"],[88,19,51,21],[88,21,51,23,"context"],[88,28,51,30],[88,29,51,31,"isDownloading"],[88,42,51,44],[89,6,52,8,"isRestarting"],[89,18,52,20],[89,20,52,22,"context"],[89,27,52,29],[89,28,52,30,"isRestarting"],[89,40,52,42],[90,6,53,8,"restartCount"],[90,18,53,20],[90,20,53,22,"context"],[90,27,53,29],[90,28,53,30,"restartCount"],[90,40,53,42],[91,6,54,8,"availableUpdate"],[91,21,54,23],[92,6,55,8,"downloadedUpdate"],[92,22,55,24],[93,6,56,8,"checkError"],[93,16,56,18],[93,18,56,20,"context"],[93,25,56,27],[93,26,56,28,"checkError"],[93,36,56,38],[94,6,57,8,"downloadError"],[94,19,57,21],[94,21,57,23,"context"],[94,28,57,30],[94,29,57,31,"downloadError"],[94,42,57,44],[95,6,58,8,"downloadProgress"],[95,22,58,24],[95,24,58,26,"context"],[95,31,58,33],[95,32,58,34,"downloadProgress"],[95,48,58,50],[96,6,59,8,"lastCheckForUpdateTimeSinceRestart"],[96,40,59,42],[96,42,59,44,"context"],[96,49,59,51],[96,50,59,52,"lastCheckForUpdateTime"],[97,4,60,4],[97,5,60,5],[98,2,61,0],[98,3,61,1],[99,0,61,2],[99,3]],"functionMap":{"names":["<global>","updateFromManifest","updateFromRollback","updatesStateFromContext"],"mappings":"AAA;kCCe;CDW;kCEC;EFK;uCGE;CH0B"},"hasCjsExports":false},"type":"js/module"}]}