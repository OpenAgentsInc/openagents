{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"../proxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":14},"end":{"line":2,"column":72,"index":86}}],"key":"7t6p+wFqa3TKNDAU+WlzybERgtk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0]);\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1]);\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _proxy = require(_dependencyMap[2]);\n  /**\n   * This class is responsible for managing the registry of CSS animation\n   * keyframes. It keeps track of views that use specific animations and handles\n   * native-side registration. Animation keyframes are registered on the native\n   * side only when used for the first time and unregistered when removed from the\n   * last view that uses them.\n   */\n  var CSSKeyframesRegistry = /*#__PURE__*/function () {\n    function CSSKeyframesRegistry() {\n      (0, _classCallCheck.default)(this, CSSKeyframesRegistry);\n      this.cssTextToNameMap_ = new Map();\n      this.nameToKeyframes_ = new Map();\n    }\n    return (0, _createClass.default)(CSSKeyframesRegistry, [{\n      key: \"get\",\n      value: function get(nameOrCssText) {\n        var result = this.nameToKeyframes_.get(nameOrCssText);\n        if (result) {\n          return result.keyframesRule;\n        }\n        var animationName = this.cssTextToNameMap_.get(nameOrCssText);\n        if (animationName) {\n          return this.nameToKeyframes_.get(animationName)?.keyframesRule;\n        }\n      }\n    }, {\n      key: \"add\",\n      value: function add(keyframesRule, viewName, viewTag) {\n        var existingKeyframesEntry = this.nameToKeyframes_.get(keyframesRule.name);\n        var existingComponentEntry = existingKeyframesEntry?.usedBy[viewName];\n        if (existingComponentEntry) {\n          // Just add the view tag to the existing component entry if keyframes\n          // for the specific animation and component name are already registered\n          existingComponentEntry.add(viewTag);\n          return;\n        }\n\n        // Otherwise, we have to register keyframes preprocessed for the specific\n        // component name\n        if (existingKeyframesEntry) {\n          existingKeyframesEntry.usedBy[viewName] = new Set([viewTag]);\n        } else {\n          this.nameToKeyframes_.set(keyframesRule.name, {\n            keyframesRule,\n            usedBy: {\n              [viewName]: new Set([viewTag])\n            }\n          });\n        }\n\n        // Store the keyframes to name mapping in order to reuse the same\n        // animation name when possible (when the same inline keyframes object\n        // is used)\n        this.cssTextToNameMap_.set(keyframesRule.cssText, keyframesRule.name);\n\n        // Register animation keyframes only if they are not already registered\n        // (when they are added for the first time)\n        (0, _proxy.registerCSSKeyframes)(keyframesRule.name, viewName, keyframesRule.getNormalizedKeyframesConfig(viewName));\n      }\n    }, {\n      key: \"remove\",\n      value: function remove(animationName, viewName, viewTag) {\n        var keyframesEntry = this.nameToKeyframes_.get(animationName);\n        if (!keyframesEntry) {\n          return;\n        }\n        var componentEntry = keyframesEntry.usedBy[viewName];\n        componentEntry.delete(viewTag);\n        if (componentEntry.size === 0) {\n          delete keyframesEntry.usedBy[viewName];\n          (0, _proxy.unregisterCSSKeyframes)(animationName, viewName);\n        }\n        if (Object.keys(keyframesEntry.usedBy).length === 0) {\n          this.nameToKeyframes_.delete(animationName);\n          this.cssTextToNameMap_.delete(keyframesEntry.keyframesRule.cssText);\n        }\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this.nameToKeyframes_.clear();\n        this.cssTextToNameMap_.clear();\n      }\n    }]);\n  }();\n  var cssKeyframesRegistry = new CSSKeyframesRegistry();\n  var _default = cssKeyframesRegistry;\n});","lineCount":110,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopDefault"],[7,27,1,13,"e"],[7,28,1,13],[8,4,1,13],[8,11,1,13,"e"],[8,12,1,13],[8,16,1,13,"e"],[8,17,1,13],[8,18,1,13,"__esModule"],[8,28,1,13],[8,31,1,13,"e"],[8,32,1,13],[9,6,1,13,"default"],[9,13,1,13],[9,15,1,13,"e"],[10,4,1,13],[11,2,1,13],[12,2,99,0,"Object"],[12,8,99,0],[12,9,99,0,"defineProperty"],[12,23,99,0],[12,24,99,0,"exports"],[12,31,99,0],[13,4,99,0,"enumerable"],[13,14,99,0],[14,4,99,0,"get"],[14,7,99,0],[14,18,99,0,"get"],[14,19,99,0],[15,6,99,0],[15,13,99,0,"_default"],[15,21,99,0],[16,4,99,0],[17,2,99,0],[18,2,99,36],[18,6,99,36,"_babelRuntimeHelpersClassCallCheck"],[18,40,99,36],[18,43,99,36,"require"],[18,50,99,36],[18,51,99,36,"_dependencyMap"],[18,65,99,36],[19,2,99,36],[19,6,99,36,"_classCallCheck"],[19,21,99,36],[19,24,99,36,"_interopDefault"],[19,39,99,36],[19,40,99,36,"_babelRuntimeHelpersClassCallCheck"],[19,74,99,36],[20,2,99,36],[20,6,99,36,"_babelRuntimeHelpersCreateClass"],[20,37,99,36],[20,40,99,36,"require"],[20,47,99,36],[20,48,99,36,"_dependencyMap"],[20,62,99,36],[21,2,99,36],[21,6,99,36,"_createClass"],[21,18,99,36],[21,21,99,36,"_interopDefault"],[21,36,99,36],[21,37,99,36,"_babelRuntimeHelpersCreateClass"],[21,68,99,36],[22,2,2,0],[22,6,2,0,"_proxy"],[22,12,2,0],[22,15,2,0,"require"],[22,22,2,0],[22,23,2,0,"_dependencyMap"],[22,37,2,0],[23,2,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[30,2,10,0],[30,6,17,6,"CSSKeyframesRegistry"],[30,26,17,26],[31,4,17,26],[31,13,17,26,"CSSKeyframesRegistry"],[31,34,17,26],[32,6,17,26],[32,10,17,26,"_classCallCheck"],[32,25,17,26],[32,26,17,26,"default"],[32,33,17,26],[32,41,17,26,"CSSKeyframesRegistry"],[32,61,17,26],[33,6,17,26],[33,11,18,19,"cssTextToNameMap_"],[33,28,18,36],[33,31,18,60],[33,35,18,64,"Map"],[33,38,18,67],[33,39,18,68],[33,40,18,69],[34,6,18,69],[34,11,19,19,"nameToKeyframes_"],[34,27,19,35],[34,30,19,67],[34,34,19,71,"Map"],[34,37,19,74],[34,38,19,75],[34,39,19,76],[35,4,19,76],[36,4,19,76],[36,15,19,76,"_createClass"],[36,27,19,76],[36,28,19,76,"default"],[36,35,19,76],[36,37,19,76,"CSSKeyframesRegistry"],[36,57,19,76],[37,6,19,76,"key"],[37,9,19,76],[38,6,19,76,"value"],[38,11,19,76],[38,13,21,2],[38,22,21,2,"get"],[38,25,21,5,"get"],[38,26,21,6,"nameOrCssText"],[38,39,21,27],[38,41,21,29],[39,8,22,4],[39,12,22,10,"result"],[39,18,22,16],[39,21,22,19],[39,25,22,23],[39,26,22,24,"nameToKeyframes_"],[39,42,22,40],[39,43,22,41,"get"],[39,46,22,44],[39,47,22,45,"nameOrCssText"],[39,60,22,58],[39,61,22,59],[40,8,23,4],[40,12,23,8,"result"],[40,18,23,14],[40,20,23,16],[41,10,24,6],[41,17,24,13,"result"],[41,23,24,19],[41,24,24,20,"keyframesRule"],[41,37,24,33],[42,8,25,4],[43,8,27,4],[43,12,27,10,"animationName"],[43,25,27,23],[43,28,27,26],[43,32,27,30],[43,33,27,31,"cssTextToNameMap_"],[43,50,27,48],[43,51,27,49,"get"],[43,54,27,52],[43,55,27,53,"nameOrCssText"],[43,68,27,66],[43,69,27,67],[44,8,28,4],[44,12,28,8,"animationName"],[44,25,28,21],[44,27,28,23],[45,10,29,6],[45,17,29,13],[45,21,29,17],[45,22,29,18,"nameToKeyframes_"],[45,38,29,34],[45,39,29,35,"get"],[45,42,29,38],[45,43,29,39,"animationName"],[45,56,29,52],[45,57,29,53],[45,59,29,55,"keyframesRule"],[45,72,29,68],[46,8,30,4],[47,6,31,2],[48,4,31,3],[49,6,31,3,"key"],[49,9,31,3],[50,6,31,3,"value"],[50,11,31,3],[50,13,33,2],[50,22,33,2,"add"],[50,25,33,5,"add"],[50,26,33,6,"keyframesRule"],[50,39,33,41],[50,41,33,43,"viewName"],[50,49,33,59],[50,51,33,61,"viewTag"],[50,58,33,76],[50,60,33,78],[51,8,34,4],[51,12,34,10,"existingKeyframesEntry"],[51,34,34,32],[51,37,34,35],[51,41,34,39],[51,42,34,40,"nameToKeyframes_"],[51,58,34,56],[51,59,34,57,"get"],[51,62,34,60],[51,63,35,6,"keyframesRule"],[51,76,35,19],[51,77,35,20,"name"],[51,81,36,4],[51,82,36,5],[52,8,37,4],[52,12,37,10,"existingComponentEntry"],[52,34,37,32],[52,37,37,35,"existingKeyframesEntry"],[52,59,37,57],[52,61,37,59,"usedBy"],[52,67,37,65],[52,68,37,66,"viewName"],[52,76,37,74],[52,77,37,75],[53,8,39,4],[53,12,39,8,"existingComponentEntry"],[53,34,39,30],[53,36,39,32],[54,10,40,6],[55,10,41,6],[56,10,42,6,"existingComponentEntry"],[56,32,42,28],[56,33,42,29,"add"],[56,36,42,32],[56,37,42,33,"viewTag"],[56,44,42,40],[56,45,42,41],[57,10,43,6],[58,8,44,4],[60,8,46,4],[61,8,47,4],[62,8,48,4],[62,12,48,8,"existingKeyframesEntry"],[62,34,48,30],[62,36,48,32],[63,10,49,6,"existingKeyframesEntry"],[63,32,49,28],[63,33,49,29,"usedBy"],[63,39,49,35],[63,40,49,36,"viewName"],[63,48,49,44],[63,49,49,45],[63,52,49,48],[63,56,49,52,"Set"],[63,59,49,55],[63,60,49,56],[63,61,49,57,"viewTag"],[63,68,49,64],[63,69,49,65],[63,70,49,66],[64,8,50,4],[64,9,50,5],[64,15,50,11],[65,10,51,6],[65,14,51,10],[65,15,51,11,"nameToKeyframes_"],[65,31,51,27],[65,32,51,28,"set"],[65,35,51,31],[65,36,51,32,"keyframesRule"],[65,49,51,45],[65,50,51,46,"name"],[65,54,51,50],[65,56,51,52],[66,12,52,8,"keyframesRule"],[66,25,52,21],[67,12,53,8,"usedBy"],[67,18,53,14],[67,20,53,16],[68,14,53,18],[68,15,53,19,"viewName"],[68,23,53,27],[68,26,53,30],[68,30,53,34,"Set"],[68,33,53,37],[68,34,53,38],[68,35,53,39,"viewTag"],[68,42,53,46],[68,43,53,47],[69,12,53,49],[70,10,54,6],[70,11,54,7],[70,12,54,8],[71,8,55,4],[73,8,57,4],[74,8,58,4],[75,8,59,4],[76,8,60,4],[76,12,60,8],[76,13,60,9,"cssTextToNameMap_"],[76,30,60,26],[76,31,60,27,"set"],[76,34,60,30],[76,35,60,31,"keyframesRule"],[76,48,60,44],[76,49,60,45,"cssText"],[76,56,60,52],[76,58,60,54,"keyframesRule"],[76,71,60,67],[76,72,60,68,"name"],[76,76,60,72],[76,77,60,73],[78,8,62,4],[79,8,63,4],[80,8,64,4],[80,12,64,4,"registerCSSKeyframes"],[80,18,64,24],[80,19,64,24,"registerCSSKeyframes"],[80,39,64,24],[80,41,65,6,"keyframesRule"],[80,54,65,19],[80,55,65,20,"name"],[80,59,65,24],[80,61,66,6,"viewName"],[80,69,66,14],[80,71,67,6,"keyframesRule"],[80,84,67,19],[80,85,67,20,"getNormalizedKeyframesConfig"],[80,113,67,48],[80,114,67,49,"viewName"],[80,122,67,57],[80,123,68,4],[80,124,68,5],[81,6,69,2],[82,4,69,3],[83,6,69,3,"key"],[83,9,69,3],[84,6,69,3,"value"],[84,11,69,3],[84,13,71,2],[84,22,71,2,"remove"],[84,28,71,8,"remove"],[84,29,71,9,"animationName"],[84,42,71,30],[84,44,71,32,"viewName"],[84,52,71,48],[84,54,71,50,"viewTag"],[84,61,71,65],[84,63,71,67],[85,8,72,4],[85,12,72,10,"keyframesEntry"],[85,26,72,24],[85,29,72,27],[85,33,72,31],[85,34,72,32,"nameToKeyframes_"],[85,50,72,48],[85,51,72,49,"get"],[85,54,72,52],[85,55,72,53,"animationName"],[85,68,72,66],[85,69,72,67],[86,8,73,4],[86,12,73,8],[86,13,73,9,"keyframesEntry"],[86,27,73,23],[86,29,73,25],[87,10,74,6],[88,8,75,4],[89,8,77,4],[89,12,77,10,"componentEntry"],[89,26,77,24],[89,29,77,27,"keyframesEntry"],[89,43,77,41],[89,44,77,42,"usedBy"],[89,50,77,48],[89,51,77,49,"viewName"],[89,59,77,57],[89,60,77,58],[90,8,78,4,"componentEntry"],[90,22,78,18],[90,23,78,19,"delete"],[90,29,78,25],[90,30,78,26,"viewTag"],[90,37,78,33],[90,38,78,34],[91,8,80,4],[91,12,80,8,"componentEntry"],[91,26,80,22],[91,27,80,23,"size"],[91,31,80,27],[91,36,80,32],[91,37,80,33],[91,39,80,35],[92,10,81,6],[92,17,81,13,"keyframesEntry"],[92,31,81,27],[92,32,81,28,"usedBy"],[92,38,81,34],[92,39,81,35,"viewName"],[92,47,81,43],[92,48,81,44],[93,10,82,6],[93,14,82,6,"unregisterCSSKeyframes"],[93,20,82,28],[93,21,82,28,"unregisterCSSKeyframes"],[93,43,82,28],[93,45,82,29,"animationName"],[93,58,82,42],[93,60,82,44,"viewName"],[93,68,82,52],[93,69,82,53],[94,8,83,4],[95,8,85,4],[95,12,85,8,"Object"],[95,18,85,14],[95,19,85,15,"keys"],[95,23,85,19],[95,24,85,20,"keyframesEntry"],[95,38,85,34],[95,39,85,35,"usedBy"],[95,45,85,41],[95,46,85,42],[95,47,85,43,"length"],[95,53,85,49],[95,58,85,54],[95,59,85,55],[95,61,85,57],[96,10,86,6],[96,14,86,10],[96,15,86,11,"nameToKeyframes_"],[96,31,86,27],[96,32,86,28,"delete"],[96,38,86,34],[96,39,86,35,"animationName"],[96,52,86,48],[96,53,86,49],[97,10,87,6],[97,14,87,10],[97,15,87,11,"cssTextToNameMap_"],[97,32,87,28],[97,33,87,29,"delete"],[97,39,87,35],[97,40,87,36,"keyframesEntry"],[97,54,87,50],[97,55,87,51,"keyframesRule"],[97,68,87,64],[97,69,87,65,"cssText"],[97,76,87,72],[97,77,87,73],[98,8,88,4],[99,6,89,2],[100,4,89,3],[101,6,89,3,"key"],[101,9,89,3],[102,6,89,3,"value"],[102,11,89,3],[102,13,91,2],[102,22,91,2,"clear"],[102,27,91,7,"clear"],[102,28,91,7],[102,30,91,10],[103,8,92,4],[103,12,92,8],[103,13,92,9,"nameToKeyframes_"],[103,29,92,25],[103,30,92,26,"clear"],[103,35,92,31],[103,36,92,32],[103,37,92,33],[104,8,93,4],[104,12,93,8],[104,13,93,9,"cssTextToNameMap_"],[104,30,93,26],[104,31,93,27,"clear"],[104,36,93,32],[104,37,93,33],[104,38,93,34],[105,6,94,2],[106,4,94,3],[107,2,94,3],[108,2,97,0],[108,6,97,6,"cssKeyframesRegistry"],[108,26,97,26],[108,29,97,29],[108,33,97,33,"CSSKeyframesRegistry"],[108,53,97,53],[108,54,97,54],[108,55,97,55],[109,2,99,0],[109,6,99,0,"_default"],[109,14,99,0],[109,17,99,15,"cssKeyframesRegistry"],[109,37,99,35],[110,0,99,36],[110,3]],"functionMap":{"names":["<global>","CSSKeyframesRegistry","get","add","remove","clear"],"mappings":"AAA;ACgB;ECI;GDU;EEE;GFoC;EGE;GHkB;EIE;GJG;CDC"},"hasCjsExports":false},"type":"js/module"}]}