{
  "version": 3,
  "sources": ["../../../../src/cli/lib/functionSpec.ts"],
  "sourcesContent": ["import chalk from \"chalk\";\nimport { logOutput } from \"../../bundler/log.js\";\nimport { runSystemQuery } from \"./run.js\";\nimport { Context } from \"../../bundler/context.js\";\n\nexport async function functionSpecForDeployment(\n  ctx: Context,\n  options: {\n    deploymentUrl: string;\n    adminKey: string;\n    file: boolean;\n  },\n) {\n  const functions = (await runSystemQuery(ctx, {\n    deploymentUrl: options.deploymentUrl,\n    adminKey: options.adminKey,\n    functionName: \"_system/cli/modules:apiSpec\",\n    componentPath: undefined,\n    args: {},\n  })) as any[];\n  const url = (await runSystemQuery(ctx, {\n    deploymentUrl: options.deploymentUrl,\n    adminKey: options.adminKey,\n    functionName: \"_system/cli/convexUrl:cloudUrl\",\n    componentPath: undefined,\n    args: {},\n  })) as string;\n\n  const output = JSON.stringify({ url, functions }, null, 2);\n\n  if (options.file) {\n    const fileName = `function_spec_${Date.now().valueOf()}.json`;\n    ctx.fs.writeUtf8File(fileName, output);\n    logOutput(chalk.green(`Wrote function spec to ${fileName}`));\n  } else {\n    logOutput(output);\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAClB,iBAA0B;AAC1B,iBAA+B;AAG/B,eAAsB,0BACpB,KACA,SAKA;AACA,QAAM,YAAa,UAAM,2BAAe,KAAK;AAAA,IAC3C,eAAe,QAAQ;AAAA,IACvB,UAAU,QAAQ;AAAA,IAClB,cAAc;AAAA,IACd,eAAe;AAAA,IACf,MAAM,CAAC;AAAA,EACT,CAAC;AACD,QAAM,MAAO,UAAM,2BAAe,KAAK;AAAA,IACrC,eAAe,QAAQ;AAAA,IACvB,UAAU,QAAQ;AAAA,IAClB,cAAc;AAAA,IACd,eAAe;AAAA,IACf,MAAM,CAAC;AAAA,EACT,CAAC;AAED,QAAM,SAAS,KAAK,UAAU,EAAE,KAAK,UAAU,GAAG,MAAM,CAAC;AAEzD,MAAI,QAAQ,MAAM;AAChB,UAAM,WAAW,iBAAiB,KAAK,IAAI,EAAE,QAAQ,CAAC;AACtD,QAAI,GAAG,cAAc,UAAU,MAAM;AACrC,8BAAU,aAAAA,QAAM,MAAM,0BAA0B,QAAQ,EAAE,CAAC;AAAA,EAC7D,OAAO;AACL,8BAAU,MAAM;AAAA,EAClB;AACF;",
  "names": ["chalk"]
}
