{
  "version": 3,
  "sources": ["../../../src/cli/logs.ts"],
  "sourcesContent": ["import { Command } from \"@commander-js/extra-typings\";\nimport { oneoffContext } from \"../bundler/context.js\";\nimport {\n  deploymentSelectionWithinProjectFromOptions,\n  loadSelectedDeploymentCredentials,\n} from \"./lib/api.js\";\nimport { actionDescription } from \"./lib/command.js\";\nimport { logsForDeployment } from \"./lib/logs.js\";\nimport { getDeploymentSelection } from \"./lib/deploymentSelection.js\";\n\nexport const logs = new Command(\"logs\")\n  .summary(\"Watch logs from your deployment\")\n  .description(\n    \"Stream function logs from your Convex deployment.\\nBy default, this streams from your project's dev deployment.\",\n  )\n  .allowExcessArguments(false)\n  .addLogsOptions()\n  .addDeploymentSelectionOptions(actionDescription(\"Watch logs from\"))\n  .showHelpAfterError()\n  .action(async (cmdOptions) => {\n    const ctx = await oneoffContext(cmdOptions);\n\n    const selectionWithinProject =\n      deploymentSelectionWithinProjectFromOptions(cmdOptions);\n    const deploymentSelection = await getDeploymentSelection(ctx, cmdOptions);\n    const deployment = await loadSelectedDeploymentCredentials(\n      ctx,\n      deploymentSelection,\n      selectionWithinProject,\n    );\n    const deploymentName = deployment.deploymentFields?.deploymentName\n      ? ` ${deployment.deploymentFields.deploymentName}`\n      : \"\";\n    const deploymentNotice = ` for ${cmdOptions.prod ? \"production\" : \"dev\"} deployment${deploymentName}`;\n    await logsForDeployment(ctx, deployment, {\n      history: cmdOptions.history,\n      success: cmdOptions.success,\n      jsonl: cmdOptions.jsonl,\n      deploymentNotice,\n    });\n  });\n"],
  "mappings": ";AAAA,SAAS,eAAe;AACxB,SAAS,qBAAqB;AAC9B;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP,SAAS,yBAAyB;AAClC,SAAS,yBAAyB;AAClC,SAAS,8BAA8B;AAEhC,aAAM,OAAO,IAAI,QAAQ,MAAM,EACnC,QAAQ,iCAAiC,EACzC;AAAA,EACC;AACF,EACC,qBAAqB,KAAK,EAC1B,eAAe,EACf,8BAA8B,kBAAkB,iBAAiB,CAAC,EAClE,mBAAmB,EACnB,OAAO,OAAO,eAAe;AAC5B,QAAM,MAAM,MAAM,cAAc,UAAU;AAE1C,QAAM,yBACJ,4CAA4C,UAAU;AACxD,QAAM,sBAAsB,MAAM,uBAAuB,KAAK,UAAU;AACxE,QAAM,aAAa,MAAM;AAAA,IACvB;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACA,QAAM,iBAAiB,WAAW,kBAAkB,iBAChD,IAAI,WAAW,iBAAiB,cAAc,KAC9C;AACJ,QAAM,mBAAmB,QAAQ,WAAW,OAAO,eAAe,KAAK,cAAc,cAAc;AACnG,QAAM,kBAAkB,KAAK,YAAY;AAAA,IACvC,SAAS,WAAW;AAAA,IACpB,SAAS,WAAW;AAAA,IACpB,OAAO,WAAW;AAAA,IAClB;AAAA,EACF,CAAC;AACH,CAAC;",
  "names": []
}
