<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OpenAgents v3</title>
  <!-- Force dark mode FIRST -->
  <script>
    try {
      localStorage.setItem('themeMode', 'dark');
      document.documentElement.classList.add('dark');
    } catch (e) {
      // localStorage may be blocked
    }
  </script>
  <!-- Load Effuse-based mainview -->
  <script defer src="effuse-main.js"></script>
  <!-- Basecoat CSS (includes Tailwind utilities pre-compiled) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/basecoat-css@0.3.6/dist/basecoat.cdn.min.css">
  <script src="https://cdn.jsdelivr.net/npm/basecoat-css@0.3.6/dist/js/all.min.js" defer></script>
  <!-- Tailwind Browser for arbitrary values -->
  <script>
    window.tailwindConfig = {
      scan: {
        debounce: 100,
      }
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4" defer></script>
  <!-- Local styles -->
  <link rel="stylesheet" href="index.css">
</head>

<body class="bg-zinc-950 text-zinc-100 min-h-screen">
  <!-- Main Layout Grid -->
  <div class="flex h-screen overflow-hidden">

    <!-- Left Sidebar: Trajectory Pane + TB Controls -->
    <aside class="w-80 flex-shrink-0 flex flex-col border-r border-zinc-800/60 bg-zinc-950/90">
      <!-- TB Controls Widget -->
      <div id="tb-controls-widget" class="flex-shrink-0"></div>

      <!-- Trajectory Pane Widget -->
      <div id="trajectory-pane-widget" class="flex-1 overflow-hidden"></div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col overflow-hidden">
      <!-- MC Tasks Widget (top, collapsible) -->
      <div id="mc-tasks-widget" class="flex-shrink-0 p-4"></div>

      <!-- Container Panes Widget (middle, scrollable) -->
      <div id="container-panes-widget" class="flex-1 overflow-y-auto p-4"></div>

      <!-- Category Tree Widget (overlay, initially hidden) -->
      <div id="category-tree-widget"></div>
    </main>
  </div>

  <!-- Floating Widgets -->

  <!-- APM Widget (bottom-right corner) -->
  <div id="apm-widget"></div>

  <!-- TB Output Widget (floating panel) -->
  <div id="tb-output-widget"></div>
</body>

</html>
